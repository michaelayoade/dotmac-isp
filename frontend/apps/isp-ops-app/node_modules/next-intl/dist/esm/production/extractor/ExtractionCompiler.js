import a from"./catalog/CatalogManager.js";class i{isDevelopment=!1;constructor(i,t={}){this.manager=new a(i,t),this.isDevelopment=t.isDevelopment??!1,this.initialScanPromise=this.performInitialScan()}async compile(a,i){this.initialScanPromise&&(await this.initialScanPromise,this.initialScanPromise=void 0);const t=await this.manager.extractFileMessages(a,i);return this.isDevelopment&&t.changed&&this.manager.save(),t}async performInitialScan(){await this.manager.loadMessages(),await this.manager.save()}async extract(){await this.initialScanPromise}[Symbol.dispose](){this.manager.destroy()}}export{i as default};
