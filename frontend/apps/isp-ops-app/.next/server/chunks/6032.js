exports.id=6032,exports.ids=[6032],exports.modules={18191:(e,r,t)=>{Promise.resolve().then(t.bind(t,12764)),Promise.resolve().then(t.bind(t,23287)),Promise.resolve().then(t.bind(t,22391)),Promise.resolve().then(t.bind(t,11151)),Promise.resolve().then(t.bind(t,97398))},80447:(e,r,t)=>{Promise.resolve().then(t.bind(t,37))},97e3:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},37:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(10326),a=t(48723),s=t(41291),o=t(95920),i=t(90434);function l(){return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:(0,n.jsx)(a.Card,{className:"max-w-md w-full",children:(0,n.jsxs)(a.CardContent,{className:"pt-6 text-center space-y-6",children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("div",{className:"rounded-full bg-red-500/20 p-4",children:(0,n.jsx)(s.Z,{className:"h-16 w-16 text-red-500"})})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h1",{className:"text-4xl font-bold",children:"404"}),(0,n.jsx)("h2",{className:"text-2xl font-semibold",children:"Page Not Found"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"The page you're looking for doesn't exist or has been moved."})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 pt-4",children:[(0,n.jsx)(i.default,{href:"/dashboard",children:(0,n.jsxs)(a.Button,{className:"w-full",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]})}),(0,n.jsx)(i.default,{href:"/",children:(0,n.jsx)(a.Button,{variant:"outline",className:"w-full",children:"Go to Home"})})]})]})})})}},12764:(e,r,t)=>{"use strict";t.d(r,{ErrorBoundary:()=>o});var n=t(10326),a=t(84238),s=t(29771);function o({children:e,fallback:r,onError:t}){return(0,n.jsx)(a.SV,{logger:s.k,...r?{fallback:r}:{},...t?{onError:t}:{},children:e})}},11151:(e,r,t)=>{"use strict";t.d(r,{RuntimeConfigBoundary:()=>s});var n=t(10326),a=t(17577);function s({children:e}){return(0,n.jsx)(Object(function(){var e=Error("Cannot find module '@shared/runtime/RuntimeConfigContext'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsx)(o,{children:e})})}function o({children:e}){let{runtimeConfig:r,error:t,loading:s,refresh:o}=Object(function(){var e=Error("Cannot find module '@shared/runtime/RuntimeConfigContext'");throw e.code="MODULE_NOT_FOUND",e}())(),i=(0,a.useMemo)(()=>!!(t&&!s&&!r),[t,s,r]);return(0,n.jsxs)(n.Fragment,{children:[e,i?(0,n.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-background/80 backdrop-blur-sm px-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-border bg-card shadow-xl p-6 space-y-3",children:[(0,n.jsx)("div",{className:"text-lg font-semibold text-foreground",children:"Unable to load configuration"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"We could not fetch the runtime settings required for this app. Please try again. If the issue persists, check connectivity to the platform API."}),"string"==typeof t?(0,n.jsx)("pre",{className:"text-xs text-muted-foreground bg-muted/60 rounded-md p-3 overflow-auto",children:t}):null,(0,n.jsx)("div",{className:"flex justify-end gap-3 pt-1",children:(0,n.jsx)("button",{type:"button",onClick:()=>o().catch(()=>void 0),className:"px-4 py-2 rounded-md bg-[var(--brand-primary,#0ea5e9)] text-white hover:bg-[var(--brand-primary-hover,#0284c7)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--brand-primary,#0ea5e9)]",children:"Retry"})})]})}):null]})}(function(){var e=Error("Cannot find module '@shared/runtime/RuntimeConfigContext'");throw e.code="MODULE_NOT_FOUND",e})(),t(36607)},23287:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var n=t(10326),a=t(17577),s=t(48723),o=t(83495),i=t(31540),l=t(94019),c=t(91064);function d(){let[e,r]=(0,a.useState)(!1),[t,d]=(0,a.useState)(!1),u=async()=>{await (0,c.ud)()&&r(!1)},p=()=>{r(!1),d(!0),localStorage.setItem("pwa-install-dismissed","true")};return!e||t?null:(0,n.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:max-w-sm",children:(0,n.jsx)(s.Card,{className:"shadow-2xl border-2 border-blue-500",children:(0,n.jsxs)(s.CardContent,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(o.Z,{className:"h-6 w-6 text-blue-600"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("h3",{className:"font-semibold text-base mb-1",children:"Install dotmac Ops"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Install our app for faster access, offline support, and notifications."}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(s.Button,{size:"sm",onClick:u,className:"flex-1",children:[(0,n.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Install"]}),(0,n.jsx)(s.Button,{size:"sm",variant:"outline",onClick:p,children:"Later"})]})]}),(0,n.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:(0,n.jsx)(l.Z,{className:"h-5 w-5"})})]}),(0,n.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-600",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center mb-1",children:"✓"}),(0,n.jsx)("span",{children:"Offline Mode"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center mb-1",children:"⚡"}),(0,n.jsx)("span",{children:"Fast Access"})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,n.jsx)("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center mb-1",children:"\uD83D\uDD14"}),(0,n.jsx)("span",{children:"Notifications"})]})]})})]})})})}},22391:(e,r,t)=>{"use strict";t.d(r,{default:()=>l,u:()=>i});var n=t(10326),a=t(17577),s=t(91064);let o=(0,a.createContext)(void 0);function i(){let e=(0,a.useContext)(o);if(!e)throw Error("usePWA must be used within PWAProvider");return e}function l({children:e}){let[r,t]=(0,a.useState)(!0),[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)("default"),[u,p]=(0,a.useState)(null),m=async()=>u?null!==await (0,s.rR)(u):(console.error("Service worker not registered"),!1),f={isOnline:r,isInstalled:i,notificationPermission:c,serviceWorkerRegistration:u,requestNotifications:async()=>{let e=await (0,s.eV)();return d(e),e},subscribeToPush:m,saveOfflineData:{timeEntry:s.L7,location:s.vL},getPendingData:{timeEntries:s.ji,locations:s.As}};return(0,n.jsxs)(o.Provider,{value:f,children:[e,!r&&(0,n.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-yellow-500 text-white px-4 py-2 text-center text-sm font-medium z-50",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),"You're offline. Changes will sync when you reconnect."]})})]})}},32739:(e,r,t)=>{"use strict";t.d(r,{l:()=>d,z:()=>c});var n=t(10326),a=t(17577);!function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();var s=t(29771),o=t(96842),i=t(44976);let l=(0,a.createContext)(void 0);function c({children:e}){let{user:r}=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),t=(0,i.NL)(),[c,d]=(0,a.useState)(null),[u,p]=(0,a.useState)([]),[m,f]=(0,a.useState)(!1),[h,_]=(0,a.useState)(null),g=!!(r?.partner_id&&r?.managed_tenant_ids?.length),y=c||r?.tenant_id||null;return(0,n.jsx)(l.Provider,{value:{activeTenantId:c,managedTenants:u,loading:m,error:h,setActiveTenant:e=>{d(e),e?((0,o.p)(r?.tenant_id??null,e),s.k.info("Switched to managed tenant",{partnerId:r?.partner_id,activeTenantId:e})):((0,o.p)(r?.tenant_id??null,null),s.k.info("Switched back to partner home tenant",{partnerId:r?.partner_id})),t.invalidateQueries({queryKey:["rbac"]}),t.invalidateQueries({queryKey:["tenant-branding"]}),t.invalidateQueries({queryKey:["tenant-branding",e]}),t.invalidateQueries({queryKey:["rbac","roles"]}),t.invalidateQueries({queryKey:["rbac","my-permissions"]}),t.invalidateQueries({predicate:e=>e.queryKey.includes("tenants")}),t.invalidateQueries({queryKey:["tenant","current"]})},isPartnerUser:g,effectiveTenantId:y},children:e})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("usePartnerTenant must be used within a PartnerTenantProvider");return e}},46502:(e,r,t)=>{"use strict";t.d(r,{rU:()=>N,ss:()=>E});var n,a,s=t(10326),o=t(17577),i=t(94464),l=t(44976),c=t(48324),d=t(17010),u=t(59341),p=t(29771),m=t(50833),f=t(67215);function h(e,r,t=!0){let n=function(e){if(e instanceof m.d7){let r=e.response;return r?{message:r.data?.message||r.data?.detail||e.message,code:r.data?.error||r.data?.code,status:r.status,details:r.data?.details}:{message:e.message||"Network error occurred",code:"NETWORK_ERROR"}}return e instanceof Error?{message:e.message,code:"ERROR"}:{message:String(e)||"An unknown error occurred",code:"UNKNOWN_ERROR"}}(e);return p.k.error(r?`${r}: ${n.message}`:n.message,e,{code:n.code,status:n.status,details:n.details}),t&&f.A.error(n.message,r?`${r} Failed`:"Error"),n}var _=t(48723),g=t(53402);(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(e){e.USERS="users",e.BILLING="billing",e.ANALYTICS="analytics",e.COMMUNICATIONS="communications",e.INFRASTRUCTURE="infrastructure",e.SECRETS="secrets",e.CUSTOMERS="customers",e.SETTINGS="settings",e.SYSTEM="system"}(n||(n={})),function(e){e.CREATE="create",e.READ="read",e.UPDATE="update",e.DELETE="delete",e.EXECUTE="execute",e.MANAGE="manage"}(a||(a={}));let y={user_id:"unknown",roles:[],direct_permissions:[],effective_permissions:[],is_superuser:!1},v={fetchPermissions:async e=>{let r=e?`?category=${e}`:"";try{return(await u.x1.get(`/auth/rbac/permissions${r}`)).data}catch(e){if(i.default.isAxiosError(e)&&e.response?.status===403)return p.k.warn("Permissions list returned 403. Returning empty permissions array."),[];throw e}},fetchRoles:async(e=!0)=>{try{return(await u.x1.get(`/auth/rbac/roles?active_only=${e}`)).data}catch(e){if(i.default.isAxiosError(e)&&e.response?.status===403)return p.k.warn("Roles endpoint returned 403. Returning empty roles array."),[];throw e}},createRole:async e=>(await u.x1.post("/auth/rbac/roles",e)).data,updateRole:async(e,r)=>(await u.x1.patch(`/auth/rbac/roles/${e}`,r)).data,deleteRole:async e=>{await u.x1.delete(`/auth/rbac/roles/${e}`)},fetchMyPermissions:async()=>{try{return(await u.x1.get("/auth/rbac/my-permissions")).data}catch(e){if(i.default.isAxiosError(e)&&e.response?.status===403)return p.k.warn("My permissions endpoint returned 403. Defaulting to safe permissions."),y;throw e}},assignRoleToUser:async e=>{await u.x1.post("/auth/rbac/users/assign-role",e)},revokeRoleFromUser:async e=>{await u.x1.post("/auth/rbac/users/revoke-role",e)},grantPermissionToUser:async e=>{await u.x1.post("/auth/rbac/users/grant-permission",e)}},b=(0,o.createContext)(void 0);function N({children:e}){let{toast:r}=(0,_.useToast)(),{user:t,isLoading:a,isAuthenticated:i}=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),{tenantId:u}=(0,g.S8)(),p=(0,l.NL)(),m=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())()&&!1,f=(0,o.useMemo)(()=>{if(!t?.permissions?.length)return;let e=t.permissions.includes("*")||(t.roles||[]).some(e=>"super_admin"===e);return{user_id:t.id??"unknown",roles:[],direct_permissions:[],effective_permissions:t.permissions.map(e=>{let[r,t]=e.split(".",2);return{name:e,display_name:e,description:void 0,category:Object.values(n).includes(r)?r:"system",resource:void 0,action:t??void 0,is_system:!1}}),is_superuser:e}},[t]),{data:y,isLoading:N,error:E,refetch:C}=(0,c.a)({queryKey:["rbac","my-permissions",u??"none"],queryFn:m?async()=>({user_id:"e2e-test-user",roles:[],direct_permissions:[],effective_permissions:[],is_superuser:!0}):v.fetchMyPermissions,staleTime:3e5,retry:1,enabled:!a&&!!(i||m),initialData:f,initialDataUpdatedAt:()=>f?Date.now():void 0}),{data:O=[]}=(0,c.a)({queryKey:["rbac","roles",u??"none"],queryFn:m?async()=>[]:()=>v.fetchRoles(!0),staleTime:6e5,enabled:!a&&!!(i||m)}),P=(0,o.useMemo)(()=>y?.effective_permissions??[],[y]),U=(0,o.useMemo)(()=>y?.roles??[],[y]),x=y?.is_superuser??!1;y?.user_id;let L=(0,o.useCallback)(e=>{if(!y)return!1;if(x)return!0;let r=e.trim();return P.some(e=>{let t=e.name?.trim();if(!t)return!1;if("*"===t||t===r)return!0;if(t.endsWith(".*")){let e=t.slice(0,-2);return r===e||r.startsWith(`${e}.`)}return!1})},[y,P,x]),T=(0,o.useCallback)(e=>!!y&&(!!x||e.some(e=>L(e))),[y,L,x]),R=(0,o.useCallback)(e=>!!y&&(!!x||e.every(e=>L(e))),[y,L,x]),A=(0,o.useCallback)(e=>!!y&&(!!x||U.some(r=>r.name===e)),[y,U,x]),w=(0,o.useCallback)((e,r)=>{if(!y)return!1;if(x)return!0;let t=r?`${e}.${r}`:`${e}.*`;return P.some(n=>n.name===t||n.name===`${e}.*`||"*"===n.name||String(n.category)===e&&(!r||String(n.action)===r))},[y,x,P]),I=(0,d.D)({mutationFn:v.createRole,onSuccess:()=>{p.invalidateQueries({queryKey:["rbac","roles"]}),r({title:"Success",description:"Role created successfully"})},onError:e=>{h(e,"Failed to create role",!0)}}),j=(0,d.D)({mutationFn:({name:e,data:r})=>v.updateRole(e,r),onSuccess:()=>{p.invalidateQueries({queryKey:["rbac","roles"]}),r({title:"Success",description:"Role updated successfully"})},onError:e=>{h(e,"Failed to update role",!0)}}),D=(0,d.D)({mutationFn:v.deleteRole,onSuccess:()=>{p.invalidateQueries({queryKey:["rbac","roles"]}),r({title:"Success",description:"Role deleted successfully"})},onError:e=>{h(e,"Failed to delete role",!0)}}),S=(0,d.D)({mutationFn:v.assignRoleToUser,onSuccess:(e,t)=>{p.invalidateQueries({queryKey:["rbac","users",t.user_id]}),r({title:"Success",description:"Role assigned successfully"})},onError:e=>{h(e,"Failed to assign role",!0)}}),k=(0,d.D)({mutationFn:v.revokeRoleFromUser,onSuccess:(e,t)=>{p.invalidateQueries({queryKey:["rbac","users",t.user_id]}),r({title:"Success",description:"Role revoked successfully"})},onError:e=>{h(e,"Failed to revoke role",!0)}}),B=(0,d.D)({mutationFn:v.grantPermissionToUser,onSuccess:(e,t)=>{p.invalidateQueries({queryKey:["rbac","users",t.user_id]}),r({title:"Success",description:"Permission granted successfully"})},onError:e=>{h(e,"Failed to grant permission",!0)}});return(0,s.jsx)(b.Provider,{value:{permissions:y||null,loading:N,error:E,hasPermission:L,hasAnyPermission:T,hasAllPermissions:R,hasRole:A,canAccess:w,roles:O,createRole:async e=>{await I.mutateAsync(e)},updateRole:async(e,r)=>{await j.mutateAsync({name:e,data:r})},deleteRole:async e=>{await D.mutateAsync(e)},assignRole:async(e,r)=>{await S.mutateAsync({user_id:e,role_name:r,granted_by:void 0,expires_at:void 0})},revokeRole:async(e,r)=>{await k.mutateAsync({user_id:e,role_name:r,granted_by:void 0,expires_at:void 0})},grantPermission:async(e,r)=>{await B.mutateAsync({user_id:e,permission_name:r,granted_by:void 0,expires_at:void 0})},refreshPermissions:()=>C(),getAllPermissions:()=>v.fetchPermissions()},children:e})}function E(){let e=(0,o.useContext)(b);if(!e)throw Error("useRBAC must be used within RBACProvider");return e}},34736:(e,r,t)=>{"use strict";t.d(r,{h:()=>c,v:()=>d});var n=t(48324),a=t(44976),s=t(17010),o=t(59341),i=t(16704);!function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();let l=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())();function c(e){let{user:r}=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),t=r?.tenant_id||r?.activeOrganization?.id;return(0,n.a)({queryKey:["tenant-branding",t??null],queryFn:async()=>{let e=await o.x1.get("/branding");return(0,i.uN)(e,"Failed to load branding configuration")},enabled:!l&&!!t&&(e?.enabled??!0),staleTime:3e5,...e})}function d(e){let r=(0,a.NL)(),{user:t}=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),n=t?.tenant_id||t?.activeOrganization?.id||null;return(0,s.D)({mutationFn:async e=>{let r=await o.x1.put("/branding",{branding:e});return(0,i.uN)(r,"Failed to update branding configuration")},onSuccess:(...t)=>{r.invalidateQueries({queryKey:["tenant-branding"]}),r.invalidateQueries({queryKey:["tenant-branding",n]}),e?.onSuccess?.(...t)},...e})}},59341:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>l,x1:()=>i});var n=t(94464),a=t(36607);!function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();let s=()=>{let e=a.LM.api.baseUrl,r=a.LM.api.prefix||"/api/isp/v1/admin";return e?`${e}${r}`:r},o=c(s()),i=n.default.create({baseURL:o,timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});i.interceptors.request.use(e=>{let r=c(s());return e.baseURL=r,i.defaults.baseURL=r,e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{if(e.response){let{status:r,data:t}=e.response;e.apiError={status:r,message:t?.message||t?.detail||"An error occurred",code:t?.error||t?.code,details:t?.details}}return Promise.reject(e)}),Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(i,Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}()));let l=i;function c(e){if(!e||/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e))return e;let r=function(){let e=globalThis?.location;if(e)return e?e.origin?e.origin:e.protocol&&e.host?`${e.protocol}//${e.host}`:void 0:void 0}();if(!r)return e;try{return new URL(e,r).toString()}catch{let t=r.replace(/\/+$/,""),n=e.startsWith("/")?e:`/${e}`;return`${t}${n}`}}},16704:(e,r,t)=>{"use strict";function n(e,r){if(e.status>=400)throw Error(r||e.statusText||"Request failed");return e.data}t.d(r,{uN:()=>n}),t(50833)},36607:(e,r,t)=>{"use strict";t.d(r,{LM:()=>d}),function(){var e=Error("Cannot find module '../../../shared/runtime/runtime-config'");throw e.code="MODULE_NOT_FOUND",e}();let n="/api/isp/v1/admin",a=m("http://localhost:8000"),s=f(process.env.NEXT_PUBLIC_API_PREFIX??n),o=(e,r={})=>_(a,s,e,r),i=(e,r={})=>_("",s,e,r),l={graphql_enabled:"enableGraphQL",analytics_enabled:"enableAnalytics",banking_enabled:"enableBanking",payments_enabled:"enablePayments",network_enabled:"enableNetwork",automation_enabled:"enableAutomation",radius_enabled:"enableRadius"},c=function(){let e=process.env.NEXT_PUBLIC_PRIMARY_COLOR||"#0ea5e9",r=process.env.NEXT_PUBLIC_PRIMARY_HOVER_COLOR||p(e,-12),t=process.env.NEXT_PUBLIC_PRIMARY_FOREGROUND_COLOR||"#ffffff",n=process.env.NEXT_PUBLIC_SECONDARY_COLOR||"#8b5cf6",a=process.env.NEXT_PUBLIC_SECONDARY_HOVER_COLOR||p(n,-12),s=process.env.NEXT_PUBLIC_SECONDARY_FOREGROUND_COLOR||"#ffffff",o=process.env.NEXT_PUBLIC_ACCENT_COLOR,i=process.env.NEXT_PUBLIC_BACKGROUND_COLOR,l=process.env.NEXT_PUBLIC_FOREGROUND_COLOR,c=process.env.NEXT_PUBLIC_PRIMARY_COLOR_DARK||e,d=process.env.NEXT_PUBLIC_PRIMARY_HOVER_COLOR_DARK||p(c,8),u=process.env.NEXT_PUBLIC_PRIMARY_FOREGROUND_COLOR_DARK||"#020617",m=process.env.NEXT_PUBLIC_SECONDARY_COLOR_DARK||n,f=process.env.NEXT_PUBLIC_SECONDARY_HOVER_COLOR_DARK||p(m,8),h=process.env.NEXT_PUBLIC_SECONDARY_FOREGROUND_COLOR_DARK||"#020617",_=process.env.NEXT_PUBLIC_ACCENT_COLOR_DARK||o,g=process.env.NEXT_PUBLIC_BACKGROUND_COLOR_DARK||"#0b1220",y=process.env.NEXT_PUBLIC_FOREGROUND_COLOR_DARK||"#e2e8f0",v=process.env.NEXT_PUBLIC_SUPPORT_EMAIL||"support@example.com",b=process.env.NEXT_PUBLIC_SUCCESS_EMAIL||v,N=process.env.NEXT_PUBLIC_PARTNER_SUPPORT_EMAIL||process.env.NEXT_PUBLIC_PARTNER_EMAIL||v,E=process.env.NEXT_PUBLIC_DOCS_URL||"https://docs.example.com",C=process.env.NEXT_PUBLIC_SUPPORT_PORTAL_URL||"/customer-portal/support",O=process.env.NEXT_PUBLIC_STATUS_PAGE_URL||"",P=process.env.NEXT_PUBLIC_TERMS_URL||"/customer-portal/terms",U=process.env.NEXT_PUBLIC_PRIVACY_URL||"/customer-portal/privacy",x=process.env.NEXT_PUBLIC_FAVICON||"/favicon.ico";return{companyName:process.env.NEXT_PUBLIC_COMPANY_NAME||"DotMac",productName:process.env.NEXT_PUBLIC_PRODUCT_NAME||"DotMac Platform",productTagline:process.env.NEXT_PUBLIC_PRODUCT_TAGLINE||"Ready to Deploy",logoUrl:process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg",logo:{light:process.env.NEXT_PUBLIC_LOGO_LIGHT||process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg",dark:process.env.NEXT_PUBLIC_LOGO_DARK||process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg"},supportEmail:v,successEmail:b,partnerSupportEmail:N,docsUrl:E,supportPortalUrl:C,statusPageUrl:O||void 0,termsUrl:P,privacyUrl:U,faviconUrl:x,colors:{primary:e,primaryHover:r,primaryForeground:t,secondary:n,secondaryHover:a,secondaryForeground:s,accent:o,background:i,foreground:l,light:{primary:e,primaryHover:r,primaryForeground:t,secondary:n,secondaryHover:a,secondaryForeground:s,accent:o,background:i,foreground:l},dark:{primary:c,primaryHover:d,primaryForeground:u,secondary:m,secondaryHover:f,secondaryForeground:h,accent:_,background:g,foreground:y}},customCss:{"--brand-primary":e,"--brand-primary-hover":r,"--brand-primary-foreground":t,"--brand-secondary":n,"--brand-secondary-hover":a,"--brand-secondary-foreground":s,"--brand-accent":o||void 0,"--brand-background":i||void 0,"--brand-foreground":l||void 0,"--brand-primary-light":e,"--brand-primary-hover-light":r,"--brand-primary-foreground-light":t,"--brand-secondary-light":n,"--brand-secondary-hover-light":a,"--brand-secondary-foreground-light":s,"--brand-accent-light":o||void 0,"--brand-background-light":i||void 0,"--brand-foreground-light":l||void 0,"--brand-primary-dark":c,"--brand-primary-hover-dark":d,"--brand-primary-foreground-dark":u,"--brand-secondary-dark":m,"--brand-secondary-hover-dark":f,"--brand-secondary-foreground-dark":h,"--brand-accent-dark":_||void 0,"--brand-background-dark":g||void 0,"--brand-foreground-dark":y||void 0}}}(),d={api:{baseUrl:a,prefix:s,timeout:3e4,buildUrl:o,buildPath:i,graphqlEndpoint:o("/graphql")},features:{enableGraphQL:"true"===process.env.NEXT_PUBLIC_ENABLE_GRAPHQL,enableAnalytics:"true"===process.env.NEXT_PUBLIC_ENABLE_ANALYTICS,enableBanking:"true"===process.env.NEXT_PUBLIC_ENABLE_BANKING,enablePayments:"true"===process.env.NEXT_PUBLIC_ENABLE_PAYMENTS,enableRadius:"false"!==process.env.NEXT_PUBLIC_ENABLE_RADIUS,enableNetwork:"false"!==process.env.NEXT_PUBLIC_ENABLE_NETWORK,enableAutomation:"false"!==process.env.NEXT_PUBLIC_ENABLE_AUTOMATION},app:{name:process.env.NEXT_PUBLIC_APP_NAME||"DotMac Platform",version:process.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",environment:"development"},tenant:{id:process.env.NEXT_PUBLIC_TENANT_ID||null,slug:process.env.TENANT_SLUG||null,name:process.env.NEXT_PUBLIC_TENANT_NAME||process.env.NEXT_PUBLIC_PRODUCT_NAME||"DotMac Platform"},banking:{enabled:"true"===process.env.NEXT_PUBLIC_ENABLE_BANKING,providers:(process.env.NEXT_PUBLIC_BANKING_PROVIDERS||"stripe,paypal").split(",")},pagination:{defaultPageSize:20,pageSizeOptions:[10,20,50,100]},formats:{date:"yyyy-MM-dd",dateTime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},branding:c,realtime:{wsUrl:"ws://localhost:8000/ws",sseUrl:process.env.NEXT_PUBLIC_SSE_URL||i("/realtime/events"),alertsChannel:`tenant-${process.env.TENANT_SLUG||"global"}`},deployment:{mode:process.env.DEPLOYMENT_MODE||"multi_tenant",tenantId:process.env.TENANT_ID||null,platformRoutesEnabled:"false"!==process.env.ENABLE_PLATFORM_ROUTES},license:{allowMultiTenant:!0,enforcePlatformAdmin:!0}},u=Object(function(){var e=Error("Cannot find module '../../../shared/runtime/runtime-config'");throw e.code="MODULE_NOT_FOUND",e}())();function p(e,r){if(!e||!e.startsWith("#"))return e;let t=e.slice(1);3===t.length&&(t=t.split("").map(e=>e+e).join(""));let n=parseInt(t,16),a=Math.round(2.55*r);return`#${(16777216+(Math.min(255,Math.max(0,(n>>16)+a))<<16)+(Math.min(255,Math.max(0,(n>>8&255)+a))<<8)+Math.min(255,Math.max(0,(255&n)+a))).toString(16).slice(1)}`}function m(e){if(!e)return"";let r=e.trim();return r?r.replace(/\/+$/,"").replace(/\/api(?:\/v1)?$/i,""):""}function f(e){if(!e)return n;let r=e.trim();return r?(r.startsWith("/")?r:`/${r}`).replace(/\/+$/,""):n}function h(e){return e?e.startsWith("/")?e:`/${e}`:""}function _(e,r,t,n={}){let a;let s=h(t),o=r?h(r).replace(/\/+$/,""):"",i=!n.skipPrefix&&!!o,l=s&&o&&(s===o||s.startsWith(`${o}/`));return(a=s?i&&!l?"/"===s?o||"/":`${o}${s}`:s:i?o:"/",e)?`${e}${a}`:a}u&&function(e){if(e){var r,t,n;(r=e.api)&&("string"==typeof r.baseUrl&&(a=m(r.baseUrl),d.api.baseUrl=a),"string"!=typeof r.restPath||r.restPath.startsWith("/api/platform/")||(s=f(r.restPath)),d.api.prefix=s,d.api.graphqlEndpoint=r.graphqlUrl||o("/graphql")),(t=e.features)&&Object.entries(t).forEach(([e,r])=>{if("boolean"!=typeof r)return;if(e in d.features){d.features[e]=r;return}let t=l[e];t&&t in d.features&&(d.features[t]=r)}),(n=e.branding)&&Object.assign(d.branding,{companyName:n.companyName??d.branding.companyName,productName:n.productName??d.branding.productName,productTagline:n.productTagline??d.branding.productTagline,supportEmail:n.supportEmail??d.branding.supportEmail,successEmail:n.successEmail??d.branding.successEmail,partnerSupportEmail:n.partnerSupportEmail??d.branding.partnerSupportEmail}),e.app?.name&&(d.app.name=e.app.name),e.app?.environment&&(d.app.environment=e.app.environment),e.tenant&&(d.tenant.id=e.tenant.id??d.tenant.id,d.tenant.slug=e.tenant.slug??d.tenant.slug,d.tenant.name=e.tenant.name??d.tenant.name),e.realtime&&(d.realtime.wsUrl=e.realtime.wsUrl||d.realtime.wsUrl,d.realtime.sseUrl=e.realtime.sseUrl||d.realtime.sseUrl,d.realtime.alertsChannel=e.realtime.alertsChannel||d.realtime.alertsChannel),e.deployment&&(d.deployment.mode=e.deployment.mode||d.deployment.mode,d.deployment.tenantId=e.deployment.tenantId??d.deployment.tenantId,d.deployment.platformRoutesEnabled=e.deployment.platformRoutesEnabled??d.deployment.platformRoutesEnabled),e.license&&(d.license.allowMultiTenant=e.license.allowMultiTenant??d.license.allowMultiTenant,d.license.enforcePlatformAdmin=e.license.enforcePlatformAdmin??d.license.enforcePlatformAdmin)}}(u)},53402:(e,r,t)=>{"use strict";t.d(r,{S8:()=>p,zX:()=>u});var n=t(10326),a=t(17577),s=t(59341);!function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();var o=t(96842),i=t(44976),l=t(32739),c=t(48723);let d=(0,a.createContext)(void 0);function u({children:e,initialTenant:r=null}){let[t,u]=(0,a.useState)(r),[p,m]=(0,a.useState)([]),[f,h]=(0,a.useState)(!1),[_,g]=(0,a.useState)(null),{user:y,isLoading:v}=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())();(0,i.NL)();let{activeTenantId:b}=(0,l.l)(),{toast:N}=(0,c.useToast)(),E=!!(b||y?.tenant_id||y?.activeOrganization?.id),C=async()=>{if(!E){u(null),m([]),g(null),h(!1),(0,o.p)(null,null);return}h(!0),g(null);try{if(r){u(r),(0,o.p)(r.id,b??null);return}let e=await s.x1.get("/tenants/current");u(e.data),(0,o.p)(e.data.id,b??null)}catch(e){g(e instanceof Error?e:Error("Unknown error")),u(null)}finally{h(!1)}},O={tenant:t,currentTenant:t,tenantId:t?.id||null,hasTenantContext:E,loading:f,isLoading:f,error:_,availableTenants:p,setTenant:u,refreshTenant:C};return(0,n.jsx)(d.Provider,{value:O,children:e})}function p(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useTenant must be used within a TenantProvider");return e}},46465:(e,r,t)=>{"use strict";t.d(r,{e:()=>y});var n=t(10326),a=t(17577),s=t(99592),o=t(93158),i=t(50126),l=t(94179),c=t(97277),d=t(58325),u=t(39790),p=t(51627),m=t(29771);let f=Symbol.for("dotmac.apolloCache.diffPatched"),h=i.h;if(!h[f]){h[f]=!0;let e=i.h.prototype.diff;i.h.prototype.diff=function(r){if(r&&Object.prototype.hasOwnProperty.call(r,"canonizeResults")){let{canonizeResults:t,...n}=r;return e.call(this,n)}return e.call(this,r)}}let _=(0,u.v)((e,{headers:r})=>({headers:{...r}})),g=e=>(0,p.q)(({graphQLErrors:r,networkError:t,operation:n})=>{r&&r.forEach(({message:r,locations:t,path:a,extensions:s})=>{if(m.k.error("GraphQL Error",{message:r,locations:t,path:a,code:s?.code,operation:n.operationName}),s?.code==="UNAUTHENTICATED"){m.k.warn("Authentication required for GraphQL query - redirecting to login");let r=e();r?.clearStore().catch(e=>m.k.error("Failed to clear Apollo cache on auth error",e))}}),t&&(m.k.error("GraphQL Network Error",{message:t.message,operation:n.operationName}),"statusCode"in t&&401===t.statusCode&&m.k.warn("Unauthorized network error - session may have expired"))});function y({children:e}){let{api:r}=(0,o.M)(),t=(0,a.useMemo)(()=>(function(e){let r=new i.h({typePolicies:{Subscriber:{keyFields:["id"],fields:{sessions:{keyArgs:["filters","status"],merge:(e=[],r,{args:t})=>t?.offset!==0&&e.length?[...e,...r]:r}}},Session:{keyFields:["radacctid"]},Query:{fields:{subscribers:{keyArgs:["filters","status","search"],merge(e,r,{args:t,variables:n}){let a=t?.offset??n?.offset??0,s=t?.limit??n?.limit;if(!e||0===a||!s)return r;if(r?.subscribers&&e?.subscribers&&Array.isArray(r.subscribers)&&Array.isArray(e.subscribers)){let t=e.subscribers.length;return Math.abs(a-t)>s?(m.k.warn("Pagination offset mismatch, resetting cache",{expected:a,actual:t,offset:a,limit:s}),r):{...r,subscribers:[...e.subscribers,...r.subscribers]}}return r}},sessions:{keyArgs:["filters","status","subscriber"],merge(e,r,{args:t,variables:n}){let a=t?.offset??n?.offset??0,s=t?.limit??n?.limit;if(!e||0===a||!s)return r;if(r?.sessions&&e?.sessions&&Array.isArray(r.sessions)&&Array.isArray(e.sessions)){let t=e.sessions.length;return Math.abs(a-t)>s?(m.k.warn("Pagination offset mismatch, resetting cache",{expected:a,actual:t,offset:a,limit:s}),r):{...r,sessions:[...e.sessions,...r.sessions]}}return r}}}}}}),t=null,n=g(()=>t),a=(0,l.L)({uri:e||(process.env.NEXT_PUBLIC_API_URL?`${process.env.NEXT_PUBLIC_API_URL}/api/isp/v1/admin/graphql`:"/api/isp/v1/admin/graphql"),credentials:"include"}),s=(0,c.D)([n,_.concat(a)]);return t=new d.f({link:s,cache:r,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network",errorPolicy:"all"},query:{fetchPolicy:"cache-first",errorPolicy:"all"},mutate:{errorPolicy:"all"}},devtools:{enabled:!1}})})(r.graphqlEndpoint),[r.graphqlEndpoint]);return(0,n.jsx)(s.e,{client:t,children:e})}},29771:(e,r,t)=>{"use strict";t.d(r,{k:()=>a});class n{constructor(){this.isDevelopment=!1}sanitizeContext(e){if(!e)return{};let r={...e},t=["password","token","secret","apiKey","apikey","cookie","cookies","authorization","auth","accessToken","refreshToken","sessionId","sessionid"];return Object.keys(r).forEach(e=>{t.some(r=>e.toLowerCase().includes(r))&&(r[e]="[REDACTED]")}),r}log(e,r,t){let n=this.sanitizeContext(t),a={level:e,message:r,timestamp:new Date().toISOString(),context:n};if(this.isDevelopment)console["error"===e||"warn"===e?e:"log"](`[${e.toUpperCase()}]`,r,n||"");else try{console.log(JSON.stringify(a))}catch(e){console.log(JSON.stringify({...a,context:"[Circular Reference]"}))}}debug(e,r){this.isDevelopment&&this.log("debug",e,r)}info(e,r){this.log("info",e,r)}warn(e,r){this.log("warn",e,r)}error(e,r,t){let n={...t,error:r instanceof Error?{message:r.message,stack:r.stack,name:r.name}:r};this.log("error",e,n)}}let a=new n},91064:(e,r,t)=>{"use strict";async function n(){return null}async function a(){return"Notification"in window?"granted"===Notification.permission?"granted":"denied"!==Notification.permission?await Notification.requestPermission():Notification.permission:"denied"}async function s(e){try{let r=await a();if("granted"!==r)return null;let t=process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY||"";if(!t)return console.error("VAPID public key not configured"),null;let n=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){let r="=".repeat((4-e.length%4)%4),t=(e+r).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length);for(let e=0;e<n.length;++e)a[e]=n.charCodeAt(e);return a}(t)});return await fetch("/api/isp/v1/admin/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),n}catch(e){return console.error("Failed to subscribe to push notifications:",e),null}}async function o(e){let r=(await d()).transaction("pending-time-entries","readwrite").objectStore("pending-time-entries");if(await r.add({data:e,timestamp:new Date().toISOString()}),"serviceWorker"in navigator&&"sync"in ServiceWorkerRegistration.prototype){let e=await navigator.serviceWorker.ready;await e.sync.register("sync-time-entries")}}async function i(e){let r=(await d()).transaction("pending-locations","readwrite").objectStore("pending-locations");if(await r.add({data:e}),"serviceWorker"in navigator&&"sync"in ServiceWorkerRegistration.prototype){let e=await navigator.serviceWorker.ready;await e.sync.register("sync-location")}}async function l(){let e=(await d()).transaction("pending-time-entries","readonly").objectStore("pending-time-entries");return await e.getAll()}async function c(){let e=(await d()).transaction("pending-locations","readonly").objectStore("pending-locations");return await e.getAll()}function d(){return new Promise((e,r)=>{let t=indexedDB.open("dotmac-offline",1);t.onerror=()=>r(t.error),t.onsuccess=()=>e(t.result),t.onupgradeneeded=e=>{let r=e.target.result;r.objectStoreNames.contains("pending-time-entries")||r.createObjectStore("pending-time-entries",{keyPath:"id",autoIncrement:!0}),r.objectStoreNames.contains("pending-locations")||r.createObjectStore("pending-locations",{keyPath:"id",autoIncrement:!0})}})}function u(){return"undefined"!=typeof navigator&&navigator.onLine}t.d(r,{$J:()=>n,As:()=>c,Gg:()=>u,Kp:()=>h,L7:()=>o,eV:()=>a,ji:()=>l,rR:()=>s,ud:()=>m,vL:()=>i,vR:()=>f});let p=null;async function m(){if(!p)return!1;await p.prompt();let{outcome:e}=await p.userChoice;return p=null,"accepted"===e}function f(){return null!==p}async function h(e,r){if(!("serviceWorker"in navigator)||!("periodicSync"in ServiceWorkerRegistration.prototype))return!1;try{let t=await navigator.serviceWorker.ready,n=await navigator.permissions.query({name:"periodic-background-sync"});if("granted"===n.state)return await t.periodicSync.register(e,{minInterval:r}),!0;return!1}catch(e){return console.error("Failed to register periodic sync:",e),!1}}},67215:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});class n{subscribe(e){return this.listeners.push(e),e(this.alerts),()=>{this.listeners=this.listeners.filter(r=>r!==e)}}emit(){this.listeners.forEach(e=>e(this.alerts))}dismissAlert(e){this.alerts=this.alerts.filter(r=>r.id!==e),this.emit()}async refresh(){this.emit()}getAlertsBySeverity(e){return this.alerts.filter(r=>r.severity===e)}getAlertsByCategory(e){return this.alerts.filter(r=>r.category===e)}getAlertStats(){return{total:this.alerts.length,critical:this.alerts.filter(e=>"critical"===e.severity).length,warning:this.alerts.filter(e=>"warning"===e.severity).length,info:this.alerts.filter(e=>"info"===e.severity).length,byCategory:{security:this.alerts.filter(e=>"security"===e.category).length,billing:this.alerts.filter(e=>"billing"===e.category).length,performance:this.alerts.filter(e=>"performance"===e.category).length,system:this.alerts.filter(e=>"system"===e.category).length,compliance:this.alerts.filter(e=>"compliance"===e.category).length}}}success(e,r,t=5e3){let n={id:`alert-${++this.alertCounter}`,severity:"success",category:"system",title:r||"Success",message:e,duration:t,dismissible:!0,timestamp:new Date};return this.alerts.push(n),this.emit(),n.id}error(e,r,t=0){let n={id:`alert-${++this.alertCounter}`,severity:"critical",category:"system",title:r||"Error",message:e,duration:t,dismissible:!0,timestamp:new Date};return this.alerts.push(n),this.emit(),n.id}warning(e,r,t=7e3){let n={id:`alert-${++this.alertCounter}`,severity:"warning",category:"system",title:r||"Warning",message:e,duration:t,dismissible:!0,timestamp:new Date};return this.alerts.push(n),this.emit(),n.id}info(e,r,t=5e3){let n={id:`alert-${++this.alertCounter}`,severity:"info",category:"system",title:r||"Info",message:e,duration:t,dismissible:!0,timestamp:new Date};return this.alerts.push(n),this.emit(),n.id}show(e){let r={...e,id:`alert-${++this.alertCounter}`,timestamp:e.timestamp||new Date};return this.alerts.push(r),this.emit(),r.id}constructor(){this.listeners=[],this.alertCounter=0,this.alerts=[]}}let a=new n},96842:(e,r,t)=>{"use strict";function n(e,r){}t.d(r,{p:()=>n})},93158:(e,r,t)=>{"use strict";t.d(r,{$:()=>o,M:()=>i});var n=t(17577),a=t(36607);let s=(0,n.createContext)(a.LM),o=s.Provider;function i(){return(0,n.useContext)(s)}},67785:(e,r,t)=>{"use strict";t.d(r,{l:()=>p,G:()=>m});var n=t(10326),a=t(17577),s=t(14831),o=t(93158),i=t(34736),l=t(53402),c=t(48723);!function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}();let d=Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}())(),u=(0,a.createContext)(null);function p({children:e}){let{branding:r}=(0,o.M)(),t=(0,i.h)({enabled:!d}),{resolvedTheme:p}=(0,s.F)(),{tenant:m}=(0,l.S8)(),{toast:f}=(0,c.useToast)(),h=(0,a.useMemo)(()=>(function(e,r){if(!r)return e;let t=e.colors||{},n={...t.light||{},primary:r.primary_color??t.light?.primary??t.primary,primaryHover:r.primary_hover_color??t.light?.primaryHover??t.primaryHover??r.primary_color,primaryForeground:r.primary_foreground_color??t.light?.primaryForeground??t.primaryForeground,secondary:r.secondary_color??t.light?.secondary??t.secondary,secondaryHover:r.secondary_hover_color??t.light?.secondaryHover??t.secondaryHover??r.secondary_color,secondaryForeground:r.secondary_foreground_color??t.light?.secondaryForeground??t.secondaryForeground,accent:r.accent_color??t.light?.accent??t.accent,background:r.background_color??t.light?.background??t.background,foreground:r.foreground_color??t.light?.foreground??t.foreground},a={...t.dark||{},primary:r.primary_color_dark??t.dark?.primary??n.primary,primaryHover:r.primary_hover_color_dark??t.dark?.primaryHover??t.primaryHover??n.primaryHover,primaryForeground:r.primary_foreground_color_dark??t.dark?.primaryForeground??t.primaryForeground,secondary:r.secondary_color_dark??t.dark?.secondary??n.secondary,secondaryHover:r.secondary_hover_color_dark??t.dark?.secondaryHover??t.secondaryHover??n.secondaryHover,secondaryForeground:r.secondary_foreground_color_dark??t.dark?.secondaryForeground??t.secondaryForeground,accent:r.accent_color_dark??t.dark?.accent??n.accent,background:r.background_color_dark??t.dark?.background??t.background??"#0b1220",foreground:r.foreground_color_dark??t.dark?.foreground??t.foreground??"#e2e8f0"},s={...e.logo,light:r.logo_light_url??e.logo?.light,dark:r.logo_dark_url??e.logo?.dark};return{...e,productName:r.product_name??e.productName,productTagline:r.product_tagline??e.productTagline,companyName:r.company_name??e.companyName,supportEmail:r.support_email??e.supportEmail,successEmail:r.success_email??e.successEmail,partnerSupportEmail:r.partner_support_email??e.partnerSupportEmail,colors:{...t,...n,light:n,dark:a},logo:s,faviconUrl:r.favicon_url??e.faviconUrl??"/favicon.ico",docsUrl:r.docs_url??e.docsUrl,supportPortalUrl:r.support_portal_url??e.supportPortalUrl,statusPageUrl:r.status_page_url??e.statusPageUrl,termsUrl:r.terms_url??e.termsUrl,privacyUrl:r.privacy_url??e.privacyUrl}})(r,t.data?.branding),[r,t.data?.branding]);return(0,n.jsx)(u.Provider,{value:{branding:h,isLoading:t.isLoading},children:e})}function m(){let e=(0,a.useContext)(u);if(!e)throw Error("useBrandingContext must be used within BrandingProvider");return e}},97398:(e,r,t)=>{"use strict";t.d(r,{ClientProviders:()=>O});var n=t(10326),a=t(17577),s=t(14831),o=t(23418),i=t(44976),l=t(35047),c=t(93158);function d({children:e}){return(0,n.jsx)(n.Fragment,{children:e})}var u=t(36607),p=t(53402),m=t(46502),f=t(32739),h=t(48723),_=t(67785),g=t(46465);let y={reducedMotion:!1,highContrast:!1,fontSizeMultiplier:1,keyboardNavigation:!0,announcements:!0,enhancedFocus:!1},v=(0,a.createContext)(null);function b({children:e}){let{theme:r}=(0,h.usePortalTheme)(),[t,s]=(0,a.useState)(()=>y);return(0,n.jsx)(v.Provider,{value:{preferences:t,updatePreferences:e=>{s(r=>({...r,...e}))},resetPreferences:()=>{s(y)}},children:e})}function N(){let{preferences:e}=function(){let e=(0,a.useContext)(v);if(!e)throw Error("useAccessibility must be used within AccessibilityProvider");return e}(),[r,t]=(0,a.useState)("");return e.announcements?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",children:r}),(0,n.jsx)("div",{role:"alert","aria-live":"assertive","aria-atomic":"true",className:"sr-only"})]}):null}function E(){return(0,n.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-portal-primary focus:text-white focus:px-4 focus:py-2 focus:rounded-md focus:shadow-lg",children:"Skip to main content"})}function C(){let[e,r]=(0,a.useState)(!1);return e?(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>r(!1),children:(0,n.jsxs)("div",{className:"bg-background rounded-lg shadow-xl max-w-2xl w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Keyboard Shortcuts"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Navigation"}),(0,n.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"Tab"})," - Next element"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"Shift+Tab"})," - Previous element"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"Enter"})," - Activate"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"Esc"})," - Close dialog"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Global"}),(0,n.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"?"})," - Show shortcuts"]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("kbd",{className:"px-2 py-1 bg-muted rounded",children:"/"})," - Focus search"]})]})]})]}),(0,n.jsx)("button",{onClick:()=>r(!1),className:"mt-6 w-full px-4 py-2 bg-portal-primary text-white rounded-md hover:opacity-90",children:"Close"})]})}):null}function O({children:e}){let r=(0,l.usePathname)(),[t]=(0,a.useState)(()=>new o.S),{runtimeConfig:y,error:v,loading:O}=Object(function(){var e=Error("Cannot find module '@shared/runtime/RuntimeConfigContext'");throw e.code="MODULE_NOT_FOUND",e}())(),{toast:P}=(0,h.useToast)();(0,a.useRef)(null);let U=(0,a.useMemo)(()=>(function e(r){return Object.values(r).forEach(r=>{r&&"object"==typeof r&&e(r)}),Object.freeze(r)})({...u.LM,api:{...u.LM.api},features:{...u.LM.features},branding:{...u.LM.branding},tenant:{...u.LM.tenant},realtime:{...u.LM.realtime},deployment:{...u.LM.deployment},license:{...u.LM.license}}),[y?.generatedAt]),x=r?.startsWith("/dashboard")||r?.startsWith("/customer-portal")||r?.startsWith("/partner"),L=(0,n.jsx)(c.$,{value:U,children:(0,n.jsxs)(h.ConfirmDialogProvider,{children:[(0,n.jsxs)(_.l,{children:[(0,n.jsx)(E,{}),e,(0,n.jsx)(N,{}),(0,n.jsx)(C,{})]}),(0,n.jsx)(h.ToastContainer,{})]})});return(0,n.jsx)(d,{children:(0,n.jsx)(s.f,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:(0,n.jsx)(h.PortalThemeProvider,{children:(0,n.jsx)(b,{children:(0,n.jsx)(i.aH,{client:t,children:(0,n.jsx)(g.e,{children:(0,n.jsx)(Object(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e}()),{children:(0,n.jsx)(f.z,{children:(0,n.jsx)(p.zX,{children:x?(0,n.jsx)(m.rU,{children:L}):L})})})})})})})})})}(function(){var e=Error("Cannot find module '@shared/lib/auth'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@shared/runtime/RuntimeConfigContext'");throw e.code="MODULE_NOT_FOUND",e}()},46366:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>R,dynamic:()=>L,dynamicParams:()=>T,metadata:()=>U,viewport:()=>x});var n=t(19510);t(67272);var a=t(68570);let s=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/providers/ClientProviders.tsx#ClientProviders`),o=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/ErrorBoundary.tsx#ErrorBoundary`);(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/ErrorBoundary.tsx#useAsyncError`),(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/ErrorBoundary.tsx#withErrorBoundary`),function(){var e=Error("Cannot find module '../../../shared/runtime/runtime-config'");throw e.code="MODULE_NOT_FOUND",e}();let i="/api/isp/v1/admin",l=g("http://localhost:8000"),c=y(process.env.NEXT_PUBLIC_API_PREFIX??i),d=(e,r={})=>b(l,c,e,r),u=(e,r={})=>b("",c,e,r),p={graphql_enabled:"enableGraphQL",analytics_enabled:"enableAnalytics",banking_enabled:"enableBanking",payments_enabled:"enablePayments",network_enabled:"enableNetwork",automation_enabled:"enableAutomation",radius_enabled:"enableRadius"},m=function(){let e=process.env.NEXT_PUBLIC_PRIMARY_COLOR||"#0ea5e9",r=process.env.NEXT_PUBLIC_PRIMARY_HOVER_COLOR||_(e,-12),t=process.env.NEXT_PUBLIC_PRIMARY_FOREGROUND_COLOR||"#ffffff",n=process.env.NEXT_PUBLIC_SECONDARY_COLOR||"#8b5cf6",a=process.env.NEXT_PUBLIC_SECONDARY_HOVER_COLOR||_(n,-12),s=process.env.NEXT_PUBLIC_SECONDARY_FOREGROUND_COLOR||"#ffffff",o=process.env.NEXT_PUBLIC_ACCENT_COLOR,i=process.env.NEXT_PUBLIC_BACKGROUND_COLOR,l=process.env.NEXT_PUBLIC_FOREGROUND_COLOR,c=process.env.NEXT_PUBLIC_PRIMARY_COLOR_DARK||e,d=process.env.NEXT_PUBLIC_PRIMARY_HOVER_COLOR_DARK||_(c,8),u=process.env.NEXT_PUBLIC_PRIMARY_FOREGROUND_COLOR_DARK||"#020617",p=process.env.NEXT_PUBLIC_SECONDARY_COLOR_DARK||n,m=process.env.NEXT_PUBLIC_SECONDARY_HOVER_COLOR_DARK||_(p,8),f=process.env.NEXT_PUBLIC_SECONDARY_FOREGROUND_COLOR_DARK||"#020617",h=process.env.NEXT_PUBLIC_ACCENT_COLOR_DARK||o,g=process.env.NEXT_PUBLIC_BACKGROUND_COLOR_DARK||"#0b1220",y=process.env.NEXT_PUBLIC_FOREGROUND_COLOR_DARK||"#e2e8f0",v=process.env.NEXT_PUBLIC_SUPPORT_EMAIL||"support@example.com",b=process.env.NEXT_PUBLIC_SUCCESS_EMAIL||v,N=process.env.NEXT_PUBLIC_PARTNER_SUPPORT_EMAIL||process.env.NEXT_PUBLIC_PARTNER_EMAIL||v,E=process.env.NEXT_PUBLIC_DOCS_URL||"https://docs.example.com",C=process.env.NEXT_PUBLIC_SUPPORT_PORTAL_URL||"/customer-portal/support",O=process.env.NEXT_PUBLIC_STATUS_PAGE_URL||"",P=process.env.NEXT_PUBLIC_TERMS_URL||"/customer-portal/terms",U=process.env.NEXT_PUBLIC_PRIVACY_URL||"/customer-portal/privacy",x=process.env.NEXT_PUBLIC_FAVICON||"/favicon.ico";return{companyName:process.env.NEXT_PUBLIC_COMPANY_NAME||"DotMac",productName:process.env.NEXT_PUBLIC_PRODUCT_NAME||"DotMac Platform",productTagline:process.env.NEXT_PUBLIC_PRODUCT_TAGLINE||"Ready to Deploy",logoUrl:process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg",logo:{light:process.env.NEXT_PUBLIC_LOGO_LIGHT||process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg",dark:process.env.NEXT_PUBLIC_LOGO_DARK||process.env.NEXT_PUBLIC_LOGO_URL||"/logo.svg"},supportEmail:v,successEmail:b,partnerSupportEmail:N,docsUrl:E,supportPortalUrl:C,statusPageUrl:O||void 0,termsUrl:P,privacyUrl:U,faviconUrl:x,colors:{primary:e,primaryHover:r,primaryForeground:t,secondary:n,secondaryHover:a,secondaryForeground:s,accent:o,background:i,foreground:l,light:{primary:e,primaryHover:r,primaryForeground:t,secondary:n,secondaryHover:a,secondaryForeground:s,accent:o,background:i,foreground:l},dark:{primary:c,primaryHover:d,primaryForeground:u,secondary:p,secondaryHover:m,secondaryForeground:f,accent:h,background:g,foreground:y}},customCss:{"--brand-primary":e,"--brand-primary-hover":r,"--brand-primary-foreground":t,"--brand-secondary":n,"--brand-secondary-hover":a,"--brand-secondary-foreground":s,"--brand-accent":o||void 0,"--brand-background":i||void 0,"--brand-foreground":l||void 0,"--brand-primary-light":e,"--brand-primary-hover-light":r,"--brand-primary-foreground-light":t,"--brand-secondary-light":n,"--brand-secondary-hover-light":a,"--brand-secondary-foreground-light":s,"--brand-accent-light":o||void 0,"--brand-background-light":i||void 0,"--brand-foreground-light":l||void 0,"--brand-primary-dark":c,"--brand-primary-hover-dark":d,"--brand-primary-foreground-dark":u,"--brand-secondary-dark":p,"--brand-secondary-hover-dark":m,"--brand-secondary-foreground-dark":f,"--brand-accent-dark":h||void 0,"--brand-background-dark":g||void 0,"--brand-foreground-dark":y||void 0}}}(),f={api:{baseUrl:l,prefix:c,timeout:3e4,buildUrl:d,buildPath:u,graphqlEndpoint:d("/graphql")},features:{enableGraphQL:"true"===process.env.NEXT_PUBLIC_ENABLE_GRAPHQL,enableAnalytics:"true"===process.env.NEXT_PUBLIC_ENABLE_ANALYTICS,enableBanking:"true"===process.env.NEXT_PUBLIC_ENABLE_BANKING,enablePayments:"true"===process.env.NEXT_PUBLIC_ENABLE_PAYMENTS,enableRadius:"false"!==process.env.NEXT_PUBLIC_ENABLE_RADIUS,enableNetwork:"false"!==process.env.NEXT_PUBLIC_ENABLE_NETWORK,enableAutomation:"false"!==process.env.NEXT_PUBLIC_ENABLE_AUTOMATION},app:{name:process.env.NEXT_PUBLIC_APP_NAME||"DotMac Platform",version:process.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",environment:"development"},tenant:{id:process.env.NEXT_PUBLIC_TENANT_ID||null,slug:process.env.TENANT_SLUG||null,name:process.env.NEXT_PUBLIC_TENANT_NAME||process.env.NEXT_PUBLIC_PRODUCT_NAME||"DotMac Platform"},banking:{enabled:"true"===process.env.NEXT_PUBLIC_ENABLE_BANKING,providers:(process.env.NEXT_PUBLIC_BANKING_PROVIDERS||"stripe,paypal").split(",")},pagination:{defaultPageSize:20,pageSizeOptions:[10,20,50,100]},formats:{date:"yyyy-MM-dd",dateTime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},branding:m,realtime:{wsUrl:"ws://localhost:8000/ws",sseUrl:process.env.NEXT_PUBLIC_SSE_URL||u("/realtime/events"),alertsChannel:`tenant-${process.env.TENANT_SLUG||"global"}`},deployment:{mode:process.env.DEPLOYMENT_MODE||"multi_tenant",tenantId:process.env.TENANT_ID||null,platformRoutesEnabled:"false"!==process.env.ENABLE_PLATFORM_ROUTES},license:{allowMultiTenant:!0,enforcePlatformAdmin:!0}},h=Object(function(){var e=Error("Cannot find module '../../../shared/runtime/runtime-config'");throw e.code="MODULE_NOT_FOUND",e}())();function _(e,r){if(!e||!e.startsWith("#"))return e;let t=e.slice(1);3===t.length&&(t=t.split("").map(e=>e+e).join(""));let n=parseInt(t,16),a=Math.round(2.55*r);return`#${(16777216+(Math.min(255,Math.max(0,(n>>16)+a))<<16)+(Math.min(255,Math.max(0,(n>>8&255)+a))<<8)+Math.min(255,Math.max(0,(255&n)+a))).toString(16).slice(1)}`}function g(e){if(!e)return"";let r=e.trim();return r?r.replace(/\/+$/,"").replace(/\/api(?:\/v1)?$/i,""):""}function y(e){if(!e)return i;let r=e.trim();return r?(r.startsWith("/")?r:`/${r}`).replace(/\/+$/,""):i}function v(e){return e?e.startsWith("/")?e:`/${e}`:""}function b(e,r,t,n={}){let a;let s=v(t),o=r?v(r).replace(/\/+$/,""):"",i=!n.skipPrefix&&!!o,l=s&&o&&(s===o||s.startsWith(`${o}/`));return(a=s?i&&!l?"/"===s?o||"/":`${o}${s}`:s:i?o:"/",e)?`${e}${a}`:a}h&&function(e){if(e){var r,t,n;(r=e.api)&&("string"==typeof r.baseUrl&&(l=g(r.baseUrl),f.api.baseUrl=l),"string"!=typeof r.restPath||r.restPath.startsWith("/api/platform/")||(c=y(r.restPath)),f.api.prefix=c,f.api.graphqlEndpoint=r.graphqlUrl||d("/graphql")),(t=e.features)&&Object.entries(t).forEach(([e,r])=>{if("boolean"!=typeof r)return;if(e in f.features){f.features[e]=r;return}let t=p[e];t&&t in f.features&&(f.features[t]=r)}),(n=e.branding)&&Object.assign(f.branding,{companyName:n.companyName??f.branding.companyName,productName:n.productName??f.branding.productName,productTagline:n.productTagline??f.branding.productTagline,supportEmail:n.supportEmail??f.branding.supportEmail,successEmail:n.successEmail??f.branding.successEmail,partnerSupportEmail:n.partnerSupportEmail??f.branding.partnerSupportEmail}),e.app?.name&&(f.app.name=e.app.name),e.app?.environment&&(f.app.environment=e.app.environment),e.tenant&&(f.tenant.id=e.tenant.id??f.tenant.id,f.tenant.slug=e.tenant.slug??f.tenant.slug,f.tenant.name=e.tenant.name??f.tenant.name),e.realtime&&(f.realtime.wsUrl=e.realtime.wsUrl||f.realtime.wsUrl,f.realtime.sseUrl=e.realtime.sseUrl||f.realtime.sseUrl,f.realtime.alertsChannel=e.realtime.alertsChannel||f.realtime.alertsChannel),e.deployment&&(f.deployment.mode=e.deployment.mode||f.deployment.mode,f.deployment.tenantId=e.deployment.tenantId??f.deployment.tenantId,f.deployment.platformRoutesEnabled=e.deployment.platformRoutesEnabled??f.deployment.platformRoutesEnabled),e.license&&(f.license.allowMultiTenant=e.license.allowMultiTenant??f.license.allowMultiTenant,f.license.enforcePlatformAdmin=e.license.enforcePlatformAdmin??f.license.enforcePlatformAdmin)}}(h),(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/pwa/PWAProvider.tsx#usePWA`);let N=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/pwa/PWAProvider.tsx#default`),E=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/pwa/InstallPrompt.tsx#default`),C=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/components/RuntimeConfigBoundary.tsx#RuntimeConfigBoundary`);!function(){var e=Error("Cannot find module '@shared/mocks/ClientMSWProvider'");throw e.code="MODULE_NOT_FOUND",e}();let O="DotMac Platform",P=process.env.NEXT_PUBLIC_FAVICON??"/favicon.ico",U={title:O,description:"Reusable SaaS backend and APIs to launch faster.",icons:[{rel:"icon",url:P}],manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:O}},x={themeColor:"#3b82f6",width:"device-width",initialScale:1,maximumScale:5,userScalable:!0},L="force-dynamic",T=!0;function R({children:e}){let r=f.branding,t=r.productName||O;r.productTagline;let a=r.faviconUrl||P;return(0,n.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,n.jsx)("meta",{name:"theme-color",content:"#3b82f6"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"default"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-title",content:t}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/assets/icon-192x192.png"}),(0,n.jsx)("link",{rel:"icon",href:a})]}),(0,n.jsx)("body",{suppressHydrationWarning:!0,children:(0,n.jsx)(C,{children:(0,n.jsx)(o,{children:(0,n.jsxs)(N,{children:[(0,n.jsx)(Object(function(){var e=Error("Cannot find module '@shared/mocks/ClientMSWProvider'");throw e.code="MODULE_NOT_FOUND",e}()),{}),(0,n.jsxs)(s,{children:[e,(0,n.jsx)(E,{})]})]})})})})]})}},96560:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx#default`)},67272:()=>{}};