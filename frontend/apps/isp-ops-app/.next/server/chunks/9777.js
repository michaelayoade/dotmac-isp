"use strict";exports.id=9777,exports.ids=[9777],exports.modules={29777:(e,t,a)=>{a.d(t,{Z:()=>i});var r=a(10326),n=a(17577),l=a(78855);function i({partner:e,onClose:t}){let a=(0,l.y5)(),i=(0,l.Lw)(),[s,o]=(0,n.useState)({company_name:"",primary_email:"",tier:"bronze",commission_model:"revenue_share",legal_name:void 0,website:void 0,billing_email:void 0,phone:void 0,default_commission_rate:void 0,address_line1:void 0,city:void 0,state_province:void 0,country:void 0}),d=async r=>{r.preventDefault();try{e?await i.mutateAsync({partnerId:e.id,data:{company_name:s.company_name||void 0,tier:s.tier,default_commission_rate:s.default_commission_rate,billing_email:s.billing_email,phone:s.phone}}):await a.mutateAsync(s),t()}catch(e){console.error("Failed to save partner:",e),alert("Failed to save partner")}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:e?"Edit Partner":"Create New Partner"})}),(0,r.jsxs)("form",{onSubmit:d,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{className:"block text-sm text-slate-400 mb-2",children:["Company Name ",(0,r.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,r.jsx)("input",{type:"text",required:!0,value:s.company_name,onChange:e=>o({...s,company_name:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"Acme Inc."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Legal Name"}),(0,r.jsx)("input",{type:"text",value:s.legal_name||"",onChange:e=>o({...s,legal_name:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Website"}),(0,r.jsx)("input",{type:"url",value:s.website||"",onChange:e=>o({...s,website:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"https://example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm text-slate-400 mb-2",children:["Primary Email ",(0,r.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,r.jsx)("input",{type:"email",required:!0,value:s.primary_email,onChange:e=>o({...s,primary_email:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"contact@partner.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Billing Email"}),(0,r.jsx)("input",{type:"email",value:s.billing_email||"",onChange:e=>o({...s,billing_email:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"billing@partner.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:s.phone||"",onChange:e=>o({...s,phone:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"+1 (555) 123-4567"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Partner Tier"}),(0,r.jsxs)("select",{value:s.tier,onChange:e=>o({...s,tier:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"bronze",children:"Bronze"}),(0,r.jsx)("option",{value:"silver",children:"Silver"}),(0,r.jsx)("option",{value:"gold",children:"Gold"}),(0,r.jsx)("option",{value:"platinum",children:"Platinum"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Commission Model"}),(0,r.jsxs)("select",{value:s.commission_model,onChange:e=>o({...s,commission_model:e.target.value}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"revenue_share",children:"Revenue Share"}),(0,r.jsx)("option",{value:"flat_fee",children:"Flat Fee"}),(0,r.jsx)("option",{value:"tiered",children:"Tiered"}),(0,r.jsx)("option",{value:"hybrid",children:"Hybrid"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Default Commission Rate (%)"}),(0,r.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:s.default_commission_rate?100*s.default_commission_rate:"",onChange:e=>o({...s,default_commission_rate:e.target.value?parseFloat(e.target.value)/100:void 0}),className:"w-full px-3 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"15.00"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-700",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:a.isPending||i.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:a.isPending||i.isPending?"Saving...":e?"Update Partner":"Create Partner"})]})]})]})})}},78855:(e,t,a)=>{a.d(t,{Jb:()=>v,Kg:()=>x,Lw:()=>f,o5:()=>h,qi:()=>g,qo:()=>j,r2:()=>w,y5:()=>y});var r=a(48324),n=a(44976),l=a(17010),i=a(93158);async function s(e,t,a=1,r=50){let n=new URLSearchParams({page:a.toString(),page_size:r.toString()});t&&n.append("status",t);let l=await fetch(e(`/partners?${n.toString()}`),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("Failed to fetch partners");return l.json()}async function o(e,t){let a=await fetch(e(`/partners/${t}`),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch partner");return a.json()}async function d(e,t){let a=await fetch(e("/partners"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).detail||"Failed to create partner");return a.json()}async function c(e,t,a){let r=await fetch(e(`/partners/${t}`),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok)throw Error((await r.json()).detail||"Failed to update partner");return r.json()}async function u(e,t){if(!(await fetch(e(`/partners/${t}`),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to delete partner")}async function p(e,t,a,r){let n=new URLSearchParams({requested_licenses:a.toString()});r&&n.append("tenant_id",r);let l=await fetch(e(`/partners/${t}/quota/check?${n.toString()}`),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error((await l.json()).detail||"Failed to check license quota");return l.json()}async function m(e,t,a,r="managed",n,l){let i=await fetch(e(`/partners/${t}/customers`),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_data:a,engagement_type:r,custom_commission_rate:n,tenant_id:l})});if(!i.ok)throw Error((await i.json()).detail||"Failed to create partner customer");return i.json()}async function b(e,t){let a=await fetch(e("/partners/onboarding/complete"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).detail||"Failed to complete partner onboarding");return a.json()}function h(e,t=1,a=50){let{api:n}=(0,i.M)();return(0,r.a)({queryKey:["partners",e,t,a,n.baseUrl,n.prefix],queryFn:()=>s(n.buildUrl,e,t,a)})}function x(e){let{api:t}=(0,i.M)();return(0,r.a)({queryKey:["partner",e,t.baseUrl,t.prefix],queryFn:()=>o(t.buildUrl,e),enabled:!!e})}function y(){let{api:e}=(0,i.M)(),t=(0,n.NL)();return(0,l.D)({mutationFn:t=>d(e.buildUrl,t),onSuccess:()=>{t.invalidateQueries({queryKey:["partners"]})}})}function f(){let{api:e}=(0,i.M)(),t=(0,n.NL)();return(0,l.D)({mutationFn:({partnerId:t,data:a})=>c(e.buildUrl,t,a),onSuccess:(e,a)=>{t.invalidateQueries({queryKey:["partners"]}),t.invalidateQueries({queryKey:["partner",a.partnerId]})}})}function g(){let{api:e}=(0,i.M)(),t=(0,n.NL)();return(0,l.D)({mutationFn:t=>u(e.buildUrl,t),onSuccess:()=>{t.invalidateQueries({queryKey:["partners"]})}})}function v(){let{api:e}=(0,i.M)();return(0,l.D)({mutationFn:({partnerId:t,requestedLicenses:a,tenantId:r})=>p(e.buildUrl,t,a,r)})}function j(){let{api:e}=(0,i.M)(),t=(0,n.NL)();return(0,l.D)({mutationFn:({partnerId:t,customerData:a,engagementType:r,customCommissionRate:n,tenantId:l})=>m(e.buildUrl,t,a,r,n,l),onSuccess:(e,a)=>{t.invalidateQueries({queryKey:["partners"]}),t.invalidateQueries({queryKey:["partner",a.partnerId]}),t.invalidateQueries({queryKey:["customers"]})}})}function w(){let{api:e}=(0,i.M)(),t=(0,n.NL)();return(0,l.D)({mutationFn:t=>b(e.buildUrl,t),onSuccess:e=>{t.invalidateQueries({queryKey:["partners"]}),t.invalidateQueries({queryKey:["partner",e.partner.id]}),t.invalidateQueries({queryKey:["customers"]}),t.invalidateQueries({queryKey:["licenses"]}),t.invalidateQueries({queryKey:["deployments"]})}})}}};