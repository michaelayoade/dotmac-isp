exports.id=6392,exports.ids=[6392],exports.modules={74074:(e,r,t)=>{Promise.resolve().then(t.bind(t,81119))},81119:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var s=t(10326),a=t(17577),n=t(90434),o=t(35047),l=t(48723),i=t(95920),c=t(45091),d=t(28916),u=t(76464),m=t(2280),h=t(88378),p=t(94019),f=t(90748),x=t(79635),j=t(71810),g=t(77863),N=t(55437);let v=[{name:"Dashboard",href:"/customer-portal",icon:i.Z},{name:"My Service",href:"/customer-portal/service",icon:c.Z},{name:"Billing",href:"/customer-portal/billing",icon:d.Z},{name:"Usage",href:"/customer-portal/usage",icon:u.Z},{name:"Support",href:"/customer-portal/support",icon:m.Z},{name:"Settings",href:"/customer-portal/settings",icon:h.Z}];function b({children:e}){let r=(0,o.usePathname)(),[t,i]=(0,a.useState)(!1),{user:d,logout:u}=(0,N.e5)();return"/customer-portal/login"===r?(0,s.jsx)(s.Fragment,{children:e}):d?(0,s.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"container flex h-16 items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>i(!t),"aria-label":"Toggle navigation menu",children:t?(0,s.jsx)(p.Z,{className:"h-5 w-5"}):(0,s.jsx)(f.Z,{className:"h-5 w-5"})}),(0,s.jsxs)(n.default,{href:"/customer-portal",className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"h-5 w-5 text-primary-foreground"})}),(0,s.jsx)("span",{className:"font-bold text-lg hidden sm:inline-block",children:"My Account"})]})]}),(0,s.jsx)("nav",{className:"hidden md:flex items-center gap-6",children:v.map(e=>{let t=e.icon,a=r===e.href||"/customer-portal"!==e.href&&r.startsWith(e.href);return(0,s.jsxs)(n.default,{href:e.href,className:(0,g.cn)("flex items-center gap-2 text-sm font-medium transition-colors hover:text-primary",a?"text-primary":"text-muted-foreground"),children:[(0,s.jsx)(t,{className:"h-4 w-4"}),e.name]},e.name)})}),(0,s.jsxs)(l.DropdownMenu,{children:[(0,s.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsx)(l.Button,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,s.jsxs)(l.Avatar,{children:[(0,s.jsx)(l.AvatarImage,{src:"",alt:`${d.first_name} ${d.last_name}`}),(0,s.jsxs)(l.AvatarFallback,{children:[(d.first_name?.[0]||d.email?.[0]||"U").toUpperCase(),(d.last_name?.[0]||d.email?.[1]||"").toUpperCase()]})]})})}),(0,s.jsxs)(l.DropdownMenuContent,{className:"w-56",align:"end",children:[(0,s.jsx)(l.DropdownMenuLabel,{className:"font-normal",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsxs)("p",{className:"text-sm font-medium leading-none",children:[d.first_name," ",d.last_name]}),(0,s.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:d.email}),(0,s.jsxs)("p",{className:"text-xs leading-none text-muted-foreground mt-1",children:["Account: ",d.account_number]})]})}),(0,s.jsx)(l.DropdownMenuSeparator,{}),(0,s.jsx)(n.default,{href:"/customer-portal/settings",children:(0,s.jsxs)(l.DropdownMenuItem,{className:"cursor-pointer",children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Account Settings"})]})}),(0,s.jsx)(l.DropdownMenuSeparator,{}),(0,s.jsxs)(l.DropdownMenuItem,{onClick:()=>{u()},className:"cursor-pointer",children:[(0,s.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Log out"})]})]})]})]})}),t&&(0,s.jsx)("div",{className:"md:hidden border-b bg-background",children:(0,s.jsx)("nav",{className:"container px-4 py-4 space-y-1",children:v.map(e=>{let t=e.icon,a=r===e.href||"/customer-portal"!==e.href&&r.startsWith(e.href);return(0,s.jsxs)(n.default,{href:e.href,onClick:()=>i(!1),className:(0,g.cn)("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"hover:bg-accent hover:text-accent-foreground"),children:[(0,s.jsx)(t,{className:"h-4 w-4"}),e.name]},e.name)})})}),(0,s.jsxs)("main",{className:"flex-1 container px-4 py-6",children:[(0,s.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,s.jsx)(l.PortalBadge,{className:"",showIcon:!0,shortName:!0,size:"sm"})}),(0,s.jsx)(N.bD,{children:e})]}),(0,s.jsx)("footer",{className:"border-t mt-auto",children:(0,s.jsx)("div",{className:"container px-4 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-muted-foreground",children:[(0,s.jsx)("div",{children:"\xa9 2025 Your ISP Company. All rights reserved."}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)(n.default,{href:"/customer-portal/help",className:"hover:text-primary",children:"Help Center"}),(0,s.jsx)(n.default,{href:"/customer-portal/terms",className:"hover:text-primary",children:"Terms of Service"}),(0,s.jsx)(n.default,{href:"/customer-portal/privacy",className:"hover:text-primary",children:"Privacy Policy"})]})]})})})]}):null}function w({children:e}){return(0,s.jsx)(N.lW,{children:(0,s.jsx)(b,{children:e})})}},55437:(e,r,t)=>{"use strict";t.d(r,{bD:()=>m,e5:()=>u,lW:()=>d});var s=t(10326),a=t(17577),n=t(35047);!function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}();var o=t(36607),l=t(48723);let i=o.LM.api.buildUrl,c=(0,a.createContext)(void 0);function d({children:e}){let[r,t]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),h=(0,n.useRouter)(),{toast:p}=(0,l.useToast)(),f=async(e,r)=>{try{d(!0),m(null);let s=await fetch(i("/auth/customer/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!s.ok){let e=await s.json();throw Error(e.detail||"Login failed")}let a=await s.json();Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())(a.access_token??null,Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())),Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())(Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())),t({id:a.user.id,email:a.user.email,first_name:a.user.first_name,last_name:a.user.last_name,account_number:a.user.account_number,phone:a.user.phone}),h.push("/customer-portal")}catch(e){throw m(e instanceof Error?e.message:"An error occurred during login"),e}finally{d(!1)}},x=async()=>{Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())(Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())),Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())(Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())),Object(function(){var e=Error("Cannot find module '../../../../shared/utils/operatorAuth'");throw e.code="MODULE_NOT_FOUND",e}())();try{localStorage.removeItem("customer_access_token"),localStorage.removeItem("customer_refresh_token")}catch{}try{await fetch(i("/auth/customer/logout"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),p({title:"Signed out",description:"You have been logged out of the customer portal."})}catch{p({title:"Signed out locally",description:"Network issue while logging out from the server.",variant:"destructive"})}t(null),h.push("/customer-portal/login")};return(0,s.jsx)(c.Provider,{value:{user:r,loading:o,error:u,login:f,logout:x,isAuthenticated:!!r},children:e})}function u(){let e=(0,a.useContext)(c);if(void 0===e)throw Error("useCustomerAuth must be used within a CustomerAuthProvider");return e}function m({children:e}){let{isAuthenticated:r,loading:t}=u();return((0,n.useRouter)(),t)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):r?(0,s.jsx)(s.Fragment,{children:e}):null}},77863:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var s=t(41135),a=t(31009);function n(...e){return(0,a.m6)((0,s.W)(e))}},9785:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/customer-portal/layout.tsx#default`)}};