"use strict";exports.id=7075,exports.ids=[7075],exports.modules={87075:(e,t,n)=>{n.d(t,{$Z:()=>Q,$v:()=>k,Cm:()=>w,JB:()=>L,KN:()=>C,XD:()=>z,YN:()=>J,_1:()=>V,aB:()=>G,cs:()=>M,ek:()=>B,i2:()=>P,js:()=>_,m7:()=>F,r$:()=>x,v8:()=>j,wS:()=>U});var i=n(17577),r=n(48324),s=n(44976),a=n(17010),u=n(93158),l=n(97635);let y="/scheduling",c="/time",o="/resources",d=e=>"function"==typeof e.buildPath?e.buildPath:"function"==typeof e.buildUrl?e.buildUrl:t=>{let n=e.baseUrl||"",i=e.prefix||"",r=t.startsWith("/")?t:`/${t}`;return`${n}${i}${r}`},m=()=>{let{api:e}=(0,u.M)(),t=(0,i.useMemo)(()=>d(e),[e.baseUrl,e.prefix,e.buildUrl,e.buildPath]);return{api:e,buildUrl:t}},E=e=>{if(!e)return"";let t=new URLSearchParams;return Object.entries(e).forEach(([e,n])=>{null!=n&&(Array.isArray(n)?t.append(e,n.join(",")):t.append(e,String(n)))}),t.toString()},S=async(e,t)=>{let n=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!n.ok)throw Error((await n.json().catch(()=>({message:"Request failed"}))).message||`HTTP error! status: ${n.status}`);return n.json()},g=async(e,t)=>{let n=E(t);return S(`${e("/field-service/technicians")}?${n}`)},N=async(e,t)=>{let n=E(t),i=await S(`${e(y)}/assignments?${n}`),r=Array.isArray(i)?i:i?.assignments??[];return{assignments:r,total:i?.total??r.length,page:i?.page??1,pageSize:i?.pageSize??r.length}},T=async(e,t)=>S(`${e(y)}/assignments`,{method:"POST",body:JSON.stringify(t)}),v=async(e,t)=>S(`${e(y)}/assignments/auto-assign`,{method:"POST",body:JSON.stringify(t)}),p=async(e,t,n)=>{await S(`${e(y)}/assignments/${t}`,{method:"DELETE",body:JSON.stringify({reason:n})})},D=async(e,t,n)=>S(`${e(y)}/assignments/${t}`,{method:"PUT",body:JSON.stringify(n)}),f=async(e,t)=>S(`${e(c)}/clock-in`,{method:"POST",body:JSON.stringify(t)}),A=async(e,t,n)=>S(`${e(c)}/entries/${t}/clock-out`,{method:"POST",body:JSON.stringify(n)}),I=async(e,t)=>{let n=E(t),i=await S(`${e(c)}/entries?${n}`),r=Array.isArray(i)?i:i?.entries??[];return{entries:r,total:i?.total??r.length,page:i?.page??1,pageSize:i?.pageSize??r.length}},h=async(e,t)=>S(`${e(c)}/entries/${t}/submit`,{method:"POST"}),q=async(e,t)=>S(`${e(c)}/entries/${t}/approve`,{method:"POST"}),$=async(e,t,n)=>S(`${e(c)}/entries/${t}/reject`,{method:"POST",body:JSON.stringify({reason:n})}),b=async(e,t)=>{let n=E(t);return S(`${e(o)}/equipment?${n}`)},R=async(e,t)=>{let n=E(t);return S(`${e(o)}/vehicles?${n}`)},O=async(e,t)=>S(`${e(o)}/assignments`,{method:"POST",body:JSON.stringify(t)}),K=async(e,t)=>{let n=t?`?technicianId=${t}`:"";return S(`${e(o)}/assignments${n}`)},L=e=>{let{api:t,buildUrl:n}=m();return(0,r.a)({queryKey:["technicians",e,t.baseUrl,t.prefix],queryFn:()=>g(n,e),staleTime:3e4})},U=(e,t)=>{let{api:n,buildUrl:i}=m();return(0,r.a)({queryKey:["assignments",e,n.baseUrl,n.prefix],queryFn:()=>N(i,e),staleTime:1e4,enabled:t?.enabled??!0})},P=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>T(t,e),onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),n.invalidateQueries({queryKey:["schedules"]})}})},F=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>v(t,e),onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),n.invalidateQueries({queryKey:["schedules"]})}})},Q=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:({id:e,reason:n})=>p(t,e,n),onSuccess:()=>{n.invalidateQueries({queryKey:["assignments"]}),n.invalidateQueries({queryKey:["schedules"]})}})},C=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:({id:e,actualStart:n})=>D(t,e,{status:l.l4.IN_PROGRESS,actualStart:n??new Date().toISOString()}),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["assignments"]}),n.invalidateQueries({queryKey:["assignment",t.id]})}})},_=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:({id:e,actualEnd:n})=>D(t,e,{status:l.l4.COMPLETED,actualEnd:n??new Date().toISOString()}),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["assignments"]}),n.invalidateQueries({queryKey:["assignment",t.id]})}})},V=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>f(t,e),onSuccess:()=>{n.invalidateQueries({queryKey:["time-entries"]})}})},x=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:({id:e,data:n})=>A(t,e,n),onSuccess:()=>{n.invalidateQueries({queryKey:["time-entries"]})}})},M=(e,t)=>{let{api:n,buildUrl:i}=m();return(0,r.a)({queryKey:["time-entries",e,n.baseUrl,n.prefix],queryFn:()=>I(i,e),staleTime:1e4,enabled:t?.enabled??!0})},J=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>h(t,e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["time-entries"]}),n.invalidateQueries({queryKey:["time-entry",t]})}})},w=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>q(t,e),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["time-entries"]}),n.invalidateQueries({queryKey:["time-entry",t]})}})},j=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:({id:e,reason:n})=>$(t,e,n),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:["time-entries"]}),n.invalidateQueries({queryKey:["time-entry",t.id]})}})},B=e=>{let{api:t,buildUrl:n}=m();return(0,r.a)({queryKey:["equipment",e,t.baseUrl,t.prefix],queryFn:()=>b(n,e),staleTime:3e4})},k=e=>{let{api:t,buildUrl:n}=m();return(0,r.a)({queryKey:["vehicles",e,t.baseUrl,t.prefix],queryFn:()=>R(n,e),staleTime:3e4})},G=()=>{let{api:e,buildUrl:t}=m(),n=(0,s.NL)();return(0,a.D)({mutationFn:e=>O(t,e),onSuccess:()=>{n.invalidateQueries({queryKey:["resource-assignments"]}),n.invalidateQueries({queryKey:["equipment"]}),n.invalidateQueries({queryKey:["vehicles"]})}})},z=(e,t)=>{let{api:n,buildUrl:i}=m();return(0,r.a)({queryKey:["resource-assignments",e,n.baseUrl,n.prefix],queryFn:()=>K(i,e),staleTime:1e4,enabled:t?.enabled??!0})}},97635:(e,t,n)=>{var i,r,s,a,u,l,y,c,o;n.d(t,{D6:()=>u,l4:()=>a}),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.ON_LEAVE="on_leave",e.SICK="sick",e.SUSPENDED="suspended"}(i||(i={})),function(e){e.TRAINEE="trainee",e.JUNIOR="junior",e.INTERMEDIATE="intermediate",e.SENIOR="senior",e.EXPERT="expert"}(r||(r={})),function(e){e.AVAILABLE="available",e.ON_LEAVE="on_leave",e.SICK="sick",e.BUSY="busy",e.OFF_DUTY="off_duty"}(s||(s={})),function(e){e.SCHEDULED="scheduled",e.CONFIRMED="confirmed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled",e.RESCHEDULED="rescheduled"}(a||(a={})),function(e){e.REGULAR="regular",e.OVERTIME="overtime",e.BREAK="break",e.TRAVEL="travel",e.TRAINING="training",e.ADMINISTRATIVE="administrative"}(u||(u={})),function(e){e.DRAFT="draft",e.SUBMITTED="submitted",e.APPROVED="approved",e.REJECTED="rejected",e.INVOICED="invoiced"}(l||(l={})),function(e){e.AVAILABLE="available",e.IN_USE="in_use",e.MAINTENANCE="maintenance",e.REPAIR="repair",e.RETIRED="retired",e.LOST="lost"}(y||(y={})),function(e){e.AVAILABLE="available",e.IN_USE="in_use",e.MAINTENANCE="maintenance",e.REPAIR="repair",e.RETIRED="retired"}(c||(c={})),function(e){e.RESERVED="reserved",e.ASSIGNED="assigned",e.IN_USE="in_use",e.RETURNED="returned",e.DAMAGED="damaged",e.LOST="lost"}(o||(o={}))}};