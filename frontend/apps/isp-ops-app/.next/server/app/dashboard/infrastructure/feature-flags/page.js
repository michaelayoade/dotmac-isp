(()=>{var e={};e.id=3771,e.ids=[3771],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},30369:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(24379),t(13321),t(46366),t(96560);var r=t(23191),s=t(88716),l=t(37922),n=t.n(l),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(a,d);let o=["",{children:["dashboard",{children:["infrastructure",{children:["feature-flags",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,24379)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/feature-flags/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/feature-flags/page.tsx"],u="/dashboard/infrastructure/feature-flags/page",g={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/infrastructure/feature-flags/page",pathname:"/dashboard/infrastructure/feature-flags",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},19169:(e,a,t)=>{Promise.resolve().then(t.bind(t,40298))},40298:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>E});var r=t(10326),s=t(17577),l=t(48723),n=t(54014),i=t(24061),d=t(25276),o=t(83855),c=t(77506),u=t(85571),g=t(66307),p=t(41291),m=t(88307),x=t(15919),h=t(43810),f=t(98091),j=t(92498),b=t(44976),y=t(48324),v=t(17010),N=t(59341),w=t(29771);let C={all:["feature-flags"],flags:e=>[...C.all,"flags",{enabledOnly:e}],status:()=>[...C.all,"status"]};function F(e,a){if(e instanceof Error&&e.__featureFlagExposed)return e.message;let t=e?.response?.data;return"string"==typeof t?.detail?t.detail:"string"==typeof t?.error?.message?t.error.message:"string"==typeof e?e:e instanceof Error&&e.message?e.message:a}let D=(e=!1)=>{let a=(0,b.NL)(),t=(0,y.a)({queryKey:C.flags(e),queryFn:async({queryKey:e})=>{let[,,a]=e,t=a.enabledOnly??!1;try{let e=await N.x1.get(`/feature-flags/flags${t?"?enabled_only=true":""}`);return function(e){if(e?.error)throw Error(e.error.message||"Failed to fetch feature flags");return Array.isArray(e?.data)?e.data:Array.isArray(e)?e:[]}(e)}catch(a){let e=F(a,"Failed to fetch feature flags");throw w.k.error("Failed to fetch feature flags",a instanceof Error?a:Error(String(a))),Error(e)}},staleTime:3e4,refetchOnWindowFocus:!0}),r=(0,y.a)({queryKey:C.status(),queryFn:async()=>{try{var e;return e=await N.x1.get("/feature-flags/status"),e?.data??null}catch(a){let e=F(a,"Failed to fetch flag status");throw w.k.error("Failed to fetch flag status",a instanceof Error?a:Error(String(a))),Error(e)}},staleTime:3e4}),s=(0,v.D)({mutationFn:async({flagName:e,enabled:a})=>{let t=await N.x1.put(`/feature-flags/flags/${e}`,{enabled:a});if(t.status<200||t.status>=300)throw Error("Failed to toggle flag");return{flagName:e,enabled:a}},onSuccess:({flagName:t,enabled:r})=>{a.setQueryData(C.flags(e),e=>e?.map(e=>e.name===t?{...e,enabled:r}:e)),a.invalidateQueries({queryKey:C.flags()}),a.invalidateQueries({queryKey:C.status()})},onError:e=>{w.k.error("Failed to toggle flag",e instanceof Error?e:Error(String(e)))}}),l=(0,v.D)({mutationFn:async({flagName:e,data:a})=>(await N.x1.post(`/feature-flags/flags/${e}`,a)).data??null,onSuccess:()=>{a.invalidateQueries({queryKey:C.flags()}),a.invalidateQueries({queryKey:C.status()})},onError:e=>{w.k.error("Failed to create flag",e instanceof Error?e:Error(String(e)))}}),n=(0,v.D)({mutationFn:async e=>{let a=await N.x1.delete(`/feature-flags/flags/${e}`);if(a.status<200||a.status>=300)throw Error("Failed to delete flag");return e},onSuccess:t=>{a.setQueryData(C.flags(e),e=>e?.filter(e=>e.name!==t)),a.invalidateQueries({queryKey:C.flags()}),a.invalidateQueries({queryKey:C.status()})},onError:e=>{w.k.error("Failed to delete flag",e instanceof Error?e:Error(String(e)))}});return{flags:t.data??[],status:r.data??null,loading:t.isLoading||r.isLoading,error:t.error instanceof Error&&t.error.message||r.error instanceof Error&&r.error.message||null,fetchFlags:t.refetch,toggleFlag:async(e,a)=>(await s.mutateAsync({flagName:e,enabled:a}),!0),createFlag:async(e,a)=>await l.mutateAsync({flagName:e,data:a}),deleteFlag:async e=>(await n.mutateAsync(e),!0),refreshFlags:t.refetch}};var T=t(26576);function E(){let{toast:e}=(0,l.useToast)(),{flags:a,toggleFlag:t,deleteFlag:b,refreshFlags:y}=D(),[v,C]=(0,s.useState)(""),[F,E]=(0,s.useState)("all"),[P,S]=(0,s.useState)("all"),[k,A]=(0,s.useState)(null),[_,q]=(0,s.useState)(!1),[L,H]=(0,s.useState)(!1),[I,Z]=(0,s.useState)(!1),M=a.map(e=>({id:e.name,name:e.name,displayName:e.name.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()),description:e.description||"No description provided",enabled:e.enabled,type:"boolean",environment:"production",targeting:"all",rolloutPercentage:e.enabled?100:0,createdAt:e.created_at?new Date(1e3*e.created_at).toISOString():new Date().toISOString(),updatedAt:new Date(1e3*e.updated_at).toISOString(),lastModifiedBy:"system",tags:Object.keys(e.context||{})})),[B,U]=(0,s.useState)({name:"",displayName:"",description:"",type:"boolean",enabled:!1,environment:"staging",targeting:"all",rolloutPercentage:100,tags:""}),G=M.filter(e=>{let a=e.name.toLowerCase().includes(v.toLowerCase())||e.displayName.toLowerCase().includes(v.toLowerCase())||e.description.toLowerCase().includes(v.toLowerCase()),t="all"===F||e.environment===F,r="all"===P||"enabled"===P&&e.enabled||"disabled"===P&&!e.enabled;return a&&t&&r}),O=async a=>{let r=M.find(e=>e.id===a);if(r)try{await t(a,!r.enabled),w.k.info("Feature flag toggled",{flagId:a,enabled:!r.enabled}),e({title:"Success",description:`Feature flag "${r.displayName}" ${r.enabled?"disabled":"enabled"}`})}catch(e){w.k.error("Failed to toggle feature flag",e,{flagId:a}),(0,T.zG)(e,{userMessage:"Failed to toggle feature flag. Please try again."})}},$=async()=>{if(!B.name||!B.displayName){e({title:"Validation Error",description:"Flag name and display name are required",variant:"destructive"});return}Z(!0);try{await N.x1.post("/feature-flags",{name:B.name,display_name:B.displayName,description:B.description,enabled:B.enabled,type:B.type,environment:B.environment,targeting:B.targeting,rollout_percentage:B.rolloutPercentage,tags:B.tags.split(",").map(e=>e.trim()).filter(Boolean)}),w.k.info("Feature flag created",{flagName:B.name}),await y(),q(!1),U({name:"",displayName:"",description:"",type:"boolean",enabled:!1,environment:"staging",targeting:"all",rolloutPercentage:100,tags:""}),e({title:"Success",description:"Feature flag created successfully"})}catch(e){w.k.error("Failed to create feature flag",e),(0,T.zG)(e,{userMessage:"Failed to create feature flag. Please try again."})}finally{Z(!1)}},R=async()=>{if(k){Z(!0);try{await b(k.id),w.k.info("Feature flag deleted",{flagId:k.id}),H(!1),A(null),e({title:"Success",description:"Feature flag deleted successfully"})}catch(e){w.k.error("Failed to delete feature flag",e,{flagId:k.id}),(0,T.zG)(e,{userMessage:"Failed to delete feature flag. Please try again."})}finally{Z(!1)}}},K=async a=>{try{await N.x1.post("/feature-flags",{name:`${a.name}-copy`,display_name:`${a.displayName} (Copy)`,description:a.description,enabled:!1,type:a.type,environment:a.environment,targeting:a.targeting,rollout_percentage:a.rolloutPercentage,tags:a.tags||[]}),w.k.info("Feature flag duplicated",{originalFlagId:a.id}),await y(),e({title:"Success",description:"Feature flag duplicated successfully"})}catch(e){w.k.error("Failed to duplicate feature flag",e,{flagId:a.id}),(0,T.zG)(e,{userMessage:"Failed to duplicate feature flag. Please try again."})}},Q=e=>{switch(e){case"production":return(0,r.jsx)(l.Badge,{variant:"destructive",children:e});case"staging":return(0,r.jsx)(l.Badge,{variant:"secondary",children:e});default:return(0,r.jsx)(l.Badge,{variant:"outline",children:e})}},z=e=>{switch(e){case"all":default:return(0,r.jsx)(n.Z,{className:"h-4 w-4"});case"segment":return(0,r.jsx)(i.Z,{className:"h-4 w-4"});case"percentage":return(0,r.jsx)(d.Z,{className:"h-4 w-4"})}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Feature Flags"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage feature toggles and rollouts"})]}),(0,r.jsxs)(l.Button,{onClick:()=>q(!0),children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Create Flag"]}),(0,r.jsx)(l.Dialog,{open:_,onOpenChange:q,children:(0,r.jsxs)(l.DialogContent,{className:"max-w-2xl",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"Create New Feature Flag"}),(0,r.jsx)(l.DialogDescription,{children:"Define a new feature flag for controlled rollouts"})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-name",children:"Flag Name"}),(0,r.jsx)(l.Input,{id:"flag-name",value:B.name,onChange:e=>U({...B,name:e.target.value}),placeholder:"e.g., new-feature"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-display-name",children:"Display Name"}),(0,r.jsx)(l.Input,{id:"flag-display-name",value:B.displayName,onChange:e=>U({...B,displayName:e.target.value}),placeholder:"e.g., New Feature"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-description",children:"Description"}),(0,r.jsx)(l.Textarea,{id:"flag-description",value:B.description,onChange:e=>U({...B,description:e.target.value}),placeholder:"Describe the purpose of this feature flag",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-type",children:"Type"}),(0,r.jsxs)("select",{id:"flag-type",value:B.type,onChange:e=>U({...B,type:e.target.value}),className:"flex h-10 w-full rounded-md border border-border bg-card px-3 py-2 text-sm text-foreground",children:[(0,r.jsx)("option",{value:"boolean",children:"Boolean"}),(0,r.jsx)("option",{value:"number",children:"Number"}),(0,r.jsx)("option",{value:"string",children:"String"}),(0,r.jsx)("option",{value:"json",children:"JSON"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-environment",children:"Environment"}),(0,r.jsxs)("select",{id:"flag-environment",value:B.environment,onChange:e=>U({...B,environment:e.target.value}),className:"flex h-10 w-full rounded-md border border-border bg-card px-3 py-2 text-sm text-foreground",children:[(0,r.jsx)("option",{value:"development",children:"Development"}),(0,r.jsx)("option",{value:"staging",children:"Staging"}),(0,r.jsx)("option",{value:"production",children:"Production"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-targeting",children:"Targeting"}),(0,r.jsxs)("select",{id:"flag-targeting",value:B.targeting,onChange:e=>U({...B,targeting:e.target.value}),className:"flex h-10 w-full rounded-md border border-border bg-card px-3 py-2 text-sm text-foreground",children:[(0,r.jsx)("option",{value:"all",children:"All Users"}),(0,r.jsx)("option",{value:"segment",children:"User Segment"}),(0,r.jsx)("option",{value:"percentage",children:"Percentage Rollout"})]})]}),"percentage"===B.targeting&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-percentage",children:"Rollout Percentage"}),(0,r.jsx)(l.Input,{id:"flag-percentage",type:"number",min:"0",max:"100",value:B.rolloutPercentage,onChange:e=>U({...B,rolloutPercentage:parseInt(e.target.value)})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.Label,{htmlFor:"flag-tags",children:"Tags (comma-separated)"}),(0,r.jsx)(l.Input,{id:"flag-tags",value:B.tags,onChange:e=>U({...B,tags:e.target.value}),placeholder:"e.g., frontend, experimental"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.Switch,{id:"flag-enabled",checked:B.enabled,onCheckedChange:e=>U({...B,enabled:e})}),(0,r.jsx)(l.Label,{htmlFor:"flag-enabled",children:"Enable immediately"})]})]}),(0,r.jsxs)(l.DialogFooter,{children:[(0,r.jsx)(l.Button,{variant:"outline",onClick:()=>q(!1),disabled:I,children:"Cancel"}),(0,r.jsx)(l.Button,{onClick:$,disabled:!B.name||!B.displayName||I,children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Flag"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Flags"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:M.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all environments"})]})]}),(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Enabled"}),(0,r.jsx)(g.Z,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),(0,r.jsxs)(l.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:M.filter(e=>e.enabled).length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Production"}),(0,r.jsx)(p.Z,{className:"h-4 w-4 text-red-600 dark:text-red-400"})]}),(0,r.jsxs)(l.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:M.filter(e=>"production"===e.environment).length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Live in production"})]})]}),(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Rollouts"}),(0,r.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(l.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:M.filter(e=>"percentage"===e.targeting&&e.rolloutPercentage<100).length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Gradual deployments"})]})]})]}),(0,r.jsxs)(l.Tabs,{defaultValue:"flags",children:[(0,r.jsxs)(l.TabsList,{children:[(0,r.jsx)(l.TabsTrigger,{value:"flags",children:"Feature Flags"}),(0,r.jsx)(l.TabsTrigger,{value:"history",children:"Audit History"}),(0,r.jsx)(l.TabsTrigger,{value:"examples",children:"Code Examples"})]}),(0,r.jsx)(l.TabsContent,{value:"flags",className:"space-y-4",children:(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(l.CardTitle,{children:"All Flags"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(m.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(l.Input,{placeholder:"Search flags...",value:v,onChange:e=>C(e.target.value),className:"pl-8 w-[250px]"})]}),(0,r.jsxs)("select",{value:F,onChange:e=>E(e.target.value),className:"h-10 w-[150px] rounded-md border border-border bg-card px-3 text-sm text-foreground",children:[(0,r.jsx)("option",{value:"all",children:"All Environments"}),(0,r.jsx)("option",{value:"production",children:"Production"}),(0,r.jsx)("option",{value:"staging",children:"Staging"}),(0,r.jsx)("option",{value:"development",children:"Development"})]}),(0,r.jsxs)("select",{value:P,onChange:e=>S(e.target.value),className:"h-10 w-[120px] rounded-md border border-border bg-card px-3 text-sm text-foreground",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"enabled",children:"Enabled"}),(0,r.jsx)("option",{value:"disabled",children:"Disabled"})]})]})]})}),(0,r.jsx)(l.CardContent,{children:(0,r.jsxs)(l.Table,{children:[(0,r.jsx)(l.TableHeader,{children:(0,r.jsxs)(l.TableRow,{children:[(0,r.jsx)(l.TableHead,{children:"Flag"}),(0,r.jsx)(l.TableHead,{children:"Environment"}),(0,r.jsx)(l.TableHead,{children:"Targeting"}),(0,r.jsx)(l.TableHead,{children:"Tags"}),(0,r.jsx)(l.TableHead,{children:"Last Updated"}),(0,r.jsx)(l.TableHead,{children:"Status"}),(0,r.jsx)(l.TableHead,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(l.TableBody,{children:G.map(e=>(0,r.jsxs)(l.TableRow,{children:[(0,r.jsx)(l.TableCell,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.displayName}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:e.name}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.description})]})}),(0,r.jsx)(l.TableCell,{children:Q(e.environment)}),(0,r.jsx)(l.TableCell,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[z(e.targeting),(0,r.jsxs)("span",{className:"text-sm",children:["all"===e.targeting&&"All Users","segment"===e.targeting&&e.segment,"percentage"===e.targeting&&`${e.rolloutPercentage}%`]})]})}),(0,r.jsx)(l.TableCell,{children:(0,r.jsx)("div",{className:"flex gap-1 flex-wrap",children:e.tags?.map((e,a)=>r.jsx(l.Badge,{variant:"outline",className:"text-xs",children:e},a))})}),(0,r.jsx)(l.TableCell,{children:(0,r.jsxs)("div",{className:"text-sm",children:[new Date(e.updatedAt).toLocaleDateString(),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:e.lastModifiedBy})]})}),(0,r.jsx)(l.TableCell,{children:(0,r.jsx)(l.Switch,{checked:e.enabled,onCheckedChange:()=>O(e.id)})}),(0,r.jsx)(l.TableCell,{className:"text-right",children:(0,r.jsxs)(l.DropdownMenu,{children:[(0,r.jsx)(l.DropdownMenuTrigger,{children:(0,r.jsx)(l.Button,{variant:"ghost",className:"h-8 w-8 p-0","aria-label":`Open actions for ${e.name??"feature flag"}`,title:`Open actions for ${e.name??"feature flag"}`,children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(l.DropdownMenuContent,{children:[(0,r.jsx)(l.DropdownMenuLabel,{children:"Actions"}),(0,r.jsxs)(l.DropdownMenuItem,{onClick:()=>K(e),children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,r.jsxs)(l.DropdownMenuItem,{onClick:()=>{A(e),H(!0)},className:"text-red-600 dark:text-red-400",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id))})]})})]})}),(0,r.jsx)(l.TabsContent,{value:"history",className:"space-y-4",children:(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{children:[(0,r.jsx)(l.CardTitle,{children:"Audit History"}),(0,r.jsx)(l.CardDescription,{children:"Recent changes to feature flags"})]}),(0,r.jsx)(l.CardContent,{children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Flag audit logs will appear here once the observability service publishes change events. Enable audit streaming on the backend to populate this view."})})]})}),(0,r.jsx)(l.TabsContent,{value:"examples",className:"space-y-4",children:(0,r.jsxs)(l.Card,{children:[(0,r.jsxs)(l.CardHeader,{children:[(0,r.jsx)(l.CardTitle,{children:"Implementation Examples"}),(0,r.jsx)(l.CardDescription,{children:"How to use feature flags in your code"})]}),(0,r.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),"JavaScript/TypeScript"]}),(0,r.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:`import { getFeatureFlag } from '@dotmac/feature-flags';

// Check if a feature is enabled
if (await getFeatureFlag('new-dashboard-ui')) {
  // Show new UI
  renderNewDashboard();
} else {
  // Show old UI
  renderLegacyDashboard();
}

// Get flag with default value
const rateLimit = await getFeatureFlag('api-rate-limit', 1000);
telemetry.track('api_rate_limit', rateLimit);`})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),"Python"]}),(0,r.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:`from dotmac.feature_flags import get_flag

# Check boolean flag
if get_flag('new-dashboard-ui'):
    return render_new_dashboard()
else:
    return render_legacy_dashboard()

# Get numeric flag with default
rate_limit = get_flag('api-rate-limit', default=1000)
print(f"Rate limit: {rate_limit}")`})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"h-4 w-4"}),"React Hook"]}),(0,r.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-x-auto text-sm",children:`import { useFeatureFlag } from '@dotmac/react-feature-flags';

function MyComponent() {
  const { isEnabled, loading } = useFeatureFlag('new-dashboard-ui');

  if (loading) return <Spinner />;

  return isEnabled ? <NewDashboard /> : <LegacyDashboard />;
}`})]})]})]})})]}),(0,r.jsx)(l.AlertDialog,{open:L,onOpenChange:H,children:(0,r.jsxs)(l.AlertDialogContent,{children:[(0,r.jsxs)(l.AlertDialogHeader,{children:[(0,r.jsx)(l.AlertDialogTitle,{children:"Delete Feature Flag"}),(0,r.jsx)(l.AlertDialogDescription,{children:"Are you sure you want to delete this feature flag? This action cannot be undone."})]}),k&&(0,r.jsx)("div",{className:"py-4",children:(0,r.jsx)("div",{className:"bg-red-100 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-md p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-red-800 dark:text-red-300",children:[(0,r.jsx)("strong",{children:k.displayName})," will be permanently deleted."]}),(0,r.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-400 mt-1",children:["Flag name: ",k.name]})]})]})})}),(0,r.jsxs)(l.AlertDialogFooter,{children:[(0,r.jsx)(l.AlertDialogCancel,{disabled:I,children:"Cancel"}),(0,r.jsx)(l.AlertDialogAction,{onClick:R,disabled:I,className:"bg-red-600 hover:bg-red-700",children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Flag"})]})]})})]})}},26576:(e,a,t)=>{"use strict";t.d(a,{zG:()=>d});var r=t(29771);t(17406);let s=e=>e instanceof Error&&("status"in e||"response"in e),l=e=>{if(e instanceof Error)return e.message;if("string"==typeof e)return e;if(s(e)&&e.data){let a=e.data;if(a.message&&"string"==typeof a.message)return a.message;if(a.detail&&"string"==typeof a.detail)return a.detail}return"An unexpected error occurred. Please try again."},n=e=>s(e)?e.status:e&&"object"==typeof e&&"response"in e&&e.response&&"object"==typeof e.response&&"status"in e.response?e.response.status:void 0,i=e=>{},d=(e,a={})=>{let{showToast:t=!0,userMessage:s,redirectOnUnauthorized:d=!0,context:o,onError:c}=a,u=n(e),g=s||l(e);r.k.error("API Error",e,{status:u,message:g,...o}),(401!==u||!d)&&(403===u?t&&i({title:"Access Denied",description:"You do not have permission to perform this action.",variant:"destructive"}):404===u?t&&i({title:"Not Found",description:g,variant:"destructive"}):422===u?t&&i({title:"Validation Error",description:g,variant:"destructive"}):u&&u>=500?t&&i({title:"Server Error",description:"An unexpected server error occurred. Please try again later.",variant:"destructive"}):t&&i({title:"Error",description:g,variant:"destructive"}),c&&e instanceof Error&&c(e))}},17406:(e,a,t)=>{},24379:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/feature-flags/page.tsx#default`)}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[2793,1009,6226,657,6032,4218],()=>t(30369));module.exports=r})();