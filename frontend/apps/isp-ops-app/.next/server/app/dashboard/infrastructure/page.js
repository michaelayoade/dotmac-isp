(()=>{var e={};e.id=1014,e.ids=[1014],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},43280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(83439),s(13321),s(46366),s(96560);var r=s(23191),a=s(88716),i=s(37922),l=s.n(i),n=s(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["infrastructure",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83439)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/page.tsx"],u="/dashboard/infrastructure/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/infrastructure/page",pathname:"/dashboard/infrastructure",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70678:(e,t,s)=>{Promise.resolve().then(s.bind(s,65157))},65157:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(10326),a=s(17577),i=s(90434),l=s(30361),n=s(50949),o=s(69669);s(71208),s(55002),s(88319),s(51110);var d=s(66697),c=s(44713),u=s(76464),m=s(3634),x=s(88378);s(43460);var h=s(57176),g=s(20892);function p({services:e}){let t={healthy:"text-green-400 bg-green-400/10",degraded:"text-yellow-400 bg-yellow-400/10",down:"text-red-400 bg-red-400/10"},s={healthy:l.Z,degraded:n.Z,down:o.Z};return(0,r.jsxs)("div",{className:"rounded-lg border border-border bg-card p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"System Health"}),(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>{let a=s[e.status];return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:`p-1.5 rounded-lg ${t[e.status]}`,children:(0,r.jsx)(a,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:e.service})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[e.latency&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.latency,"ms"]}),(0,r.jsx)("span",{className:`text-xs font-medium ${"healthy"===e.status?"text-green-400":"degraded"===e.status?"text-yellow-400":"text-red-400"}`,children:e.status.toUpperCase()})]})]},e.service)})}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,r.jsx)(i.default,{href:"/dashboard/infrastructure/health",className:"text-sm text-sky-400 hover:text-sky-300",children:"View detailed health metrics →"})})]})}function f({resource:e,used:t,total:s,unit:a,icon:i}){let l=t/s*100,n=l>80,o=l>60;return(0,r.jsxs)("div",{className:"rounded-lg border border-border bg-card p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:e})]}),(0,r.jsxs)("span",{className:`text-sm font-medium ${n?"text-red-400":o?"text-yellow-400":"text-green-400"}`,children:[l.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-2 bg-accent rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full rounded-full transition-all ${n?"bg-red-500 dark:bg-red-400":o?"bg-yellow-500 dark:bg-yellow-400":"bg-green-500 dark:bg-green-400"}`,style:{width:`${l}%`}})}),(0,r.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("span",{children:[t.toFixed(1)," ",a]}),(0,r.jsxs)("span",{children:[s.toFixed(1)," ",a]})]})]})]})}function b({incidents:e}){let t={critical:"text-red-400 bg-red-400/10",warning:"text-yellow-400 bg-yellow-400/10",info:"text-blue-400 bg-blue-400/10"},s={open:"text-red-400",investigating:"text-yellow-400",resolved:"text-green-400"};return(0,r.jsxs)("div",{className:"rounded-lg border border-border bg-card",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Recent Incidents"}),(0,r.jsx)(i.default,{href:"/dashboard/infrastructure/incidents",className:"text-sm text-sky-400 hover:text-sky-300",children:"View all →"})]}),(0,r.jsx)("div",{className:"divide-y divide-border max-h-96 overflow-y-auto",children:0===e.length?(0,r.jsx)("div",{className:"p-6 text-center text-muted-foreground",children:"No active incidents"}):e.map(e=>(0,r.jsx)("div",{className:"p-4 hover:bg-accent/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:`p-1.5 rounded-lg ${t[e.severity]}`,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.service}),(0,r.jsx)("span",{className:`text-xs ${s[e.status]}`,children:e.status})]})]}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:e.timestamp})]})},e.id))})]})}function j(){let[e,t]=(0,a.useState)(null),[s,g]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[v,N]=(0,a.useState)([]),[w,C]=(0,a.useState)(!0),S=s.every(e=>"healthy"===e.status)?"healthy":s.some(e=>"down"===e.status)?"degraded":"warning";return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Infrastructure"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Monitor system health, performance metrics, and manage infrastructure"})]}),(0,r.jsx)(h.Y,{category:"system",maxAlerts:3}),(0,r.jsx)("div",{className:`rounded-lg border p-6 ${"healthy"===S?"border-green-900/20 bg-green-950/20 dark:border-green-800/30 dark:bg-green-900/20":"warning"===S?"border-yellow-900/20 bg-yellow-950/20 dark:border-yellow-800/30 dark:bg-yellow-900/20":"border-red-900/20 bg-red-950/20 dark:border-red-800/30 dark:bg-red-900/20"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["healthy"===S?(0,r.jsx)(l.Z,{className:"h-6 w-6 text-green-400"}):"warning"===S?(0,r.jsx)(n.Z,{className:"h-6 w-6 text-yellow-400"}):(0,r.jsx)(o.Z,{className:"h-6 w-6 text-red-400"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:`font-semibold ${"healthy"===S?"text-green-400":"warning"===S?"text-yellow-400":"text-red-400"}`,children:["System Status:"," ","healthy"===S?"All Systems Operational":"warning"===S?"Partial Service Disruption":"Major Service Outage"]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Uptime: ",e?.health.uptime||0,"% • RPS:"," ",e?.performance.requestsPerSecond||0]})]})]}),(0,r.jsx)(i.default,{href:"/dashboard/infrastructure/status",className:"px-4 py-2 bg-accent hover:bg-muted text-foreground rounded-lg text-sm font-medium transition-colors",children:"View Status Page"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Resource Usage"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map(e=>(0,r.jsx)(f,{...e},e.resource))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsx)(b,{incidents:v}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Infrastructure Management"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(i.default,{href:"/dashboard/infrastructure/health",className:"flex items-center gap-4 rounded-lg border border-border bg-card p-4 hover:border-border transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-accent rounded-lg",children:(0,r.jsx)(d.Z,{className:"h-5 w-5 text-sky-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:"Health Checks"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Service monitoring"})]}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.default,{href:"/dashboard/infrastructure/logs",className:"flex items-center gap-4 rounded-lg border border-border bg-card p-4 hover:border-border transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-accent rounded-lg",children:(0,r.jsx)(u.Z,{className:"h-5 w-5 text-sky-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:"Logs & Metrics"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e?.logs.totalLogs||0," logs • ",e?.logs.errors||0," errors"]})]}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.default,{href:"/dashboard/infrastructure/observability",className:"flex items-center gap-4 rounded-lg border border-border bg-card p-4 hover:border-border transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-accent rounded-lg",children:(0,r.jsx)(m.Z,{className:"h-5 w-5 text-sky-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:"Observability"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tracing & APM"})]}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.default,{href:"/dashboard/infrastructure/feature-flags",className:"flex items-center gap-4 rounded-lg border border-border bg-card p-4 hover:border-border transition-colors",children:[(0,r.jsx)("div",{className:"p-2 bg-accent rounded-lg",children:(0,r.jsx)(x.Z,{className:"h-5 w-5 text-sky-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:"Feature Flags"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toggle features"})]}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]})]})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(p,{services:s})})]})]})}function y(){return(0,r.jsx)(g.eu,{permission:"infrastructure.read",children:(0,r.jsx)(j,{})})}},57176:(e,t,s)=>{"use strict";s.d(t,{Y:()=>f});var r=s(10326),a=s(17577),i=s(90434),l=s(50949),n=s(41291),o=s(18019),d=s(30361),c=s(39183),u=s(94019),m=s(21405),x=s(6507),h=s(67215);let g={critical:{icon:l.Z,bgColor:"bg-red-950/20",borderColor:"border-red-900/20",iconColor:"text-red-400",textColor:"text-red-400"},warning:{icon:n.Z,bgColor:"bg-orange-950/20",borderColor:"border-orange-900/20",iconColor:"text-orange-400",textColor:"text-orange-400"},info:{icon:o.Z,bgColor:"bg-blue-950/20",borderColor:"border-blue-900/20",iconColor:"text-blue-400",textColor:"text-blue-400"},success:{icon:d.Z,bgColor:"bg-green-950/20",borderColor:"border-green-900/20",iconColor:"text-green-400",textColor:"text-green-400"}};function p({alert:e,onDismiss:t}){let s=g[e.severity],a=s.icon;return(0,r.jsx)("div",{className:`rounded-lg border ${s.borderColor} ${s.bgColor} p-4`,children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(a,{className:`h-5 w-5 mt-0.5 ${s.iconColor}`}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:`font-medium ${s.textColor}`,children:e.title}),(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:e.message}),e.actionUrl&&(0,r.jsxs)(i.default,{href:e.actionUrl,className:`inline-flex items-center gap-1 mt-2 text-sm ${s.textColor} hover:underline`,children:[e.actionText||"View Details",(0,r.jsx)(c.Z,{className:"h-3 w-3"})]})]}),(0,r.jsx)("button",{onClick:()=>t(e.id),className:"text-slate-500 hover:text-slate-400 transition-colors p-2 min-h-[44px] min-w-[44px] flex items-center justify-center touch-manipulation","aria-label":`Dismiss ${e.title} alert`,children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})})]})})}function f({category:e,maxAlerts:t=3,collapsible:s=!0}){let{alerts:i,dismissAlert:l,refreshAlerts:n,loading:o}=function(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)({total:0,critical:0,warning:0,info:0,byCategory:{security:0,billing:0,performance:0,system:0,compliance:0}}),[i,l]=(0,a.useState)(!0),n=(0,a.useCallback)(e=>{h.A.dismissAlert(e)},[]);return{alerts:e,stats:s,loading:i,dismissAlert:n,refreshAlerts:(0,a.useCallback)(async()=>{l(!0),await h.A.refresh(),l(!1)},[]),getAlertsBySeverity:(0,a.useCallback)(e=>h.A.getAlertsBySeverity(e),[]),getAlertsByCategory:(0,a.useCallback)(e=>h.A.getAlertsByCategory(e),[])}}(),[d,c]=(0,a.useState)(!1),[u,g]=(0,a.useState)(!1),f=[...e?i.filter(t=>t.category===e):i].sort((e,t)=>{let s={critical:0,warning:1,info:2,success:3};return e.severity!==t.severity?s[e.severity]-s[t.severity]:t.timestamp.getTime()-e.timestamp.getTime()}),b=d?[]:f.slice(0,t),j=f.length-b.length,y=async()=>{g(!0),await n(),g(!1)};return o?(0,r.jsx)("div",{className:"rounded-lg border border-slate-800 bg-slate-900 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 animate-spin"}),(0,r.jsx)("span",{className:"text-sm",children:"Loading alerts..."})]})}):0===f.length?null:(0,r.jsxs)("div",{className:"space-y-4",children:[s&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("button",{onClick:()=>c(!d),className:"flex items-center gap-2 text-sm text-slate-400 hover:text-slate-300 transition-colors",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:d?`Show ${f.length} alert${1!==f.length?"s":""}`:"Hide alerts"})]}),(0,r.jsx)("button",{onClick:y,disabled:u,className:"text-slate-400 hover:text-slate-300 transition-colors","aria-label":"Refresh alerts",children:(0,r.jsx)(m.Z,{className:`h-4 w-4 ${u?"animate-spin":""}`})})]}),!d&&(0,r.jsxs)("div",{className:"space-y-3",children:[b.map(e=>(0,r.jsx)(p,{alert:e,onDismiss:l},e.id)),j>0&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("button",{onClick:()=>c(!1),className:"text-sm text-slate-400 hover:text-slate-300 transition-colors",children:["+",j," more alert",1!==j?"s":""]})})]})]})}},43460:(e,t,s)=>{"use strict";s.d(t,{vY:()=>a});var r=s(59341);let a={getDashboardMetrics:async function(e="30d"){return(await r.x1.get(`/metrics/dashboard?timeRange=${e}`)).data},getBillingMetrics:async function(e="30d"){return(await r.x1.get(`/analytics/billing/metrics?timeRange=${e}`)).data},getInfrastructureMetrics:async function(){return(await r.x1.get("/monitoring/infrastructure/metrics")).data},getOperationsMetrics:async function(){let e=(await r.x1.get("/analytics/operations/metrics")).data??{};return{customers:{total:e.customers?.total??e.totalCustomers??0,newThisMonth:e.customers?.newThisMonth??e.newCustomersThisMonth??0,growthRate:e.customers?.growthRate??e.customerGrowthRate??0,churnRisk:e.customers?.churnRisk??e.customersAtRisk??0},communications:{totalSent:e.communications?.totalSent??e.totalCommunications??0,sentToday:e.communications?.sentToday??e.communicationsSentToday??0,deliveryRate:e.communications?.deliveryRate??e.communicationDeliveryRate??0},files:{totalFiles:e.files?.totalFiles??e.totalFiles??0,totalSize:e.files?.totalSize??e.totalFileSize??0,uploadsToday:e.files?.uploadsToday??e.filesUploadedToday??0,downloadsToday:e.files?.downloadsToday??e.fileDownloadsToday??0},activity:{eventsPerHour:e.activity?.eventsPerHour??e.eventsPerHour??0,activeUsers:e.activity?.activeUsers??e.activeUsers??0}}},getSecurityMetrics:async function(){return(await r.x1.get("/analytics/security/metrics")).data},getMetric:async function(e,t="30d",s="1d"){return(await r.x1.get(`/metrics/${e}?timeRange=${t}&interval=${s}`)).data},getMetrics:async function(e,t="30d"){return(await r.x1.post("/metrics/batch",{metrics:e,timeRange:t})).data},getTimeSeriesData:async function(e,t="7d",s="1h"){return(await r.x1.get(`/metrics/${e}/timeseries?timeRange=${t}&interval=${s}`)).data},calculateMetricChange:function(e,t){let s=e-t,r=0!==t?s/t*100:0,a="stable";return Math.abs(r)>1&&(a=r>0?"up":"down"),{change:s,changePercent:r,trend:a}},formatMetricValue:function(e,t){switch(t){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);case"percent":return`${e.toFixed(2)}%`;case"number":return new Intl.NumberFormat("en-US").format(e);default:return e.toString()}}}},83439:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[2793,1009,6226,657,6032,4218],()=>s(43280));module.exports=r})();