(()=>{var e={};e.id=9972,e.ids=[9972],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},86862:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),t(15274),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),d=t(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["infrastructure",{children:["health",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,15274)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/health/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/health/page.tsx"],m="/dashboard/infrastructure/health/page",h={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/infrastructure/health/page",pathname:"/dashboard/infrastructure/health",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5674:(e,s,t)=>{Promise.resolve().then(t.bind(t,88630))},88630:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(10326),r=t(17577),i=t(48723),l=t(66307),d=t(41291),n=t(69669),c=t(77506),o=t(21405),m=t(48998),h=t(66697),x=t(3634),u=t(17972);function p(){let{health:e,loading:s,error:t,refreshHealth:p}=(0,u.QB)(),[g,f]=(0,r.useState)(!1),j=async()=>{f(!0),await p(),setTimeout(()=>f(!1),500)},v=e=>({Database:"Database",Redis:"Redis Cache","Celery broker":"Background Jobs","Celery result backend":"Task Results",Vault:"Secrets Vault"})[e]||e,y=e?.services.map(e=>({name:v(e.name),status:e.status,uptime:e.uptime||0,responseTime:e.responseTime||0,lastCheck:e.lastCheck||"just now",message:e.message}))||[],N=e=>{switch(e){case"healthy":return(0,a.jsx)(l.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400"});case"degraded":return(0,a.jsx)(d.Z,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"});case"unhealthy":return(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-600 dark:text-red-400"});default:return(0,a.jsx)(d.Z,{className:"h-5 w-5 text-muted-foreground"})}},w=y.filter(e=>"healthy"===e.status).length,b=y.filter(e=>"degraded"===e.status).length,k=y.filter(e=>"unhealthy"===e.status).length;return s&&!e?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-sky-500"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading health data..."})]})}):t&&!e?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(i.Card,{className:"max-w-md",children:(0,a.jsx)(i.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Failed to Load Health Data"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:t}),(0,a.jsxs)(i.Button,{onClick:j,children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"System Health"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Monitor service status and system metrics (Live Data)"}),e?.timestamp&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Last updated: ",new Date(e.timestamp).toLocaleTimeString()]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(i.Button,{onClick:j,disabled:g||s,size:"sm",children:[(0,a.jsx)(o.Z,{className:`h-4 w-4 mr-2 ${g||s?"animate-spin":""}`}),"Refresh"]})})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Overall System Status"})}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[e?.healthy?(0,a.jsx)(l.Z,{className:"h-12 w-12 text-green-600 dark:text-green-400"}):k>0?(0,a.jsx)(n.Z,{className:"h-12 w-12 text-red-600 dark:text-red-400"}):(0,a.jsx)(d.Z,{className:"h-12 w-12 text-yellow-600 dark:text-yellow-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e?.healthy?"All Systems Operational":k>0?"Critical Issues":"Degraded Performance"}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[w," healthy, ",b," degraded, ",k," ","unhealthy"]}),e?.failed_services&&e.failed_services.length>0&&(0,a.jsxs)("div",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:["Failed: ",e.failed_services.join(", ")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:w}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Healthy"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:b}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Degraded"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:k}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Unhealthy"})]})]})]})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(e=>(0,a.jsx)(i.Card,{children:(0,a.jsxs)(i.CardContent,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[N(e.status),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),e.lastCheck]}),e.uptime>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),e.uptime,"% uptime"]}),e.responseTime>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3"}),e.responseTime,"ms"]})]})]})]}),(0,a.jsx)(i.Badge,{variant:"healthy"===e.status?"default":"degraded"===e.status?"secondary":"destructive",children:e.status})]}),e.uptime>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Uptime"}),(0,a.jsxs)("span",{children:[e.uptime,"%"]})]}),(0,a.jsx)(i.Progress,{value:e.uptime,className:"h-2"})]}),e.message&&(0,a.jsx)("div",{className:"mt-2 text-sm text-muted-foreground",children:e.message})]})},e.name))})]})}},17972:(e,s,t)=>{"use strict";t.d(s,{QB:()=>n});var a=t(48324),r=t(94464),i=t(59341),l=t(29771);let d={all:["health"],status:()=>[...d.all,"status"]},n=()=>{let e=(0,a.a)({queryKey:d.status(),queryFn:async()=>{try{let e=await i.x1.get("/ready");return function(e){let s=e.data;return s?.success&&s.data?s.data:s?.error?.message?{status:"degraded",healthy:!1,services:[],failed_services:[],timestamp:new Date().toISOString(),apiErrorMessage:s.error.message}:s?.services?s:{status:"unknown",healthy:!1,services:[],failed_services:[],timestamp:new Date().toISOString()}}(e)}catch(s){let e=r.default.isAxiosError(s)?s.response?.status:void 0;return l.k.error("Failed to fetch health data",s instanceof Error?s:Error(String(s))),{status:403===e?"forbidden":"degraded",healthy:!1,services:[],failed_services:[],timestamp:new Date().toISOString()}}},staleTime:1e4,refetchInterval:3e4,refetchOnWindowFocus:!0,retry:2}),s=e.data?.apiErrorMessage||(e.data?.status==="forbidden"?"You do not have permission to view service health.":e.data?.status==="degraded"?"Service health is temporarily unavailable.":null);return{...e,loading:e.isLoading,health:e.data??null,error:s,refreshHealth:e.refetch}}},15274:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/infrastructure/health/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(86862));module.exports=a})();