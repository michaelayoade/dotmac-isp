(()=>{var e={};e.id=3129,e.ids=[3129],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},73566:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>c}),r(81098),r(13321),r(46366),r(96560);var t=r(23191),a=r(88716),i=r(37922),n=r.n(i),d=r(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let c=["",{children:["dashboard",{children:["diagnostics",{children:["runs",{children:["[runId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,81098)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/diagnostics/runs/[runId]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/diagnostics/runs/[runId]/page.tsx"],u="/dashboard/diagnostics/runs/[runId]/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/diagnostics/runs/[runId]/page",pathname:"/dashboard/diagnostics/runs/[runId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},72082:(e,s,r)=>{Promise.resolve().then(r.bind(r,49177))},49177:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>A});var t,a,i,n=r(10326),d=r(44976),l=r(48324),c=r(35047),o=r(48723),u=r(20892),m=r(93158),x=r(48998),h=r(77506),p=r(30361),g=r(69669),j=r(41291),b=r(18019),f=r(50949),v=r(61056),N=r(86333),C=r(21405),y=r(79635),_=r(66697),T=r(43810),w=r(51110),P=r(90434),D=r(34041),E=r(90960);(function(e){e.CONNECTIVITY_CHECK="connectivity_check",e.PING_TEST="ping_test",e.TRACEROUTE="traceroute",e.RADIUS_SESSION="radius_session",e.ONU_STATUS="onu_status",e.CPE_STATUS="cpe_status",e.IP_VERIFICATION="ip_verification",e.BANDWIDTH_TEST="bandwidth_test",e.LATENCY_TEST="latency_test",e.PACKET_LOSS_TEST="packet_loss_test",e.CPE_RESTART="cpe_restart",e.ONU_REBOOT="onu_reboot",e.HEALTH_CHECK="health_check",e.SERVICE_PATH_TRACE="service_path_trace"})(t||(t={})),function(e){e.PENDING="pending",e.RUNNING="running",e.COMPLETED="completed",e.FAILED="failed",e.TIMEOUT="timeout"}(a||(a={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error",e.CRITICAL="critical"}(i||(i={}));let I=e=>{let s={pending:{icon:x.Z,color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Pending",bannerColor:"bg-yellow-50 border-yellow-200"},running:{icon:h.Z,color:"bg-blue-100 text-blue-800 border-blue-200",label:"Running",bannerColor:"bg-blue-50 border-blue-200"},completed:{icon:p.Z,color:"bg-green-100 text-green-800 border-green-200",label:"Completed",bannerColor:"bg-green-50 border-green-200"},failed:{icon:g.Z,color:"bg-red-100 text-red-800 border-red-200",label:"Failed",bannerColor:"bg-red-50 border-red-200"},timeout:{icon:j.Z,color:"bg-orange-100 text-orange-800 border-orange-200",label:"Timeout",bannerColor:"bg-orange-50 border-orange-200"}};return s[e]||s.pending},S=e=>e?({info:{icon:b.Z,color:"bg-blue-100 text-blue-800",label:"Info"},warning:{icon:f.Z,color:"bg-yellow-100 text-yellow-800",label:"Warning"},error:{icon:g.Z,color:"bg-red-100 text-red-800",label:"Error"},critical:{icon:v.Z,color:"bg-red-600 text-white",label:"Critical"}})[e]:null,R=e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());function q(){let e=(0,c.useParams)();(0,c.useRouter)();let{toast:s}=(0,o.useToast)(),r=(0,d.NL)(),t=e.runId,{api:a}=(0,m.M)(),i=a.baseUrl||"",{data:u,isLoading:g}=(0,l.a)({queryKey:["diagnostic-run",t,i],queryFn:async()=>{let e=await fetch(`${i}/api/v1/diagnostics/runs/${t}`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch diagnostic run");return e.json()},refetchInterval:e=>!!e?.state?.data&&("running"===e.state.data.status||"pending"===e.state.data.status)&&5e3});if(g)return(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(h.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!u)return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)(j.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Diagnostic run not found"})]});let b=I(u.status),f=S(u.severity),v=b.icon;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(o.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,n.jsx)(P.default,{href:"/dashboard/diagnostics/history",children:(0,n.jsx)(N.Z,{className:"h-4 w-4"})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Diagnostic Run"}),(0,n.jsxs)(o.Badge,{className:b.color,children:[(0,n.jsx)(v,{className:`h-3 w-3 mr-1 ${"running"===u.status?"animate-spin":""}`}),b.label]})]}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:[R(u.diagnostic_type)," - ID: ",u.id.substring(0,8)]})]})]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(o.Button,{variant:"outline",size:"icon",onClick:()=>{r.invalidateQueries({queryKey:["diagnostic-run",t]}),s({title:"Refreshed",description:"Diagnostic run data has been refreshed"})},children:(0,n.jsx)(C.Z,{className:"h-4 w-4"})})})]}),(0,n.jsxs)("div",{className:`p-4 rounded-lg border ${b.bannerColor} flex items-start gap-3`,children:[(0,n.jsx)(v,{className:`h-5 w-5 mt-0.5 ${"running"===u.status?"animate-spin":""}`}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"font-medium",children:["running"===u.status&&"Diagnostic is currently running...","pending"===u.status&&"Diagnostic is pending execution...","completed"===u.status&&"Diagnostic completed successfully","failed"===u.status&&"Diagnostic failed","timeout"===u.status&&"Diagnostic timed out"]}),u.summary&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:u.summary})]}),f&&(0,n.jsxs)(o.Badge,{className:f.color,children:[(()=>{let e=f.icon;return(0,n.jsx)(e,{className:"h-3 w-3 mr-1"})})(),f.label]})]}),(0,n.jsxs)(o.Tabs,{defaultValue:"overview",className:"space-y-4",children:[(0,n.jsxs)(o.TabsList,{children:[(0,n.jsx)(o.TabsTrigger,{value:"overview",children:"Overview"}),(0,n.jsx)(o.TabsTrigger,{value:"results",children:"Results"}),(0,n.jsxs)(o.TabsTrigger,{value:"recommendations",children:["Recommendations",u.recommendations.length>0&&(0,n.jsx)(o.Badge,{variant:"secondary",className:"ml-2 h-5 px-1.5 text-xs",children:u.recommendations.length})]})]}),(0,n.jsxs)(o.TabsContent,{value:"overview",className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Diagnostic Details"})}),(0,n.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Diagnostic ID"}),(0,n.jsx)("div",{className:"font-mono font-medium",children:u.id})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Type"}),(0,n.jsx)("div",{className:"font-medium",children:R(u.diagnostic_type)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Status"}),(0,n.jsxs)(o.Badge,{className:b.color,children:[(0,n.jsx)(v,{className:`h-3 w-3 mr-1 ${"running"===u.status?"animate-spin":""}`}),b.label]})]}),u.severity&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Severity"}),f&&(0,n.jsxs)(o.Badge,{className:f.color,children:[(()=>{let e=f.icon;return(0,n.jsx)(e,{className:"h-3 w-3 mr-1"})})(),f.label]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Success"}),(0,n.jsx)("div",{className:"font-medium",children:u.success?"Yes":"No"})]})]})]}),(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Subscriber & Customer"})}),(0,n.jsxs)(o.CardContent,{className:"space-y-4",children:[u.subscriber_id&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4"}),"Subscriber ID"]}),(0,n.jsx)("div",{className:"font-mono font-medium",children:(0,n.jsx)(P.default,{href:`/dashboard/diagnostics/subscriber/${u.subscriber_id}`,className:"text-blue-600 hover:underline",children:u.subscriber_id})})]}),u.customer_id&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,n.jsx)(y.Z,{className:"h-4 w-4"}),"Customer ID"]}),(0,n.jsx)("div",{className:"font-mono font-medium",children:u.customer_id})]}),!u.subscriber_id&&!u.customer_id&&(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"No subscriber or customer information"})]})]})]}),(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Timing Information"})}),(0,n.jsx)(o.CardContent,{children:(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),"Started At"]}),u.started_at?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-medium",children:(0,D.WU)(new Date(u.started_at),"PPp")}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,E.Q)(new Date(u.started_at),{addSuffix:!0})})]}):(0,n.jsx)("div",{className:"font-medium",children:"Not started"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),"Completed At"]}),u.completed_at?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"font-medium",children:(0,D.WU)(new Date(u.completed_at),"PPp")}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,E.Q)(new Date(u.completed_at),{addSuffix:!0})})]}):(0,n.jsx)("div",{className:"font-medium",children:"Not completed"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4"}),"Duration"]}),(0,n.jsx)("div",{className:"font-medium",children:u.duration_ms?`${u.duration_ms}ms`:"N/A"})]})]})})]}),(u.summary||u.error_message)&&(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[u.summary&&(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Summary"})}),(0,n.jsx)(o.CardContent,{children:(0,n.jsx)("p",{className:"text-sm",children:u.summary})})]}),u.error_message&&(0,n.jsxs)(o.Card,{className:"border-red-200",children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{className:"text-red-600",children:"Error Message"})}),(0,n.jsx)(o.CardContent,{children:(0,n.jsx)("p",{className:"text-sm text-destructive",children:u.error_message})})]})]})]}),(0,n.jsx)(o.TabsContent,{value:"results",className:"space-y-4",children:(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(o.CardTitle,{children:"Diagnostic Results"}),(0,n.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{u?.results&&(navigator.clipboard.writeText(JSON.stringify(u.results,null,2)),s({title:"Success",description:"Results copied to clipboard"}))},children:[(0,n.jsx)(T.Z,{className:"h-4 w-4 mr-2"}),"Copy"]})]})}),(0,n.jsx)(o.CardContent,{children:0===Object.keys(u.results).length?(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No results available"}):(0,n.jsxs)("div",{className:"space-y-4",children:[(u.results.signal_level||u.results.session_count||u.results.latency||u.results.packet_loss)&&(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-4",children:[u.results.signal_level&&(0,n.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Signal Level"}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:u.results.signal_level})]}),void 0!==u.results.session_count&&(0,n.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sessions"}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:u.results.session_count})]}),u.results.latency&&(0,n.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Latency"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[u.results.latency,"ms"]})]}),void 0!==u.results.packet_loss&&(0,n.jsxs)("div",{className:"p-3 border rounded-lg",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Packet Loss"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[u.results.packet_loss,"%"]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:"Full Results"}),(0,n.jsx)("pre",{className:"p-4 bg-muted rounded-lg text-xs overflow-auto max-h-96 border",children:JSON.stringify(u.results,null,2)})]})]})})]})}),(0,n.jsx)(o.TabsContent,{value:"recommendations",className:"space-y-4",children:(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Recommendations"})}),(0,n.jsx)(o.CardContent,{children:0===u.recommendations.length?(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No recommendations available"}):(0,n.jsx)("div",{className:"space-y-3",children:u.recommendations.map((e,s)=>(0,n.jsx)("div",{className:"p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:(0,n.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)("h4",{className:"font-medium",children:e.title}),(0,n.jsx)(o.Badge,{variant:"high"===e.priority||"critical"===e.priority?"destructive":"medium"===e.priority?"default":"secondary",children:e.priority})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})})},s))})})]})})]}),u.subscriber_id&&(0,n.jsxs)(o.Card,{children:[(0,n.jsx)(o.CardHeader,{children:(0,n.jsx)(o.CardTitle,{children:"Quick Actions"})}),(0,n.jsx)(o.CardContent,{children:(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)(o.Button,{variant:"outline",asChild:!0,children:(0,n.jsxs)(P.default,{href:`/dashboard/diagnostics/subscriber/${u.subscriber_id}`,children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 mr-2"}),"View Subscriber Diagnostics"]})})})})]})]})}function A(){return(0,n.jsx)(u.eu,{permission:"isp.diagnostics.read",children:(0,n.jsx)(q,{})})}},81098:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/diagnostics/runs/[runId]/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[2793,1009,6226,657,6032,4218],()=>r(73566));module.exports=t})();