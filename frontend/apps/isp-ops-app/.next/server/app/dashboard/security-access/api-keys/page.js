(()=>{var e={};e.id=3981,e.ids=[3981],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},33553:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(10475),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["security-access",{children:["api-keys",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,10475)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/security-access/api-keys/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/security-access/api-keys/page.tsx"],x="/dashboard/security-access/api-keys/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/security-access/api-keys/page",pathname:"/dashboard/security-access/api-keys",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},68579:(e,s,t)=>{Promise.resolve().then(t.bind(t,84358))},84358:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(10326),r=t(17577),i=t(76828),l=t(83855),n=t(88307),d=t(20892),o=t(44976),c=t(48324),x=t(17010),m=t(59341),p=t(29771);let u={all:["api-keys"],lists:()=>[...u.all,"list"],list:(e,s)=>[...u.lists(),{page:e,limit:s}],scopes:()=>[...u.all,"scopes"]},h=(e,s)=>{let t=new URLSearchParams;return t.append("page",e.toString()),t.append("limit",s.toString()),t.toString()},y=(e,s,t)=>({apiKeys:e?.api_keys??[],total:e?.total??e?.api_keys?.length??0,page:e?.page??s,limit:e?.limit??t}),g=(e,s)=>{if("string"==typeof e)return e;let t=e?.response?.data;return"string"==typeof t?.detail?t.detail:"string"==typeof t?.error?.message?t.error.message:e instanceof Error&&e.message?e.message:s};function j(e={}){let s=(0,o.NL)(),[t,a]=(0,r.useState)([]),[i,l]=(0,r.useState)({}),n=e.page??1,d=e.limit??50,j=async(e,s)=>{let t=h(e,s);try{let a=await m.x1.get(`/auth/api-keys?${t}`);return y(a.data,e,s)}catch(s){let e=g(s,"Failed to fetch API keys");throw p.k.error("Failed to fetch API keys",s instanceof Error?s:Error(String(s))),Error(e)}},f=(0,c.a)({queryKey:u.list(n,d),queryFn:()=>j(n,d),staleTime:3e4,refetchOnWindowFocus:!1}),b=(0,c.a)({queryKey:u.scopes(),queryFn:async()=>{try{return(await m.x1.get("/auth/api-keys/scopes/available")).data||{}}catch(e){return p.k.error("Failed to fetch available scopes",e instanceof Error?e:Error(String(e))),console.error(e),{}}},staleTime:3e5,refetchOnWindowFocus:!1}),v=(0,x.D)({mutationFn:async e=>(await m.x1.post("/auth/api-keys",e)).data,onSuccess:e=>{s.setQueryData(u.list(n,d),s=>{let t=s??y(void 0,n,d);return{...t,apiKeys:[e,...t.apiKeys],total:t.total+1}}),s.invalidateQueries({queryKey:u.lists()}),a(s=>[e,...s])},onError:e=>{p.k.error("Failed to create API key",e instanceof Error?e:Error(String(e)))}}),w=(0,x.D)({mutationFn:async({id:e,data:s})=>(await m.x1.patch(`/auth/api-keys/${e}`,s)).data,onSuccess:e=>{s.setQueryData(u.list(n,d),s=>s?{...s,apiKeys:s.apiKeys.map(s=>s.id===e.id?e:s)}:s),s.invalidateQueries({queryKey:u.lists()}),a(s=>s.map(s=>s.id===e.id?e:s))},onError:e=>{p.k.error("Failed to update API key",e instanceof Error?e:Error(String(e)))}}),N=(0,x.D)({mutationFn:async e=>{await m.x1.delete(`/auth/api-keys/${e}`)},onSuccess:(e,t)=>{s.setQueryData(u.list(n,d),e=>e?{...e,apiKeys:e.apiKeys.filter(e=>e.id!==t),total:Math.max(0,e.total-1)}:e),s.invalidateQueries({queryKey:u.lists()}),a(e=>e.filter(e=>e.id!==t))},onError:e=>{p.k.error("Failed to revoke API key",e instanceof Error?e:Error(String(e)))}}),k=async(e,t)=>{let a=e??n,r=t??d,i=await j(a,r);s.setQueryData(u.list(a,r),i)},P=async()=>{let e=await b.refetch().catch(()=>({data:void 0})),s=(e&&e.data)??{};return l(s),s},A=f.data??y(void 0,n,d),_=f.data?.apiKeys??t,C=b.data??i,K=f.error instanceof Error?f.error.message:null,E=v.isPending,T=w.isPending,S=N.isPending,q=f.isLoading,I=b.isLoading;return{apiKeys:_,availableScopes:C,total:A.total,page:A.page,limit:A.limit,loading:q||I||E||T||S,error:K,isLoadingKeys:q,isLoadingScopes:I,isCreating:E,isUpdating:T,isRevoking:S,fetchApiKeys:k,createApiKey:v.mutateAsync,updateApiKey:async(e,s)=>w.mutateAsync({id:e,data:s}),revokeApiKey:N.mutateAsync,getAvailableScopes:P}}var f=t(75731);function b(e){let{createApiKey:s,updateApiKey:t,getAvailableScopes:r}=j();return(0,a.jsx)(f.CreateApiKeyModal,{...e,onApiKeyCreated:()=>{p.k.info("API key created/updated successfully"),e.onApiKeyCreated()},createApiKey:s,updateApiKey:t,getAvailableScopes:r})}var v=t(50949),w=t(30361),N=t(69508),k=t(98091),P=t(94019),A=t(32933),_=t(43810),C=t(58038),K=t(37358),E=t(48998),T=t(66697),S=t(12714);function q({apiKey:e,onClose:s,onEdit:t,onRevoke:l}){let[n,d]=(0,r.useState)(!1),o=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=async e=>{try{await navigator.clipboard.writeText(e),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){p.k.error("Failed to copy to clipboard",e instanceof Error?e:Error(String(e)))}},x=()=>{if(!e.is_active)return"text-red-400 bg-red-500/20 border-red-500/30";let s=new Date,t=e.expires_at?new Date(e.expires_at):null;return t&&t<s?"text-red-400 bg-red-500/20 border-red-500/30":t&&t.getTime()-s.getTime()<6048e5?"text-yellow-400 bg-yellow-500/20 border-yellow-500/30":"text-green-400 bg-green-500/20 border-green-500/30"},m=()=>{if(!e.is_active)return"Inactive";let s=new Date,t=e.expires_at?new Date(e.expires_at):null;return t&&t<s?"Expired":t&&t.getTime()-s.getTime()<6048e5?"Expiring Soon":"Active"},u=(()=>{if(!e.is_active)return v.Z;let s=new Date,t=e.expires_at?new Date(e.expires_at):null;return t&&t<s?v.Z:w.Z})();return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,a.jsxs)("div",{className:"bg-slate-900 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6 text-sky-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,a.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium border ${x()}`,children:[(0,a.jsx)(u,{className:"h-3 w-3"}),m()]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg transition-colors",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),"Edit"]}),(0,a.jsxs)("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Revoke"]}),(0,a.jsx)("button",{onClick:s,className:"text-slate-400 hover:text-white transition-colors p-2",children:(0,a.jsx)(P.Z,{className:"h-6 w-6"})})]})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"API Key"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 font-mono text-sm bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-slate-300",children:e.key_preview}),(0,a.jsxs)("button",{onClick:()=>c(e.key_preview),className:"flex items-center gap-2 px-3 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors",children:[n?(0,a.jsx)(A.Z,{className:"h-4 w-4"}):(0,a.jsx)(_.Z,{className:"h-4 w-4"}),n?"Copied!":"Copy"]})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"This is a masked preview. The full key was only shown when created."})]}),e.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-slate-300 text-sm bg-slate-800 rounded-lg p-3",children:e.description})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-300 mb-3",children:"Permissions"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.scopes.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium bg-sky-500/20 text-sky-400 border border-sky-500/30",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3"}),e]},e))}),0===e.scopes.length&&(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No scopes assigned"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:[(0,a.jsx)(K.Z,{className:"h-4 w-4"}),"Created"]}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:o(e.created_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4"}),"Expires"]}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:e.expires_at?o(e.expires_at):"Never"})]}),e.last_used_at&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Last Used"]}),(0,a.jsx)("p",{className:"text-slate-300 text-sm",children:o(e.last_used_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-slate-300 mb-2 flex items-center gap-2",children:[(0,a.jsx)(S.Z,{className:"h-4 w-4"}),"Status"]}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${x()}`,children:[(0,a.jsx)(u,{className:"h-3 w-3"}),m()]})]})]}),e.expires_at&&(()=>{let s=new Date,t=Math.ceil((new Date(e.expires_at).getTime()-s.getTime())/864e5);return t<=0?(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-red-400",children:"API Key Expired"}),(0,a.jsxs)("p",{className:"text-sm text-slate-300 mt-1",children:["This API key expired on ",o(e.expires_at),". It will no longer work for API requests."]})]})]})}):t<=7?(0,a.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-400",children:"API Key Expiring Soon"}),(0,a.jsxs)("p",{className:"text-sm text-slate-300 mt-1",children:["This API key will expire in ",t," day",1!==t?"s":""," on ",o(e.expires_at),"."]})]})]})}):null})(),(0,a.jsx)("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(C.Z,{className:"h-5 w-5 text-slate-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-slate-300",children:"Security Best Practices"}),(0,a.jsxs)("ul",{className:"text-sm text-slate-400 mt-2 space-y-1",children:[(0,a.jsx)("li",{children:"• Keep your API keys secure and never share them publicly"}),(0,a.jsx)("li",{children:"• Rotate your keys regularly, especially for production use"}),(0,a.jsx)("li",{children:"• Use the minimum required scopes for your application"}),(0,a.jsx)("li",{children:"• Monitor your key usage and revoke unused keys"})]})]})]})})]})]})})}var I=t(77506);function D({apiKey:e,onClose:s,onConfirm:t}){let[i,l]=(0,r.useState)(!1),[n,d]=(0,r.useState)(""),o=async()=>{if("REVOKE"===n){l(!0);try{await t()}catch(e){console.error("Failed to revoke API key:",e)}finally{l(!1)}}},c="REVOKE"===n;return(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&s()},children:(0,a.jsxs)("div",{className:"bg-slate-900 rounded-lg shadow-xl w-full max-w-md",children:[(0,a.jsx)("div",{className:"p-6 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-red-500/20 rounded-full",children:(0,a.jsx)(v.Z,{className:"h-5 w-5 text-red-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Revoke API Key"})]}),(0,a.jsx)("button",{onClick:s,className:"text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(P.Z,{className:"h-6 w-6"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-red-400",children:"Permanent Action"}),(0,a.jsx)("p",{className:"text-sm text-slate-300 mt-1",children:"This action cannot be undone. The API key will be immediately invalidated and any applications using it will lose access."})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"API Key to Revoke"}),(0,a.jsxs)("div",{className:"bg-slate-800 rounded-lg p-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-white",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-slate-400 font-mono",children:e.key_preview})]})}),e.description&&(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-2",children:e.description})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Affected Permissions"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.scopes.map(e=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-500/20 text-red-400 border border-red-500/30",children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Type ",(0,a.jsx)("code",{className:"px-1 py-0.5 bg-slate-800 rounded text-red-400",children:"REVOKE"})," to confirm"]}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>d(e.target.value),placeholder:"Type REVOKE to confirm",className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-red-500",autoComplete:"off"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-700",children:[(0,a.jsx)("button",{type:"button",onClick:s,disabled:i,className:"px-4 py-2 text-slate-400 hover:text-white transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:o,disabled:i||!c,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-600/50 text-white rounded-lg transition-colors",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 animate-spin"}),"Revoking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Revoke API Key"]})})]})]})})}var Z=t(48723),F=t(34041);function R(){let{apiKeys:e,loading:s,error:t,revokeApiKey:o}=j(),[c,x]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[y,g]=(0,r.useState)(""),f=(0,r.useMemo)(()=>{if(!y.trim())return e;let s=y.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(s)||e.id.toLowerCase().includes(s)||(e.description||"").toLowerCase().includes(s))},[e,y]),v=e=>x(e),w=e=>p(e),N=async()=>{m&&(await o(m.id),p(null))};return(0,a.jsx)(d.eu,{permission:"security.manage",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"API Keys"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Issue and manage API keys bound to your tenant."})]})]}),(0,a.jsxs)(Z.Button,{onClick:()=>h(!0),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"New API Key"]})]}),(0,a.jsxs)(Z.Card,{children:[(0,a.jsxs)(Z.CardHeader,{className:"flex flex-row items-center justify-between gap-4 flex-wrap",children:[(0,a.jsx)(Z.CardTitle,{children:"Keys"}),(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)(n.Z,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(Z.Input,{placeholder:"Search keys...",value:y,onChange:e=>g(e.target.value),className:"pl-8"})]})]}),(0,a.jsx)(Z.CardContent,{children:s?(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading API keys..."}):t?(0,a.jsx)("div",{className:"text-destructive",children:"Failed to load API keys"}):0===f.length?(0,a.jsx)("div",{className:"text-muted-foreground",children:"No API keys found."}):(0,a.jsxs)(Z.Table,{children:[(0,a.jsx)(Z.TableHeader,{children:(0,a.jsxs)(Z.TableRow,{children:[(0,a.jsx)(Z.TableHead,{children:"Name"}),(0,a.jsx)(Z.TableHead,{children:"Key ID"}),(0,a.jsx)(Z.TableHead,{children:"Created"}),(0,a.jsx)(Z.TableHead,{children:"Status"}),(0,a.jsx)(Z.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(Z.TableBody,{children:f.map(e=>(0,a.jsxs)(Z.TableRow,{children:[(0,a.jsx)(Z.TableCell,{className:"font-medium",children:e.name}),(0,a.jsx)(Z.TableCell,{className:"text-muted-foreground",children:e.id}),(0,a.jsx)(Z.TableCell,{className:"text-muted-foreground",children:e.created_at?(0,F.WU)(new Date(e.created_at),"PP"):"—"}),(0,a.jsx)(Z.TableCell,{children:(0,a.jsx)(Z.Badge,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Disabled"})}),(0,a.jsxs)(Z.TableCell,{className:"text-right space-x-2",children:[(0,a.jsx)(Z.Button,{variant:"outline",size:"sm",onClick:()=>v(e),children:"View"}),(0,a.jsx)(Z.Button,{variant:"destructive",size:"sm",onClick:()=>w(e),children:"Revoke"})]})]},e.id))})]})})]}),u&&(0,a.jsx)(b,{onClose:()=>h(!1),onApiKeyCreated:()=>h(!1),editingApiKey:c}),c&&(0,a.jsx)(q,{apiKey:c,onClose:()=>x(null),onEdit:()=>h(!0),onRevoke:()=>w(c)}),m&&(0,a.jsx)(D,{apiKey:m,onClose:()=>p(null),onConfirm:N})]})})}},75731:()=>{throw Error('Module parse failed: Unexpected token (16:7)\nFile was processed with these loaders:\n * ./node_modules/next/dist/build/webpack/loaders/next-flight-client-module-loader.js\n * ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js\nYou may need an additional loader to handle the result of these loaders.\n| import { useState, useEffect } from "react";\n| \n> export interface APIKey {\n|   id: string;\n|   name: string;')},10475:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/security-access/api-keys/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(33553));module.exports=a})();