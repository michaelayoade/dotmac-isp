(()=>{var e={};e.id=6578,e.ids=[6578],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},7357:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>i}),r(99934),r(13321),r(46366),r(96560);var s=r(23191),a=r(88716),o=r(37922),l=r.n(o),d=r(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let i=["",{children:["dashboard",{children:["orchestration",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99934)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/orchestration/analytics/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/orchestration/analytics/page.tsx"],x="/dashboard/orchestration/analytics/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/orchestration/analytics/page",pathname:"/dashboard/orchestration/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},78488:(e,t,r)=>{Promise.resolve().then(r.bind(r,78763))},78763:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(10326),a=r(17577),o=r(17069),l=r(29163),d=r(31540),n=r(21405),i=r(66697),c=r(66307),x=r(48998),u=r(69669),m=r(76464),p=r(15096),h=r(57252);function g({title:e,value:t,subtitle:r,icon:a,trend:d,trendLabel:n}){return(0,s.jsxs)("div",{className:"rounded-lg border border-border bg-card p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"p-3 bg-muted rounded-lg",children:(0,s.jsx)(a,{className:"h-6 w-6 text-muted-foreground"})}),void 0!==d&&(0,s.jsxs)("div",{className:`flex items-center gap-1 ${d>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[d>=0?(0,s.jsx)(o.Z,{className:"h-4 w-4"}):(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[Math.abs(d).toFixed(1),"%"]})]})]}),(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e}),(0,s.jsx)("p",{className:"mt-2 text-3xl font-bold text-foreground",children:t}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:r}),n&&(0,s.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:n})]})}function f({stats:e}){let t=Object.entries(e?.by_type||{}),r=t.reduce((e,[t,r])=>e+r,0);return 0===r?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No workflow data available"}):(0,s.jsx)("div",{className:"space-y-4",children:t.sort((e,t)=>t[1]-e[1]).map(([e,t])=>{let a=t/r*100;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-foreground font-medium",children:e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),(0,s.jsxs)("span",{className:"text-muted-foreground",children:[t," (",a.toFixed(1),"%)"]})]}),(0,s.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-primary transition-all duration-500",style:{width:`${a}%`}})})]},e)})})}function b({stats:e}){let t=[{label:"Completed",value:e?.completed||0,color:"bg-green-500",textColor:"text-green-600 dark:text-green-400"},{label:"Failed",value:e?.failed||0,color:"bg-red-500",textColor:"text-red-600 dark:text-red-400"},{label:"Running",value:e?.running||0,color:"bg-blue-500",textColor:"text-blue-600 dark:text-blue-400"},{label:"Pending",value:e?.pending||0,color:"bg-gray-500",textColor:"text-gray-600 dark:text-gray-400"}],r=t.reduce((e,t)=>e+t.value,0);return 0===r?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No status data available"}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"relative w-48 h-48",children:t.map((e,t)=>{let a=e.value/r*100;return(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)("div",{className:`w-full h-full rounded-full ${e.color} opacity-${10*Math.floor(a/10)}`})},e.label)})})}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:t.map(e=>{let t=r>0?e.value/r*100:0;return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${e.color}`}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.label}),(0,s.jsx)("span",{className:`text-sm font-medium ${e.textColor}`,children:e.value})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.toFixed(1),"% of total"]})]})]},e.label)})})]})}function j({workflows:e}){let t=(0,a.useMemo)(()=>{let t=e.filter(e=>"completed"===e.status),r=e.filter(e=>"failed"===e.status),s=t.filter(e=>e.started_at&&e.completed_at).map(e=>{let t=new Date(e.started_at).getTime();return(new Date(e.completed_at).getTime()-t)/1e3}),a=s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0,o=s.length>0?Math.min(...s):0,l=s.length>0?Math.max(...s):0,d=[...s].sort((e,t)=>e-t);return{avgDuration:a,minDuration:o,maxDuration:l,p50:d.length>0?d[Math.floor(.5*d.length)]:0,p95:d.length>0?d[Math.floor(.95*d.length)]:0,p99:d.length>0?d[Math.floor(.99*d.length)]:0,successRate:t.length+r.length>0?t.length/(t.length+r.length)*100:0,totalCompleted:t.length,totalFailed:r.length}},[e]),r=e=>e<60?`${e.toFixed(1)}s`:e<3600?`${(e/60).toFixed(1)}m`:`${(e/3600).toFixed(1)}h`;return(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Duration"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:r(t.avgDuration)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Min Duration"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r(t.minDuration)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Max Duration"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r(t.maxDuration)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Success Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-foreground",children:[t.successRate.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"P50 (Median)"}),(0,s.jsx)("p",{className:"text-xl font-bold text-foreground",children:r(t.p50??0)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"P95"}),(0,s.jsx)("p",{className:"text-xl font-bold text-foreground",children:r(t.p95??0)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"P99"}),(0,s.jsx)("p",{className:"text-xl font-bold text-foreground",children:r(t.p99??0)})]}),(0,s.jsxs)("div",{className:"p-4 border border-border rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Executed"}),(0,s.jsx)("p",{className:"text-xl font-bold text-foreground",children:t.totalCompleted+t.totalFailed})]})]})}function w(){let[e,t]=(0,a.useState)("7d"),{data:r,isLoading:l,refetch:w}=(0,h.lv)(),{data:v,isLoading:N,refetch:y}=(0,h.D)({pageSize:100}),k=v?.workflows??[];return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Orchestration Analytics"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Performance metrics and workflow insights"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("select",{value:e,onChange:e=>t(e.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"24h",children:"Last 24 Hours"}),(0,s.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,s.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,s.jsx)("option",{value:"90d",children:"Last 90 Days"})]}),(0,s.jsxs)("button",{onClick:()=>{let t=new Blob([JSON.stringify({generated_at:new Date().toISOString(),time_range:e,summary:r,workflows:k.map(e=>({id:e.workflow_id,type:e.workflow_type,status:e.status,duration:e.started_at&&(e.completed_at||e.failed_at)?(new Date(e.completed_at||e.failed_at).getTime()-new Date(e.started_at).getTime())/1e3:null,started_at:e.started_at,completed_at:e.completed_at||e.failed_at}))},null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`orchestration-report-${new Date().toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(s)},className:"flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary/90 text-primary-foreground rounded-lg transition-colors",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),"Export Report"]}),(0,s.jsxs)("button",{onClick:()=>{w(),y()},className:"flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),"Refresh"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)(g,{title:"Total Workflows",value:r?.total||0,icon:i.Z,subtitle:"All time"}),(0,s.jsx)(g,{title:"Success Rate",value:`${r?.success_rate?.toFixed(1)||0}%`,icon:c.Z,trend:5.2,trendLabel:"vs previous period"}),(0,s.jsx)(g,{title:"Avg Duration",value:r?.avg_duration_seconds?`${r.avg_duration_seconds.toFixed(1)}s`:"N/A",icon:x.Z,trend:-12.3,trendLabel:"faster than previous"}),(0,s.jsx)(g,{title:"Failed Workflows",value:r?.failed||0,icon:u.Z,subtitle:`${((r?.failed||0)/(r?.total||1)*100).toFixed(1)}% failure rate`})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"border border-border rounded-lg p-6 bg-card",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5"}),"Workflows by Type"]})}),(0,s.jsx)(f,{stats:r})]}),(0,s.jsxs)("div",{className:"border border-border rounded-lg p-6 bg-card",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("h2",{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5"}),"Status Distribution"]})}),(0,s.jsx)(b,{stats:r})]})]}),(0,s.jsxs)("div",{className:"border border-border rounded-lg p-6 bg-card",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-6",children:"Performance Metrics"}),(0,s.jsx)(j,{workflows:k})]}),(0,s.jsxs)("div",{className:"border border-border rounded-lg p-6 bg-card",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Key Insights"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Performance Improving"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Average workflow duration decreased by 12.3% compared to the previous period"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-green-900 dark:text-green-100",children:"High Success Rate"}),(0,s.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:[r?.success_rate?.toFixed(1),"% of workflows completed successfully"]})]})]}),r&&r.failed>0&&(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Failed Workflows Detected"}),(0,s.jsxs)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:[r.failed," workflows failed. Review logs to identify common failure patterns."]})]})]})]})]})]})}},57252:(e,t,r)=>{"use strict";r.d(t,{D:()=>x,DW:()=>u,el:()=>p,lv:()=>c,zE:()=>m});var s=r(48324),a=r(44976),o=r(17010),l=r(59341),d=r(29771);let n={all:["orchestration"],stats:()=>[...n.all,"stats"],workflows:e=>[...n.all,"workflows",e],workflow:e=>[...n.all,"workflow",e]};function i(e){e.invalidateQueries({predicate:e=>{let t=e.queryKey;return t?.[0]==="orchestration"&&t?.[1]==="workflows"}})}function c(){return(0,s.a)({queryKey:n.stats(),queryFn:async()=>{try{return(await l.x1.get("orchestration/statistics")).data}catch(e){throw d.k.error("Failed to fetch orchestration stats",e),Error(e.response?.data?.detail||"Failed to fetch statistics")}},staleTime:3e4,refetchOnWindowFocus:!0})}function x(e={}){let{status:t,workflowType:r,page:a=1,pageSize:o=20,autoRefresh:i=!1,refreshInterval:c=5e3}=e;return(0,s.a)({queryKey:n.workflows({status:t,workflowType:r,page:a,pageSize:o}),queryFn:async()=>{try{let e={page:a,page_size:o};return t&&(e.status=t),r&&(e.workflow_type=r),(await l.x1.get("orchestration/workflows",{params:e})).data}catch(e){throw d.k.error("Failed to fetch workflows",e),Error(e.response?.data?.detail||"Failed to fetch workflows")}},staleTime:1e4,refetchInterval:!!i&&c,refetchOnWindowFocus:!0})}function u(e,t=!1){return(0,s.a)({queryKey:n.workflow(e??""),queryFn:async()=>{if(!e)return null;try{return(await l.x1.get(`/orchestration/workflows/${e}`)).data}catch(e){throw d.k.error("Failed to fetch workflow",e),Error(e.response?.data?.detail||"Failed to fetch workflow")}},enabled:!!e,staleTime:2e3,refetchInterval:e=>!!t&&!!e.state.data&&!["completed","failed","rolled_back","rollback_failed","timeout","compensated"].includes(e.state.data.status)&&2e3,refetchOnWindowFocus:!0})}function m(){let e=(0,a.NL)(),t=(0,o.D)({mutationFn:async e=>(await l.x1.post(`/orchestration/workflows/${e}/retry`),e),onSuccess:t=>{e.invalidateQueries({queryKey:n.workflow(t)}),i(e),e.invalidateQueries({queryKey:n.stats()})},onError:e=>{d.k.error("Failed to retry workflow",e)}});return{retryWorkflow:t.mutateAsync,loading:t.isPending,error:t.error?String(t.error):null}}function p(){let e=(0,a.NL)(),t=(0,o.D)({mutationFn:async e=>(await l.x1.post(`/orchestration/workflows/${e}/cancel`),e),onSuccess:t=>{e.invalidateQueries({queryKey:n.workflow(t)}),i(e),e.invalidateQueries({queryKey:n.stats()})},onError:e=>{d.k.error("Failed to cancel workflow",e)}});return{cancelWorkflow:t.mutateAsync,loading:t.isPending,error:t.error?String(t.error):null}}},99934:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/orchestration/analytics/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[2793,1009,6226,657,6032,4218],()=>r(7357));module.exports=s})();