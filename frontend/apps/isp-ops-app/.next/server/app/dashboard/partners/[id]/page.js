(()=>{var e={};e.id=7500,e.ids=[7500],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},64354:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>i}),t(67963),t(13321),t(46366),t(96560);var r=t(23191),a=t(88716),d=t(37922),l=t.n(d),n=t(95231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let i=["",{children:["dashboard",{children:["partners",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,67963)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/partners/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/partners/[id]/page.tsx"],m="/dashboard/partners/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/partners/[id]/page",pathname:"/dashboard/partners/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},32360:(e,s,t)=>{Promise.resolve().then(t.bind(t,35430))},35430:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j,dynamic:()=>b,dynamicParams:()=>f});var r=t(10326),a=t(17577),d=t(35047),l=t(78855),n=t(90434),o=t(29777),i=t(74975),c=t(94019),m=t(48723);function x({partnerId:e,tenantId:s}){let[t,d]=(0,a.useState)(!1),[n,o]=(0,a.useState)({first_name:"",last_name:"",email:"",phone:"",company_name:"",tier:"standard",service_address:"",billing_address:""}),[x,u]=(0,a.useState)("managed"),[p,g]=(0,a.useState)(),h=(0,l.qo)(),b=async t=>{t.preventDefault();try{let t={partnerId:e,customerData:n};x&&(t.engagementType=x),void 0!==p&&(t.customCommissionRate=p),s&&(t.tenantId=s);let r=await h.mutateAsync(t);alert(`Customer created successfully!
Customer ID: ${r.customer_id}
Quota remaining: ${r.quota_remaining}`),o({first_name:"",last_name:"",email:"",phone:"",company_name:"",tier:"standard",service_address:"",billing_address:""}),d(!1)}catch(e){alert(`Failed to create customer: ${e.message}`)}},f=(e,s)=>{o(t=>({...t,[e]:s}))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Customer Management"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Create and manage customers under this partner"})]}),!t&&(0,r.jsxs)(m.Button,{onClick:()=>d(!0),"aria-label":"Add new customer",children:[(0,r.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Add Customer"]})]}),t&&(0,r.jsxs)("div",{className:"bg-card p-6 rounded-lg border border-border",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-foreground",children:"New Customer"}),(0,r.jsx)("button",{onClick:()=>d(!1),className:"text-muted-foreground hover:text-foreground","aria-label":"Close form",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-foreground mb-1",children:["First Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"first_name",type:"text",value:n.first_name,onChange:e=>f("first_name",e.target.value),required:!0,className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-foreground mb-1",children:["Last Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"last_name",type:"text",value:n.last_name,onChange:e=>f("last_name",e.target.value),required:!0,className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-1",children:["Email ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"email",type:"email",value:n.email,onChange:e=>f("email",e.target.value),required:!0,className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground mb-1",children:"Phone"}),(0,r.jsx)("input",{id:"phone",type:"tel",value:n.phone,onChange:e=>f("phone",e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"company_name",className:"block text-sm font-medium text-foreground mb-1",children:"Company Name"}),(0,r.jsx)("input",{id:"company_name",type:"text",value:n.company_name,onChange:e=>f("company_name",e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"service_address",className:"block text-sm font-medium text-foreground mb-1",children:"Service Address"}),(0,r.jsx)("input",{id:"service_address",type:"text",value:n.service_address,onChange:e=>f("service_address",e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"billing_address",className:"block text-sm font-medium text-foreground mb-1",children:"Billing Address"}),(0,r.jsx)("input",{id:"billing_address",type:"text",value:n.billing_address,onChange:e=>f("billing_address",e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tier",className:"block text-sm font-medium text-foreground mb-1",children:"Customer Tier"}),(0,r.jsxs)("select",{id:"tier",value:n.tier,onChange:e=>f("tier",e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,r.jsx)("option",{value:"standard",children:"Standard"}),(0,r.jsx)("option",{value:"premium",children:"Premium"}),(0,r.jsx)("option",{value:"enterprise",children:"Enterprise"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"engagement_type",className:"block text-sm font-medium text-foreground mb-1",children:"Engagement Type"}),(0,r.jsxs)("select",{id:"engagement_type",value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,r.jsx)("option",{value:"managed",children:"Managed (Partner provides support)"}),(0,r.jsx)("option",{value:"referral",children:"Referral (Platform manages)"}),(0,r.jsx)("option",{value:"reseller",children:"Reseller (Hybrid)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"commission_rate",className:"block text-sm font-medium text-foreground mb-1",children:"Custom Commission Rate (%)"}),(0,r.jsx)("input",{id:"commission_rate",type:"number",min:"0",max:"100",step:"0.01",value:p??"",onChange:e=>g(e.target.value?parseFloat(e.target.value)/100:void 0),placeholder:"Leave empty to use partner's default rate",className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Optional: Override partner's default commission rate for this customer"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,r.jsx)(m.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,r.jsx)(m.Button,{type:"submit",disabled:h.isPending,children:h.isPending?"Creating...":"Create Customer"})]})]})]}),h.isError&&(0,r.jsxs)("div",{className:"bg-destructive/10 border border-destructive text-destructive p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Error creating customer"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:h.error?.message})]})]})}var u=t(48324);let p=t(36607).LM.api.baseUrl;async function g(e,s,t=1,r=20){let a=new URLSearchParams({partner_id:e,page:t.toString(),page_size:r.toString()});s&&a.append("status",s);let d=await fetch(`${p}/api/isp/v1/admin/partners/commissions?${a.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!d.ok)throw Error("Failed to fetch commissions");return d.json()}function h({partnerId:e}){let[s,t]=(0,a.useState)(""),[d,l]=(0,a.useState)(1),{data:n,isLoading:o,error:i}=(0,u.a)({queryKey:["partner-commissions",e,s,d],queryFn:()=>g(e,s,d)});if(o)return(0,r.jsx)("div",{className:"text-center py-8 text-slate-400",children:"Loading commissions..."});if(i)return(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-red-400",children:"Failed to load commissions"}),(0,r.jsx)("div",{className:"text-sm text-slate-500 mt-2",children:i.message})]});let c=n?.commissions||[],m=c.reduce((e,s)=>e+s.commission_amount,0),x=c.filter(e=>"pending"===e.status||"approved"===e.status).reduce((e,s)=>e+s.commission_amount,0),p=c.filter(e=>"paid"===e.status).reduce((e,s)=>e+s.commission_amount,0),h={pending:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",approved:"bg-blue-500/10 text-blue-400 border-blue-500/20",paid:"bg-green-500/10 text-green-400 border-green-500/20",disputed:"bg-red-500/10 text-red-400 border-red-500/20",cancelled:"bg-slate-500/10 text-slate-400 border-slate-500/20"};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[(0,r.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Total Commissions"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-white",children:["$",m.toLocaleString()]}),(0,r.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:[c.length," events"]})]}),(0,r.jsxs)("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[(0,r.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Pending"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-yellow-400",children:["$",x.toLocaleString()]}),(0,r.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Awaiting payment"})]}),(0,r.jsxs)("div",{className:"bg-slate-800 p-4 rounded-lg border border-slate-700",children:[(0,r.jsx)("div",{className:"text-sm text-slate-400 mb-1",children:"Paid"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:["$",p.toLocaleString()]}),(0,r.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"Completed"})]})]}),(0,r.jsx)("div",{className:"flex gap-4 items-center",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm text-slate-400 mb-2",children:"Filter by Status"}),(0,r.jsxs)("select",{value:s,onChange:e=>t(e.target.value),className:"w-full md:w-64 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"approved",children:"Approved"}),(0,r.jsx)("option",{value:"paid",children:"Paid"}),(0,r.jsx)("option",{value:"disputed",children:"Disputed"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})}),(0,r.jsx)("div",{className:"bg-slate-800 rounded-lg border border-slate-700 overflow-hidden",children:0===c.length?(0,r.jsx)("div",{className:"text-center py-12 text-slate-400",children:"No commissions found"}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-slate-900 border-b border-slate-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Rate"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Commission"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-400 uppercase tracking-wider",children:"Payment Date"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-700",children:c.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:new Date(e.event_date).toLocaleDateString()}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm text-slate-300",children:[e.customer_id.substring(0,8),"..."]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm text-white",children:["$",e.amount.toLocaleString()]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm text-slate-300",children:[(100*e.commission_rate).toFixed(2),"%"]}),(0,r.jsxs)("td",{className:"px-4 py-3 text-sm font-semibold text-white",children:["$",e.commission_amount.toLocaleString()]}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:`px-2 py-1 text-xs rounded border ${h[e.status]}`,children:e.status})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-slate-300",children:e.payment_date?new Date(e.payment_date).toLocaleDateString():"-"})]},e.id))})]})})}),n&&n.total>n.page_size&&(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"text-sm text-slate-400",children:["Showing ",(d-1)*n.page_size+1," to"," ",Math.min(d*n.page_size,n.total)," of ",n.total," commissions"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>l(d-1),disabled:1===d,className:"px-3 py-1 bg-slate-700 hover:bg-slate-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,r.jsx)("button",{onClick:()=>l(d+1),disabled:d*n.page_size>=n.total,className:"px-3 py-1 bg-slate-700 hover:bg-slate-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}let b="force-dynamic",f=!0;function j(){let e=(0,d.useParams)().id,{data:s,isLoading:t,error:i}=(0,l.Kg)(e),[c,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)("overview"),g=(0,l.Jb)(),[b,f]=(0,a.useState)(null),j=async(s=1)=>{try{let t=await g.mutateAsync({partnerId:e,requestedLicenses:s});f(t)}catch(e){alert(`Failed to check quota: ${e.message}`)}};if(t)return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"Loading partner details..."})})});if(i||!s)return(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-red-400",children:"Failed to load partner details"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground mt-2",children:i?.message||"Partner not found"}),(0,r.jsx)(n.default,{href:"/dashboard/partners",className:"mt-4 inline-block px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Back to Partners"})]})});let v=s.total_commissions_earned-s.total_commissions_paid,N=s.total_referrals>0?(s.converted_referrals/s.total_referrals*100).toFixed(1):"0.0";return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(n.default,{href:"/dashboard/partners",className:"text-muted-foreground hover:text-foreground transition-colors",children:"â† Back"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:s.company_name}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Partner #",s.partner_number]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.default,{href:"/dashboard/partners/revenue",className:"px-4 py-2 bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white rounded-lg transition-colors",children:"View Revenue Dashboard"}),(0,r.jsx)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg transition-colors",children:"Edit Partner"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,r.jsx)("span",{className:`px-3 py-1 text-sm rounded border ${{pending:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",active:"bg-green-500/10 text-green-400 border-green-500/20",suspended:"bg-orange-500/10 text-orange-400 border-orange-500/20",terminated:"bg-red-500/10 text-red-400 border-red-500/20",archived:"bg-card0/10 text-muted-foreground border-border"}[s.status]}`,children:s.status}),(0,r.jsxs)("span",{className:`px-3 py-1 text-sm rounded ${{bronze:"bg-amber-700/10 text-amber-400",silver:"bg-muted/10 text-muted-foreground",gold:"bg-yellow-500/10 text-yellow-400",platinum:"bg-purple-500/10 text-purple-400",direct:"bg-blue-500/10 text-blue-400"}[s.tier]}`,children:[s.tier," tier"]}),(0,r.jsx)("span",{className:"px-3 py-1 text-sm rounded bg-blue-500/10 text-blue-400",children:s.commission_model.replace("_"," ")})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-accent p-4 rounded-lg border border-border",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Customers"}),(0,r.jsx)("div",{className:"text-2xl font-bold text-foreground",children:s.total_customers})]}),(0,r.jsxs)("div",{className:"bg-accent p-4 rounded-lg border border-border",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Revenue"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:["$",s.total_revenue_generated.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-accent p-4 rounded-lg border border-border",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Pending Commissions"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:["$",v.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"bg-accent p-4 rounded-lg border border-border",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Referral Conversion"}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[N,"%"]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[s.converted_referrals,"/",s.total_referrals]})]})]}),(0,r.jsx)("div",{className:"border-b border-border mb-6",children:(0,r.jsx)("div",{className:"flex gap-6",children:[{id:"overview",label:"Overview"},{id:"customers",label:"Customers"},{id:"commissions",label:"Commissions"},{id:"quota",label:"License Quota"},{id:"referrals",label:"Referrals"}].map(e=>(0,r.jsx)("button",{onClick:()=>p(e.id),className:`pb-3 px-1 border-b-2 transition-colors ${u===e.id?"border-blue-600 dark:border-blue-400 text-foreground":"border-transparent text-muted-foreground hover:text-foreground"}`,children:e.label},e.id))})}),(0,r.jsxs)("div",{className:"space-y-6",children:["overview"===u&&(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Contact Information"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[s.legal_name&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Legal Name:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.legal_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Primary Email:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.primary_email})]}),s.billing_email&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Billing Email:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.billing_email})]}),s.phone&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Phone:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.phone})]}),s.website&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Website:"}),(0,r.jsx)("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:s.website})]})]})]}),(0,r.jsxs)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Commission Details"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Model:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground capitalize",children:s.commission_model.replace("_"," ")})]}),s.default_commission_rate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Default Rate:"}),(0,r.jsxs)("span",{className:"ml-2 text-foreground",children:[(100*s.default_commission_rate).toFixed(2),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Earned:"}),(0,r.jsxs)("span",{className:"ml-2 text-foreground",children:["$",s.total_commissions_earned.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Paid:"}),(0,r.jsxs)("span",{className:"ml-2 text-foreground",children:["$",s.total_commissions_paid.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Pending:"}),(0,r.jsxs)("span",{className:"ml-2 text-yellow-600 dark:text-yellow-400",children:["$",v.toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Performance Metrics"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Referrals:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.total_referrals})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Converted Referrals:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:s.converted_referrals})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Conversion Rate:"}),(0,r.jsxs)("span",{className:"ml-2 text-green-600 dark:text-green-400",children:[N,"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Revenue Generated:"}),(0,r.jsxs)("span",{className:"ml-2 text-foreground",children:["$",s.total_revenue_generated.toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Account Details"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Last Updated:"}),(0,r.jsx)("span",{className:"ml-2 text-foreground",children:new Date(s.updated_at).toLocaleDateString()})]})]})]})]}),"customers"===u&&(0,r.jsx)(x,{partnerId:e}),"commissions"===u&&(0,r.jsx)(h,{partnerId:e}),"quota"===u&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"License Quota Check"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Check partner's available license quota before allocating licenses"}),(0,r.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-1",children:"Requested Licenses"}),(0,r.jsx)("input",{type:"number",min:"1",defaultValue:"1",id:"requested-licenses",className:"w-full px-3 py-2 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsx)("button",{onClick:()=>{j(parseInt(document.getElementById("requested-licenses").value||"1"))},disabled:g.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:g.isPending?"Checking...":"Check Quota"})]}),b&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-background rounded-lg border border-border",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Available"}),(0,r.jsx)("div",{className:`text-lg font-semibold ${b.available?"text-green-400":"text-red-400"}`,children:b.available?"Yes":"No"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Allocated"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-foreground",children:"unlimited"===b.quota_allocated?"Unlimited":b.quota_allocated})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Used"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-foreground",children:b.quota_used})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Remaining"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-yellow-400",children:b.is_unlimited?"Unlimited":b.quota_remaining})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-border",children:(0,r.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,r.jsxs)("p",{children:["Partner Status:"," ",(0,r.jsx)("span",{className:"text-foreground",children:b.partner_status})]}),(0,r.jsxs)("p",{children:["Partner Tier:"," ",(0,r.jsx)("span",{className:"text-foreground",children:b.partner_tier})]}),(0,r.jsxs)("p",{children:["Can Allocate:"," ",(0,r.jsx)("span",{className:b.can_allocate?"text-green-400":"text-red-400",children:b.can_allocate?"Yes":"No"})]}),(0,r.jsxs)("p",{children:["Checked At:"," ",(0,r.jsx)("span",{className:"text-foreground",children:new Date(b.checked_at).toLocaleString()})]})]})})]})]})}),"referrals"===u&&(0,r.jsx)("div",{className:"bg-accent p-6 rounded-lg border border-border",children:(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Referral management functionality coming soon"})})]}),c&&(0,r.jsx)(o.Z,{partner:s,onClose:()=>m(!1)})]})}},67963:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l,dynamic:()=>a,dynamicParams:()=>d});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/partners/[id]/page.tsx#dynamic`),d=(0,r.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/partners/[id]/page.tsx#dynamicParams`),l=(0,r.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/partners/[id]/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2793,1009,6226,657,6032,4218,9777],()=>t(64354));module.exports=r})();