(()=>{var e={};e.id=5619,e.ids=[5619],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},57030:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(55590),t(13321),t(46366),t(96560);var a=t(23191),i=t(88716),r=t(37922),l=t.n(r),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["dashboard",{children:["communications",{children:["templates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,55590)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/templates/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/templates/page.tsx"],m="/dashboard/communications/templates/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/communications/templates/page",pathname:"/dashboard/communications/templates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50331:(e,s,t)=>{Promise.resolve().then(t.bind(t,23702))},23702:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(10326),i=t(17577),r=t(90434),l=t(16996),n=t(48723),c=t(5932),d=t(40617),o=t(36283),m=t(41291),p=t(83855),u=t(88307),x=t(77506),h=t(12714),j=t(69508),g=t(98091),v=t(82671);function f(){let{toast:e}=(0,n.useToast)(),s=(0,l.$2)(),t=(0,n.useConfirmDialog)(),[f,b]=(0,i.useState)({page:1,page_size:20}),{data:N,isLoading:w,error:y}=(0,l.zE)(f),C=(e,s)=>{b(t=>({...t,[e]:s,page:1}))},_=async(a,i)=>{await t({title:"Delete template",description:`Are you sure you want to delete template "${i}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"})&&s.mutate(a,{onSuccess:()=>{e({title:"Template Deleted",description:`Template "${i}" has been deleted`})},onError:s=>{e({title:"Delete Failed",description:s.response?.data?.detail||"Failed to delete template",variant:"destructive"})}})},S=e=>{switch(e){case v.FB.EMAIL:return(0,a.jsx)(c.Z,{className:"h-4 w-4"});case v.FB.SMS:return(0,a.jsx)(d.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(o.Z,{className:"h-4 w-4"})}};return y?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(n.Alert,{variant:"destructive",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)(n.AlertDescription,{children:"Failed to load templates"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Email Templates"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Create and manage reusable communication templates"})]}),(0,a.jsx)(r.default,{href:"/dashboard/communications/templates/new",children:(0,a.jsxs)(n.Button,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Create Template"]})})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsx)(n.CardTitle,{children:"Filters"})}),(0,a.jsx)(n.CardContent,{children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Search"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Input,{placeholder:"Search templates...",value:f.search||"",onChange:e=>C("search",e.target.value),className:"pl-9"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Channel"}),(0,a.jsxs)(n.Select,{value:f.channel||"all",onValueChange:e=>C("channel","all"===e?void 0:e),children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"All Channels"}),(0,a.jsx)(n.SelectItem,{value:v.FB.EMAIL,children:"Email"}),(0,a.jsx)(n.SelectItem,{value:v.FB.SMS,children:"SMS"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Status"}),(0,a.jsxs)(n.Select,{value:void 0===f.is_active?"all":f.is_active?"active":"inactive",onValueChange:e=>C("is_active","all"===e?void 0:"active"===e),children:[(0,a.jsx)(n.SelectTrigger,{children:(0,a.jsx)(n.SelectValue,{})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"All"}),(0,a.jsx)(n.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(n.SelectItem,{value:"inactive",children:"Inactive"})]})]})]})]})})]}),w?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):N&&N.templates.length>0?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:N.templates.map(e=>(0,a.jsxs)(n.Card,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[S(e.channel),(0,a.jsx)(n.CardTitle,{className:"text-lg truncate",children:e.name})]}),e.description&&(0,a.jsx)(n.CardDescription,{className:"line-clamp-2",children:e.description})]}),(0,a.jsx)(n.Badge,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]})}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[e.subject&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Subject"}),(0,a.jsx)("p",{className:"text-sm font-medium line-clamp-1",children:e.subject})]}),e.variables&&e.variables.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Variables"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.variables.slice(0,5).map(e=>(0,a.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e.name},e.name)),e.variables.length>5&&(0,a.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:["+",e.variables.length-5]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t",children:[(0,a.jsxs)("span",{children:["Used ",e.usage_count," times"]}),e.last_used_at&&(0,a.jsx)("span",{children:(0,v.pi)(e.last_used_at)})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)(r.default,{href:`/dashboard/communications/templates/${e.id}`,className:"flex-1",children:(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"View"]})}),(0,a.jsx)(r.default,{href:`/dashboard/communications/templates/${e.id}/edit`,children:(0,a.jsx)(n.Button,{variant:"outline",size:"sm",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>_(e.id,e.name),disabled:s.isPending,children:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-red-500"})})]})]})]},e.id))}):(0,a.jsx)(n.Card,{children:(0,a.jsxs)(n.CardContent,{className:"flex flex-col items-center justify-center py-16",children:[(0,a.jsx)(o.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No templates found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4 text-center",children:f.search||f.channel||void 0!==f.is_active?"Try adjusting your filters":"Create your first template to get started"}),(0,a.jsx)(r.default,{href:"/dashboard/communications/templates/new",children:(0,a.jsxs)(n.Button,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Create Template"]})})]})}),N&&N.total>N.page_size&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(N.page-1)*N.page_size+1," to"," ",Math.min(N.page*N.page_size,N.total)," of ",N.total," templates"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Button,{variant:"outline",size:"sm",disabled:1===N.page,onClick:()=>C("page",N.page-1),children:"Previous"}),(0,a.jsx)(n.Button,{variant:"outline",size:"sm",disabled:N.page*N.page_size>=N.total,onClick:()=>C("page",N.page+1),children:"Next"})]})]})]})}},55590:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/templates/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218,6996],()=>t(57030));module.exports=a})();