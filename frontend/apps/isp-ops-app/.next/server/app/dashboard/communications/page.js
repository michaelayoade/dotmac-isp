(()=>{var e={};e.id=910,e.ids=[910],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},38801:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),t(61757),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["communications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,61757)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/page.tsx"],m="/dashboard/communications/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/communications/page",pathname:"/dashboard/communications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},25683:(e,s,t)=>{Promise.resolve().then(t.bind(t,15512))},15512:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(10326),r=t(17577),i=t(90434),l=t(16996),n=t(48723),d=t(77506),c=t(41291),o=t(21405),m=t(69436),x=t(5932),h=t(66307),u=t(12714),p=t(21066),j=t(66697),f=t(36283),g=t(17069),N=t(69669),b=t(24061),v=t(82671),C=t(20892);function y(){let{stats:e,health:s,recentLogs:t,metrics:C,isLoading:y,error:w}=(0,l.BG)(),[_,P]=(0,r.useState)(0);return y?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):w?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(n.Alert,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(n.AlertDescription,{children:"Failed to load communications dashboard"})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Communications"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage email, SMS, and messaging across your platform"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",onClick:()=>{P(e=>e+1)},children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,a.jsx)(i.default,{href:"/dashboard/communications/send",children:(0,a.jsxs)(n.Button,{children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Send Email"]})})]})]}),s&&!s.smtp_available&&(0,a.jsxs)(n.Alert,{variant:"destructive",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),(0,a.jsx)(n.AlertDescription,{children:"SMTP service is unavailable. Email sending is currently disabled."})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Total Sent"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e?.total_sent?.toLocaleString()||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Delivery rate: ",(0,v.og)(e?.delivery_rate||0)]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Delivered"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-green-500"})]}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e?.total_delivered?.toLocaleString()||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e?.total_sent?Math.round(e.total_delivered/e.total_sent*100):0,"% of total"]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Opened"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e?.total_opened?.toLocaleString()||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Open rate: ",(0,v.og)(e?.open_rate||0)]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Clicked"}),(0,a.jsx)(p.Z,{className:"h-4 w-4 text-purple-500"})]}),(0,a.jsxs)(n.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e?.total_clicked?.toLocaleString()||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Click rate: ",(0,v.og)(e?.click_rate||0)]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"System Health"]}),(0,a.jsx)(n.CardDescription,{children:"Communication service status"})]}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"SMTP Service"}),s?.smtp_available?(0,a.jsx)(n.Badge,{className:"bg-green-100 text-green-800",children:"Connected"}):(0,a.jsx)(n.Badge,{className:"bg-red-100 text-red-800",children:"Unavailable"})]}),s?.smtp_available&&s.smtp_host&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.smtp_host,":",s.smtp_port]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Redis Cache"}),s?.redis_available?(0,a.jsx)(n.Badge,{className:"bg-green-100 text-green-800",children:"Connected"}):(0,a.jsx)(n.Badge,{className:"bg-yellow-100 text-yellow-800",children:"Unavailable"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Celery Workers"}),s?.celery_available?(0,a.jsxs)(n.Badge,{className:"bg-green-100 text-green-800",children:[s.active_workers||0," Active"]}):(0,a.jsx)(n.Badge,{className:"bg-red-100 text-red-800",children:"Unavailable"})]}),s?.celery_available&&(0,a.jsxs)("div",{className:"pt-2 border-t space-y-1 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Pending tasks:"}),(0,a.jsx)("span",{children:s.pending_tasks||0})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Failed tasks:"}),(0,a.jsx)("span",{children:s.failed_tasks||0})]})]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),"Top Templates"]}),(0,a.jsx)(n.CardDescription,{children:"Most used email templates"})]}),(0,a.jsx)(n.CardContent,{children:C?.top_templates&&C.top_templates.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[C.top_templates.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:e.template_name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.usage_count," uses â€¢ ",e.success_rate.toFixed(1),"% success"]})]}),(0,a.jsx)(i.default,{href:`/dashboard/communications/templates/${e.template_id}`,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",children:"View"})})]},e.template_id)),(0,a.jsx)(i.default,{href:"/dashboard/communications/templates",children:(0,a.jsx)(n.Button,{variant:"outline",className:"w-full mt-2",children:"View All Templates"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No templates yet"}),(0,a.jsx)(i.default,{href:"/dashboard/communications/templates/new",children:(0,a.jsx)(n.Button,{variant:"outline",size:"sm",className:"mt-3",children:"Create Template"})})]})})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),"Recent Activity"]}),(0,a.jsx)(n.CardDescription,{children:"Latest communications sent"})]}),(0,a.jsx)(n.CardContent,{children:t&&t.length>0?(0,a.jsxs)("div",{className:"space-y-3",children:[t.map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between border-b pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(n.Badge,{className:(0,v.z2)(e.status),children:(0,v.rp)(e.status)}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.channel})]}),(0,a.jsxs)("p",{className:"text-sm font-medium truncate",children:["To: ",e.recipient_email||e.recipient_phone]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.subject}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,v.pi)(e.created_at)})]}),(0,a.jsx)(i.default,{href:`/dashboard/communications/history/${e.id}`,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",children:"Details"})})]},e.id)),(0,a.jsx)(i.default,{href:"/dashboard/communications/history",children:(0,a.jsx)(n.Button,{variant:"outline",className:"w-full mt-2",children:"View Full History"})})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No communications sent yet"}),(0,a.jsx)(i.default,{href:"/dashboard/communications/send",children:(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",className:"mt-3",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Send Your First Email"]})})]})})]}),C?.recent_failures&&C.recent_failures.length>0&&(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-red-500"}),"Recent Failures"]}),(0,a.jsx)(n.CardDescription,{children:"Communications that failed to send"})]}),(0,a.jsx)(n.CardContent,{children:(0,a.jsx)("div",{className:"space-y-3",children:C.recent_failures.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between border-b pb-3 last:border-0",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:e.recipient}),(0,a.jsx)("p",{className:"text-sm text-red-600 truncate",children:e.error_message}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:(0,v.pi)(e.failed_at)})]}),(0,a.jsx)(i.default,{href:`/dashboard/communications/history/${e.log_id}`,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",children:"Details"})})]},e.log_id))})})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{children:"Quick Actions"}),(0,a.jsx)(n.CardDescription,{children:"Common communication tasks"})]}),(0,a.jsx)(n.CardContent,{children:(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsx)(i.default,{href:"/dashboard/communications/send",children:(0,a.jsxs)(n.Button,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Send Email"]})}),(0,a.jsx)(i.default,{href:"/dashboard/communications/bulk",children:(0,a.jsxs)(n.Button,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Bulk Campaign"]})}),(0,a.jsx)(i.default,{href:"/dashboard/communications/templates/new",children:(0,a.jsxs)(n.Button,{variant:"outline",className:"w-full justify-start",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Create Template"]})})]})})]})]})}function w(){return(0,a.jsx)(C.eu,{permission:"communications.read",children:(0,a.jsx)(y,{})})}},61757:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/communications/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218,6996],()=>t(38801));module.exports=a})();