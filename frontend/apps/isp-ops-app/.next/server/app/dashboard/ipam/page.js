(()=>{var e={};e.id=3222,e.ids=[3222],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},40212:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c}),t(49520),t(13321),t(46366),t(96560);var a=t(23191),i=t(88716),r=t(37922),d=t.n(r),l=t(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["ipam",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,49520)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ipam/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ipam/page.tsx"],x="/dashboard/ipam/page",h={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/ipam/page",pathname:"/dashboard/ipam",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},14124:(e,s,t)=>{Promise.resolve().then(t.bind(t,47013))},47013:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(10326),i=t(17577),r=t(48723),d=t(61899),l=t(30361),n=t(69669),c=t(51110),o=t(54014),x=t(45091),h=t(58038),m=t(83855),p=t(88307),u=t(98091),j=t(66697),g=t(29771);function v(){let{toast:e}=(0,r.useToast)(),[s,t]=(0,i.useState)(""),[v,f]=(0,i.useState)(void 0),[N,b]=(0,i.useState)(!1),[C,P]=(0,i.useState)(!1),[y,I]=(0,i.useState)(!1),[D,w]=(0,i.useState)(!1),[A,L]=(0,i.useState)(!1),{data:S}=(0,d.X4)(),{data:V=[],isLoading:F}=(0,d.AD)({}),{data:T=[],isLoading:k}=(0,d.sY)({}),{data:_=[],isLoading:q}=(0,d.aQ)({}),{data:R=[],isLoading:B}=(0,d.mr)(),{data:E=[]}=(0,d.SB)(v),Z=(0,d.Wo)(),H=(0,d.Lt)(),M=(0,d.Rv)(),$=(0,d.IS)(),U=(0,d.j9)(),O=(0,d.nn)(),[G,W]=(0,i.useState)({address:"",status:"active",description:"",dns_name:""}),[z,X]=(0,i.useState)({prefix:"",status:"active",is_pool:!1,description:""}),[Q,Y]=(0,i.useState)({vid:1,name:"",status:"active",description:""}),[J,K]=(0,i.useState)({name:"",rd:"",enforce_unique:!0,description:""}),ee=V.filter(e=>e.address.toLowerCase().includes(s.toLowerCase())||e.dns_name?.toLowerCase().includes(s.toLowerCase())||e.description?.toLowerCase().includes(s.toLowerCase())),es={totalIPs:V.length,activeIPs:V.filter(e=>"active"===e.status.value).length,reservedIPs:V.filter(e=>"reserved"===e.status.value).length,totalPrefixes:T.length,totalVLANs:_.length,totalVRFs:R.length},et=e=>{if(!e.prefix)return 0;let[,s]=e.prefix.split("/");if(!s)return 0;let t=Math.pow(2,32-parseInt(s))-2,a=V.filter(s=>{if(!s.address||!e.prefix)return!1;let t=s.address.split("/")[0]??"",a=(e.prefix.split("/")[0]??"").split(".").slice(0,3).join(".");return a.length>0&&t.startsWith(a)}).length;return t>0?a/t*100:0},ea=e=>{let s="active"===e.value?"default":"reserved"===e.value?"secondary":"outline";return(0,a.jsx)(r.Badge,{variant:s,children:e.label})},ei=async()=>{if(!G.address){e({title:"Validation Error",description:"IP address is required",variant:"destructive"});return}if(!/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}$/.test(G.address)){e({title:"Validation Error",description:"Invalid IP address format. Use CIDR notation (e.g., 192.168.1.1/24)",variant:"destructive"});return}try{await Z.mutateAsync(G),g.k.info("IP address created",{address:G.address}),e({title:"Success",description:`IP address ${G.address} created successfully`}),b(!1),W({address:"",status:"active",description:"",dns_name:""})}catch(s){g.k.error("Failed to create IP address",s),e({title:"Error",description:"Failed to create IP address. Please try again.",variant:"destructive"})}},er=async()=>{if(!z.prefix){e({title:"Validation Error",description:"Prefix is required",variant:"destructive"});return}if(!/^(\d{1,3}\.){3}\d{1,3}\/\d{1,2}$/.test(z.prefix)){e({title:"Validation Error",description:"Invalid prefix format. Use CIDR notation (e.g., 10.0.0.0/24)",variant:"destructive"});return}try{await M.mutateAsync(z),g.k.info("Prefix created",{prefix:z.prefix}),e({title:"Success",description:`Prefix ${z.prefix} created successfully`}),P(!1),X({prefix:"",status:"active",is_pool:!1,description:""})}catch(s){g.k.error("Failed to create prefix",s),e({title:"Error",description:"Failed to create prefix. Please try again.",variant:"destructive"})}},ed=async()=>{if(!Q.name||Q.vid<1||Q.vid>4094){e({title:"Validation Error",description:"VLAN name is required and VLAN ID must be between 1 and 4094",variant:"destructive"});return}try{await $.mutateAsync(Q),g.k.info("VLAN created",{vlanId:Q.vid,name:Q.name}),e({title:"Success",description:`VLAN ${Q.vid} (${Q.name}) created successfully`}),I(!1),Y({vid:1,name:"",status:"active",description:""})}catch(s){g.k.error("Failed to create VLAN",s),e({title:"Error",description:"Failed to create VLAN. Please try again.",variant:"destructive"})}},el=async()=>{if(!J.name){e({title:"Validation Error",description:"VRF name is required",variant:"destructive"});return}try{await U.mutateAsync(J),g.k.info("VRF created",{vrfName:J.name}),e({title:"Success",description:`VRF ${J.name} created successfully`}),w(!1),K({name:"",rd:"",enforce_unique:!0,description:""})}catch(s){g.k.error("Failed to create VRF",s),e({title:"Error",description:"Failed to create VRF. Please try again.",variant:"destructive"})}},en=async(s,t)=>{if(v)try{await O.mutateAsync({prefixId:v,data:{description:s,dns_name:t}}),g.k.info("IP allocated from prefix",{prefixId:v,description:s}),e({title:"Success",description:"IP address allocated successfully"}),L(!1)}catch(s){g.k.error("Failed to allocate IP",s),e({title:"Error",description:"Failed to allocate IP address. Please try again.",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"IPAM"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"IP Address Management - Manage IP addresses, prefixes, VLANs, and VRFs"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:S&&(0,a.jsx)(r.Badge,{variant:S.healthy?"default":"destructive",children:S.healthy?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"h-3 w-3 mr-1"}),"NetBox Connected"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-3 w-3 mr-1"}),"NetBox Disconnected"]})})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total IP Addresses"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:es.totalIPs}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"text-green-600",children:[es.activeIPs," active"]})," â€¢ ",(0,a.jsxs)("span",{className:"text-yellow-600",children:[es.reservedIPs," reserved"]})]})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Prefixes"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:es.totalPrefixes}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"IP subnets managed"})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"VLANs"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:es.totalVLANs}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Virtual LANs configured"})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"VRFs"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:es.totalVRFs}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Virtual routing instances"})]})]})]}),(0,a.jsxs)(r.Tabs,{defaultValue:"ip-addresses",className:"space-y-4",children:[(0,a.jsxs)(r.TabsList,{children:[(0,a.jsx)(r.TabsTrigger,{value:"ip-addresses",children:"IP Addresses"}),(0,a.jsx)(r.TabsTrigger,{value:"prefixes",children:"Prefixes"}),(0,a.jsx)(r.TabsTrigger,{value:"vlans",children:"VLANs"}),(0,a.jsx)(r.TabsTrigger,{value:"vrfs",children:"VRFs"})]}),(0,a.jsx)(r.TabsContent,{value:"ip-addresses",className:"space-y-4",children:(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{children:"IP Addresses"}),(0,a.jsx)(r.CardDescription,{children:"Manage IP address assignments"})]}),(0,a.jsxs)(r.Dialog,{open:N,onOpenChange:b,children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Add IP Address"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsxs)(r.DialogHeader,{children:[(0,a.jsx)(r.DialogTitle,{children:"Create IP Address"}),(0,a.jsx)(r.DialogDescription,{children:"Add a new IP address to NetBox"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"ip-address",children:"IP Address (CIDR)"}),(0,a.jsx)(r.Input,{id:"ip-address",placeholder:"192.168.1.1/24",value:G.address,onChange:e=>W({...G,address:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"ip-status",children:"Status"}),(0,a.jsxs)(r.Select,{value:G.status||"active",onValueChange:e=>W({...G,status:e}),children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(r.SelectItem,{value:"reserved",children:"Reserved"}),(0,a.jsx)(r.SelectItem,{value:"dhcp",children:"DHCP"}),(0,a.jsx)(r.SelectItem,{value:"deprecated",children:"Deprecated"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"ip-dns",children:"DNS Name"}),(0,a.jsx)(r.Input,{id:"ip-dns",placeholder:"server.example.com",value:G.dns_name,onChange:e=>W({...G,dns_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"ip-description",children:"Description"}),(0,a.jsx)(r.Input,{id:"ip-description",placeholder:"Web server primary IP",value:G.description,onChange:e=>W({...G,description:e.target.value})})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:ei,disabled:Z.isPending,children:"Create IP"})]})]})]})]})}),(0,a.jsxs)(r.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(r.Input,{placeholder:"Search IP addresses, DNS names, descriptions...",value:s,onChange:e=>t(e.target.value),className:"pl-8"})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"IP Address"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Status"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"DNS Name"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"VRF"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Assigned To"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Description"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:F?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"h-24 text-center",children:"Loading IP addresses..."})}):0===ee.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"h-24 text-center",children:"No IP addresses found"})}):ee.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"p-4 font-mono text-xs font-medium",children:e.address}),(0,a.jsx)("td",{className:"p-4",children:ea(e.status)}),(0,a.jsx)("td",{className:"p-4",children:e.dns_name||"-"}),(0,a.jsx)("td",{className:"p-4",children:e.vrf?(0,a.jsx)(r.Badge,{variant:"outline",children:e.vrf.name}):"-"}),(0,a.jsx)("td",{className:"p-4",children:e.assigned_object?(0,a.jsx)("span",{className:"text-xs",children:e.assigned_object_type?.split(".")[1]}):"-"}),(0,a.jsx)("td",{className:"p-4 max-w-xs truncate",children:e.description||"-"}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>H.mutate(e.id),disabled:H.isPending,children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}),(0,a.jsx)(r.TabsContent,{value:"prefixes",className:"space-y-4",children:(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{children:"IP Prefixes"}),(0,a.jsx)(r.CardDescription,{children:"Manage IP subnets and allocation pools"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Dialog,{open:A,onOpenChange:L,children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"outline",disabled:!v,children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Allocate IP"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsxs)(r.DialogHeader,{children:[(0,a.jsx)(r.DialogTitle,{children:"Allocate IP Address"}),(0,a.jsx)(r.DialogDescription,{children:"Allocate next available IP from selected prefix"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[E.length>0&&(0,a.jsxs)("div",{className:"rounded-md bg-muted p-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Next Available IP:"}),(0,a.jsx)("p",{className:"text-lg font-mono",children:E[0]?.address})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{children:"Description"}),(0,a.jsx)(r.Input,{placeholder:"Web server",id:"alloc-description"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{children:"DNS Name"}),(0,a.jsx)(r.Input,{placeholder:"web01.example.com",id:"alloc-dns"})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:()=>{en(document.getElementById("alloc-description")?.value||"",document.getElementById("alloc-dns")?.value||"")},disabled:O.isPending||0===E.length,children:"Allocate"})]})]})]}),(0,a.jsxs)(r.Dialog,{open:C,onOpenChange:P,children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Add Prefix"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsxs)(r.DialogHeader,{children:[(0,a.jsx)(r.DialogTitle,{children:"Create Prefix"}),(0,a.jsx)(r.DialogDescription,{children:"Add a new IP prefix/subnet"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"prefix",children:"Prefix (CIDR)"}),(0,a.jsx)(r.Input,{id:"prefix",placeholder:"10.0.0.0/24",value:z.prefix,onChange:e=>X({...z,prefix:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"prefix-status",children:"Status"}),(0,a.jsxs)(r.Select,{value:z.status||"active",onValueChange:e=>X({...z,status:e}),children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(r.SelectItem,{value:"reserved",children:"Reserved"}),(0,a.jsx)(r.SelectItem,{value:"deprecated",children:"Deprecated"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"is-pool",checked:z.is_pool,onChange:e=>X({...z,is_pool:e.target.checked}),className:"h-4 w-4"}),(0,a.jsx)(r.Label,{htmlFor:"is-pool",children:"Mark as IP allocation pool"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"prefix-description",children:"Description"}),(0,a.jsx)(r.Input,{id:"prefix-description",placeholder:"Production network",value:z.description,onChange:e=>X({...z,description:e.target.value})})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:er,disabled:M.isPending,children:"Create Prefix"})]})]})]})]})]})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"space-y-4",children:k?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading prefixes..."}):0===T.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No prefixes configured"}):T.map(e=>{let s=et(e);return(0,a.jsxs)("div",{className:`rounded-lg border p-4 cursor-pointer transition-colors ${v===e.id?"border-primary bg-primary/5":"hover:bg-muted/50"}`,onClick:()=>f(e.id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg font-mono font-semibold",children:e.prefix}),ea(e.status),e.is_pool&&(0,a.jsxs)(r.Badge,{variant:"outline",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"Pool"]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-medium",children:[s.toFixed(1),"% utilized"]}),e.site&&(0,a.jsx)(r.Badge,{variant:"outline",className:"mt-1",children:e.site.name})]})]}),(0,a.jsx)("div",{className:"w-full bg-muted rounded-full h-2 mt-3",children:(0,a.jsx)("div",{className:`h-2 rounded-full transition-all ${s>80?"bg-red-500":s>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(s,100)}%`}})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[e.vlan&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"VLAN:"})," ",(0,a.jsxs)(r.Badge,{variant:"outline",children:[e.vlan.vid," - ",e.vlan.name]})]}),e.role&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Role:"})," ",e.role.name]})]})]},e.id)})})})]})}),(0,a.jsx)(r.TabsContent,{value:"vlans",className:"space-y-4",children:(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{children:"VLANs"}),(0,a.jsx)(r.CardDescription,{children:"Virtual LAN configuration"})]}),(0,a.jsxs)(r.Dialog,{open:y,onOpenChange:I,children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Add VLAN"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsxs)(r.DialogHeader,{children:[(0,a.jsx)(r.DialogTitle,{children:"Create VLAN"}),(0,a.jsx)(r.DialogDescription,{children:"Add a new VLAN configuration"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vlan-id",children:"VLAN ID (1-4094)"}),(0,a.jsx)(r.Input,{id:"vlan-id",type:"number",min:"1",max:"4094",value:Q.vid,onChange:e=>Y({...Q,vid:parseInt(e.target.value)})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vlan-name",children:"Name"}),(0,a.jsx)(r.Input,{id:"vlan-name",placeholder:"Production",value:Q.name,onChange:e=>Y({...Q,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vlan-status",children:"Status"}),(0,a.jsxs)(r.Select,{value:Q.status||"active",onValueChange:e=>Y({...Q,status:e}),children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(r.SelectItem,{value:"reserved",children:"Reserved"}),(0,a.jsx)(r.SelectItem,{value:"deprecated",children:"Deprecated"})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vlan-description",children:"Description"}),(0,a.jsx)(r.Input,{id:"vlan-description",placeholder:"Production network VLAN",value:Q.description,onChange:e=>Y({...Q,description:e.target.value})})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:ed,disabled:$.isPending,children:"Create VLAN"})]})]})]})]})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"VLAN ID"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Name"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Status"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Site"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Role"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Description"})]})}),(0,a.jsx)("tbody",{children:q?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"h-24 text-center",children:"Loading VLANs..."})}):0===_.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"h-24 text-center",children:"No VLANs configured"})}):_.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)(r.Badge,{variant:"outline",className:"font-mono",children:e.vid})}),(0,a.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,a.jsx)("td",{className:"p-4",children:ea(e.status)}),(0,a.jsx)("td",{className:"p-4",children:e.site?e.site.name:"-"}),(0,a.jsx)("td",{className:"p-4",children:e.role?e.role.name:"-"}),(0,a.jsx)("td",{className:"p-4",children:e.description||"-"})]},e.id))})]})})})]})}),(0,a.jsx)(r.TabsContent,{value:"vrfs",className:"space-y-4",children:(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.CardTitle,{children:"VRFs (Virtual Routing and Forwarding)"}),(0,a.jsx)(r.CardDescription,{children:"Virtual routing instances for multi-tenancy"})]}),(0,a.jsxs)(r.Dialog,{open:D,onOpenChange:w,children:[(0,a.jsx)(r.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Add VRF"]})}),(0,a.jsxs)(r.DialogContent,{children:[(0,a.jsxs)(r.DialogHeader,{children:[(0,a.jsx)(r.DialogTitle,{children:"Create VRF"}),(0,a.jsx)(r.DialogDescription,{children:"Add a new virtual routing instance"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vrf-name",children:"Name"}),(0,a.jsx)(r.Input,{id:"vrf-name",placeholder:"Customer-A",value:J.name,onChange:e=>K({...J,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vrf-rd",children:"Route Distinguisher"}),(0,a.jsx)(r.Input,{id:"vrf-rd",placeholder:"65000:100",value:J.rd,onChange:e=>K({...J,rd:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"enforce-unique",checked:J.enforce_unique,onChange:e=>K({...J,enforce_unique:e.target.checked}),className:"h-4 w-4"}),(0,a.jsx)(r.Label,{htmlFor:"enforce-unique",children:"Enforce unique IP addresses"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(r.Label,{htmlFor:"vrf-description",children:"Description"}),(0,a.jsx)(r.Input,{id:"vrf-description",placeholder:"Customer A routing instance",value:J.description,onChange:e=>K({...J,description:e.target.value})})]})]}),(0,a.jsxs)(r.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:el,disabled:U.isPending,children:"Create VRF"})]})]})]})]})}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Name"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Route Distinguisher"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Enforce Unique"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Tenant"}),(0,a.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium",children:"Description"})]})}),(0,a.jsx)("tbody",{children:B?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"h-24 text-center",children:"Loading VRFs..."})}):0===R.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"h-24 text-center",children:"No VRFs configured"})}):R.map(e=>(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("td",{className:"p-4 font-medium",children:e.name}),(0,a.jsx)("td",{className:"p-4 font-mono text-xs",children:e.rd||"-"}),(0,a.jsx)("td",{className:"p-4",children:e.enforce_unique?(0,a.jsx)(l.Z,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(n.Z,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("td",{className:"p-4",children:e.tenant?e.tenant.name:"-"}),(0,a.jsx)("td",{className:"p-4",children:e.description||"-"})]},e.id))})]})})})]})})]})]})}},49520:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ipam/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218,1899],()=>t(40212));module.exports=a})();