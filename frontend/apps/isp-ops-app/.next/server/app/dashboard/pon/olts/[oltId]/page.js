(()=>{var e={};e.id=7459,e.ids=[7459],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},53137:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),t(85995),t(13321),t(46366),t(96560);var r=t(23191),a=t(88716),d=t(37922),i=t.n(d),n=t(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let c=["",{children:["dashboard",{children:["pon",{children:["olts",{children:["[oltId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,85995)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/pon/olts/[oltId]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/pon/olts/[oltId]/page.tsx"],x="/dashboard/pon/olts/[oltId]/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/pon/olts/[oltId]/page",pathname:"/dashboard/pon/olts/[oltId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},47663:(e,s,t)=>{Promise.resolve().then(t.bind(t,86329))},86329:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(10326),a=t(17577),d=t(48324),i=t(48723),n=t(30361),l=t(50949),c=t(69669),o=t(21405),x=t(86333),m=t(3634),p=t(66697),h=t(59341),u=t(20892),j=t(90434),f=t(35047);let N={n_buffers:0,n_tables:0,capabilities:0};function g(e){return!e||e<=0?"N/A":e>=1e3?`${e/1e3} Gbps`:`${e} Mbps`}function v(){let e=(0,f.useParams)().oltId,[s,t]=(0,a.useState)("overview"),{data:u,isLoading:v,refetch:b}=(0,d.a)({queryKey:["access-logical-device",e],queryFn:async()=>(await h.x1.get(`/api/v1/access/logical-devices/${e}`)).data,refetchInterval:3e4}),{data:C}=(0,d.a)({queryKey:["access-olt-overview",e],queryFn:async()=>(await h.x1.get(`/api/v1/access/olts/${e}/overview`)).data,enabled:!!e,refetchInterval:6e4}),w=u?.device,y=u?.ports??[],_=u?.flows??[],P=w?.switch_features??N,D=w?.desc??{},T=y.filter(e=>e?.ofp_port?.state===0);if(v)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.Z,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading OLT details..."})]})});if(!w)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(c.Z,{className:"h-8 w-8 mx-auto mb-2 text-destructive"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"OLT not found"})]})});let A=function(e,s,t){let r=(t?.oper_status||"").toUpperCase(),a=(t?.connect_status||"").toUpperCase();return e>0||["ACTIVE","ENABLED","ONLINE"].includes(r)||"REACHABLE"===a?{label:"Online",color:"bg-green-100 text-green-800",icon:n.Z}:s>0&&0===e&&(["DEGRADED","RECONCILING","ACTIVATING"].includes(r)||"UNKNOWN"===a)?{label:"Degraded",color:"bg-amber-100 text-amber-800",icon:l.Z}:0!==s||t?{label:"Offline",color:"bg-red-100 text-red-800",icon:c.Z}:{label:"Unknown",color:"bg-muted text-muted-foreground",icon:l.Z}}(T.length,y.length,C);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(i.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,r.jsx)(j.default,{href:"/dashboard/pon/olts",children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"OLT Details"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:w.id})]})]}),(0,r.jsxs)(i.Button,{variant:"outline",onClick:()=>b(),children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{className:"pb-2",children:(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Status"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsxs)(i.Badge,{className:A.color,children:[(0,r.jsx)(A.icon,{className:"h-3 w-3 mr-1"}),A.label]})})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{className:"pb-2",children:(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Active Ports"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[T.length," / ",y.length]})})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{className:"pb-2",children:(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Active Flows"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:_.length})})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{className:"pb-2",children:(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Tables"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:P.n_tables})})]})]}),(0,r.jsxs)(i.Tabs,{value:s,onValueChange:e=>t(e),children:[(0,r.jsxs)(i.TabsList,{children:[(0,r.jsx)(i.TabsTrigger,{value:"overview",children:"Overview"}),(0,r.jsxs)(i.TabsTrigger,{value:"ports",children:["PON Ports (",y.length,")"]}),(0,r.jsxs)(i.TabsTrigger,{value:"flows",children:["Flows (",_.length,")"]})]}),(0,r.jsxs)(i.TabsContent,{value:"overview",className:"space-y-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Device Information"})}),(0,r.jsx)(i.CardContent,{className:"space-y-3",children:(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Logical Device ID"}),(0,r.jsx)("p",{className:"font-mono text-sm break-all",children:w.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Root Device ID"}),(0,r.jsx)("p",{className:"font-mono text-sm break-all",children:w.root_device_id||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Serial Number"}),(0,r.jsx)("p",{className:"font-medium",children:D.serial_num||C?.serial_number||"Unknown"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Datapath ID"}),(0,r.jsx)("p",{className:"font-mono text-sm break-all",children:w.datapath_id||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manufacturer"}),(0,r.jsx)("p",{className:"font-medium",children:D.mfr_desc||C?.model||"Unknown"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Datapath Description"}),(0,r.jsx)("p",{className:"font-medium",children:D.dp_desc||"N/A"})]})]})})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Hardware & Software"})}),(0,r.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hardware Description"}),(0,r.jsx)("p",{className:"font-medium",children:D.hw_desc||"Unknown"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Software Description"}),(0,r.jsx)("p",{className:"font-medium",children:D.sw_desc||C?.firmware_version||"Unknown"})]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Switch Features"})}),(0,r.jsx)(i.CardContent,{className:"space-y-3",children:(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Number of Buffers"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:P.n_buffers})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Number of Tables"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:P.n_tables})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Capabilities"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:P.capabilities})]})]})})]})]}),(0,r.jsx)(i.TabsContent,{value:"ports",className:"space-y-4",children:(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"PON Ports"}),(0,r.jsx)(i.CardDescription,{children:"OpenFlow ports on this logical device"})]}),(0,r.jsx)(i.CardContent,{children:0===y.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No ports reported for this logical device"}):(0,r.jsx)("div",{className:"space-y-3",children:y.map(e=>{let s=e?.ofp_port?.state===0?{label:"Active",color:"bg-green-100 text-green-800",icon:n.Z}:{label:"Down",color:"bg-red-100 text-red-800",icon:c.Z},t=s.icon;return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 text-primary"}),(0,r.jsx)("h4",{className:"font-medium",children:e.ofp_port?.name||e.id})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Port ID: ",e.id]})]}),(0,r.jsxs)(i.Badge,{className:s.color,children:[(0,r.jsx)(t,{className:"h-3 w-3 mr-1"}),s.label]})]}),(0,r.jsxs)("div",{className:"grid gap-2 md:grid-cols-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Port Number"}),(0,r.jsx)("p",{className:"font-medium",children:e.ofp_port?.port_no??"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Device Port"}),(0,r.jsx)("p",{className:"font-medium",children:e.device_port_no??"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Current Speed"}),(0,r.jsx)("p",{className:"font-medium",children:g(e.ofp_port?.curr_speed)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Max Speed"}),(0,r.jsx)("p",{className:"font-medium",children:g(e.ofp_port?.max_speed)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"State"}),(0,r.jsx)("p",{className:"font-mono text-xs",children:e.ofp_port?.state??"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Config"}),(0,r.jsx)("p",{className:"font-mono text-xs",children:e.ofp_port?.config??"N/A"})]})]})]},e.id)})})})]})}),(0,r.jsx)(i.TabsContent,{value:"flows",className:"space-y-4",children:(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"OpenFlow Rules"}),(0,r.jsx)(i.CardDescription,{children:"Active flow entries on this logical device"})]}),(0,r.jsx)(i.CardContent,{children:0===_.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No flows reported for this logical device"}):(0,r.jsx)("div",{className:"space-y-3",children:_.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-primary"}),(0,r.jsxs)("h4",{className:"font-medium",children:["Flow ",s+1]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground font-mono break-all",children:["ID: ",e.id??"N/A"]})]}),(0,r.jsxs)(i.Badge,{variant:"secondary",children:["Priority: ",e.priority??"N/A"]})]}),(0,r.jsxs)("div",{className:"grid gap-2 md:grid-cols-3 text-sm mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Table ID"}),(0,r.jsx)("p",{className:"font-medium",children:e.table_id??"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Cookie"}),(0,r.jsx)("p",{className:"font-mono text-xs break-all",children:e.cookie??"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Flags"}),(0,r.jsx)("p",{className:"font-medium",children:e.flags??"N/A"})]})]}),e.match&&Object.keys(e.match).length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-xs font-medium cursor-pointer mb-2",children:"Match Fields"}),(0,r.jsx)("div",{className:"bg-muted/50 rounded-md p-3 text-xs font-mono space-y-1",children:Object.entries(e.match).map(([e,s])=>(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:e}),(0,r.jsx)("span",{children:JSON.stringify(s)})]},e))})]}),e.instructions&&e.instructions.length>0&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-xs font-medium cursor-pointer mb-2",children:"Instructions"}),(0,r.jsx)("div",{className:"bg-muted/50 rounded-md p-3 text-xs font-mono space-y-1",children:e.instructions.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,r.jsxs)("span",{className:"text-muted-foreground",children:["Instruction ",s+1]}),(0,r.jsx)("span",{children:JSON.stringify(e)})]},s))})]})]},e.id||s))})})]})})]})]})}function b(){return(0,r.jsx)(u.eu,{permission:"isp.network['pon'].read",children:(0,r.jsx)(v,{})})}},85995:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/pon/olts/[oltId]/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(53137));module.exports=r})();