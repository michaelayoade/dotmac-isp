(()=>{var e={};e.id=1652,e.ids=[1652],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},46467:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),t(39399),t(13321),t(46366),t(96560);var r=t(23191),a=t(88716),i=t(37922),d=t.n(i),l=t(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["network",{children:["fiber",{children:["service-areas",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39399)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/fiber/service-areas/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/fiber/service-areas/page.tsx"],x="/dashboard/network/fiber/service-areas/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/network/fiber/service-areas/page",pathname:"/dashboard/network/fiber/service-areas",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19712:(e,s,t)=>{Promise.resolve().then(t.bind(t,48193))},48193:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N,dynamic:()=>v});var r=t(10326),a=t(17577),i=t(48723),d=t(46502),l=t(12438),n=t(19228),c=t(93158),o=t(95858),x=t(77636),m=t(95920),p=t(17069),h=t(41137),u=t(88307),j=t(11890),g=t(39183),f=t(90434);let v="force-dynamic",b=[n.wmV.Residential,n.wmV.Commercial,n.wmV.Industrial,n.wmV.Mixed];function N(){let{hasPermission:e}=(0,d.ss)(),{features:s}=(0,c.M)(),t=s.enableNetwork&&e("isp.ipam.read"),[n,v]=(0,a.useState)(""),[N,y]=(0,a.useState)(void 0),[C]=(0,a.useState)(50),[w,P]=(0,a.useState)(0),S={limit:C,offset:w,pollInterval:6e4};N&&(S.areaType=N);let k=n.trim();k&&(S.search=k);let{serviceAreas:q,totalCount:T,hasNextPage:A,loading:_,error:D,refetch:F}=(0,l.VN)(S);if(!t)return(0,r.jsx)("main",{className:"max-w-7xl mx-auto px-6 py-12 space-y-8",children:(0,r.jsx)(i.Card,{children:(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Service Areas"}),(0,r.jsxs)(i.CardDescription,{children:["Access requires ",(0,r.jsx)("code",{children:"isp.ipam.read"})," permission."]})]})})});let B=e=>e.replace(/_/g," ").toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()),R=e=>{switch(e){case"RESIDENTIAL":return"default";case"COMMERCIAL":case"MIXED":return"secondary";default:return"outline"}},L=e=>e>=75?"text-green-600":e>=50?"text-green-500":e>=25?"text-amber-500":"text-red-600",H=(e,s)=>s?e?{label:"Serviceable",variant:"default"}:{label:"Not Serviceable",variant:"destructive"}:{label:"Inactive",variant:"secondary"};return(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-6 py-12 space-y-8",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Service Areas"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fiber coverage areas and customer penetration metrics"})]}),(0,r.jsx)(f.default,{href:"/dashboard/network/fiber",children:(0,r.jsxs)(i.Button,{variant:"outline",children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]})})]}),!_&&q.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Areas"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:T}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Service coverage zones"})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Homes Passed"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:q.reduce((e,s)=>e+s.homesPassed,0).toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[q.reduce((e,s)=>e+s.homesConnected,0).toLocaleString()," ","connected"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Avg Penetration"}),(0,r.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[(q.reduce((e,s)=>e+(s.penetrationRatePercent||0),0)/q.length).toFixed(1),"%"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Across all areas"})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Coverage"}),(0,r.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[q.reduce((e,s)=>e+s.areaSqkm,0).toFixed(1)," km\xb2"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total area coverage"})]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),(0,r.jsx)(i.CardTitle,{children:"Filters"})]}),(0,r.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{v(""),y(void 0),P(0)},children:"Clear Filters"})]})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.Label,{htmlFor:"search",children:"Search"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(i.Input,{id:"search",placeholder:"Search by name, city, or postal code...",value:n,onChange:e=>{v(e.target.value),P(0)},className:"pl-8"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.Label,{htmlFor:"areaType",children:"Area Type"}),(0,r.jsxs)(i.Select,{value:N||"all",onValueChange:e=>{y("all"===e?void 0:e),P(0)},children:[(0,r.jsx)(i.SelectTrigger,{id:"areaType",children:(0,r.jsx)(i.SelectValue,{placeholder:"All types"})}),(0,r.jsxs)(i.SelectContent,{children:[(0,r.jsx)(i.SelectItem,{value:"all",children:"All types"}),b.map(e=>(0,r.jsx)(i.SelectItem,{value:e,children:B(e)},e))]})]})]})]})})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i.CardTitle,{children:["Service Areas"," ",T>0&&(0,r.jsxs)("span",{className:"text-muted-foreground",children:["(",T,")"]})]}),_&&(0,r.jsx)(i.Badge,{variant:"outline",children:"Loading..."})]}),D&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:D})]}),(0,r.jsx)(i.CardContent,{children:0!==q.length||_?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(e=>{let s=H(e.isServiceable,e.isActive);return(0,r.jsxs)(i.Card,{className:"hover:border-primary/50 transition-colors",children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,r.jsx)(i.CardTitle,{className:"text-lg",children:e.name}),(0,r.jsxs)(i.CardDescription,{children:[e.city,", ",e.stateProvince]})]}),(0,r.jsx)(i.Badge,{variant:R(e.areaType),children:B(e.areaType)})]})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status"}),(0,r.jsx)(i.Badge,{variant:s.variant,children:s.label})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"Penetration Rate"}),(0,r.jsxs)("span",{className:`text-lg font-bold ${L(e.penetrationRatePercent||0)}`,children:[e.penetrationRatePercent?.toFixed(1)||0,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-secondary rounded-full h-2",children:(0,r.jsx)("div",{className:`h-2 rounded-full transition-all ${(e.penetrationRatePercent||0)>=75?"bg-green-600":(e.penetrationRatePercent||0)>=50?"bg-green-500":(e.penetrationRatePercent||0)>=25?"bg-amber-500":"bg-red-600"}`,style:{width:`${e.penetrationRatePercent||0}%`}})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Homes Passed"}),(0,r.jsx)("div",{className:"text-lg font-semibold",children:e.homesPassed.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Connected"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-green-600",children:e.homesConnected.toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Businesses Passed"}),(0,r.jsx)("div",{className:"text-sm font-medium",children:e.businessesPassed.toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Connected"}),(0,r.jsx)("div",{className:"text-sm font-medium text-green-600",children:e.businessesConnected.toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2 border-t text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground mb-1",children:"Area"}),(0,r.jsxs)("div",{className:"font-medium",children:[e.areaSqkm.toFixed(2)," km\xb2"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground mb-1",children:"Fiber"}),(0,r.jsxs)("div",{className:"font-medium",children:[e.totalFiberKm.toFixed(1)," km"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground mb-1",children:"Dist. Points"}),(0,r.jsx)("div",{className:"font-medium",children:e.distributionPointCount})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-muted-foreground mb-1",children:"Capacity"}),(0,r.jsxs)("div",{className:"font-medium",children:[e.capacityUtilizationPercent.toFixed(0),"%"]})]})]}),e.postalCodes.length>0&&(0,r.jsxs)("div",{className:"pt-2 border-t",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:"Postal Codes"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.postalCodes.slice(0,3).map(e=>(0,r.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:e},e)),e.postalCodes.length>3&&(0,r.jsxs)(i.Badge,{variant:"outline",className:"text-xs",children:["+",e.postalCodes.length-3," more"]})]})]}),(0,r.jsx)(f.default,{href:`/dashboard/network/fiber/service-areas/${e.id}`,className:"block",children:(0,r.jsx)(i.Button,{variant:"outline",className:"w-full mt-2",children:"View Details"})})]})]},e.id)})}),T>C&&(0,r.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t mt-6",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",w+1," to ",Math.min(w+C,T)," of ",T," ","areas"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{w>0&&P(Math.max(0,w-C))},disabled:0===w||_,children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,r.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{A&&P(w+C)},disabled:!A||_,children:["Next",(0,r.jsx)(g.Z,{className:"h-4 w-4 ml-1"})]})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No service areas found"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:n||N?"Try adjusting your filters":"No service areas have been added to the system yet"}),(0,r.jsx)(i.Button,{variant:"outline",onClick:()=>F(),children:"Refresh"})]})})]})]})}},39399:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,dynamic:()=>a});var r=t(68570);let a=(0,r.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/fiber/service-areas/page.tsx#dynamic`),i=(0,r.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/fiber/service-areas/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2793,1009,6226,657,6011,6032,4218,9228,2438],()=>t(46467));module.exports=r})();