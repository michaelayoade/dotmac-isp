(()=>{var e={};e.id=5241,e.ids=[5241],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},8882:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(6169),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),d=t.n(i),n=t(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let c=["",{children:["dashboard",{children:["network",{children:["wireguard",{children:["servers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6169)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/wireguard/servers/[id]/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/wireguard/servers/[id]/page.tsx"],m="/dashboard/network/wireguard/servers/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/network/wireguard/servers/[id]/page",pathname:"/dashboard/network/wireguard/servers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},16321:(e,s,t)=>{Promise.resolve().then(t.bind(t,38049))},38049:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S,dynamic:()=>k,dynamicParams:()=>$});var a=t(10326),r=t(17577),i=t(90434),d=t(35047),n=t(48723),l=t(86333),c=t(93892),o=t(54014),m=t(21405),x=t(69508),u=t(98091),p=t(66697),h=t(24061),g=t(17069),j=t(51110),f=t(30361),v=t(41291),N=t(43810),b=t(76828),y=t(29163),w=t(48998),_=t(7027),q=t(4743),P=t(89098);let k="force-dynamic",$=!0;function S({params:e}){let{id:s}=e,t=(0,d.useRouter)(),[k,$]=(0,r.useState)(null),{data:S,isLoading:D,error:C,refetch:K}=(0,q.Eb)(s),{data:T,refetch:B}=(0,q.Nd)(s),{data:L=[]}=(0,q.FP)({server_id:s,limit:10}),{mutate:A,isPending:Q}=(0,q.f2)(),E=(0,n.useConfirmDialog)(),F=async()=>{S&&await E({title:"Delete server",description:`Are you sure you want to delete server "${S.name}"? This will also remove all associated peers.`,confirmText:"Delete server",variant:"destructive"})&&A(s,{onSuccess:()=>{t.push("/dashboard/network/wireguard/servers")}})},I=async(e,s)=>{await navigator.clipboard.writeText(e),$(s),setTimeout(()=>$(null),2e3)};return D?(0,a.jsx)("div",{className:"space-y-6 p-6",children:(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading server details..."})})}):C||!S?(0,a.jsx)("div",{className:"space-y-6 p-6",children:(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("p",{className:"text-red-500",children:["Error loading server: ",String(C)||"Server not found"]}),(0,a.jsxs)(n.Button,{className:"mt-4",onClick:()=>t.back(),children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Go Back"]})]})}):(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(n.Button,{variant:"outline",onClick:()=>t.back(),children:[(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8"}),S.name]}),S.location&&(0,a.jsxs)("p",{className:"text-muted-foreground flex items-center gap-1 mt-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),S.location]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.Button,{variant:"outline",onClick:()=>{K(),B()},children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/servers/${s}/edit`,children:(0,a.jsxs)(n.Button,{variant:"outline",children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),"Edit"]})}),(0,a.jsxs)(n.Button,{variant:"destructive",onClick:()=>{F()},disabled:Q,children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsx)(n.Card,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,a.jsx)(n.Badge,{className:`mt-2 ${P.Aj[S.status]}`,children:S.status})]}),(0,a.jsx)(p.Z,{className:"h-10 w-10 text-blue-500"})]})}),(0,a.jsx)(n.Card,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Peers"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[S.current_peers," / ",S.max_peers]})]}),(0,a.jsx)(h.Z,{className:"h-10 w-10 text-purple-500"})]})}),(0,a.jsx)(n.Card,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Utilization"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[S.utilization_percent.toFixed(1),"%"]})]}),(0,a.jsx)(g.Z,{className:`h-10 w-10 ${S.utilization_percent>=90?"text-red-500":S.utilization_percent>=75?"text-yellow-500":"text-green-500"}`})]})}),(0,a.jsx)(n.Card,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Traffic"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(0,P.td)(S.total_rx_bytes+S.total_tx_bytes)})]}),(0,a.jsx)(j.Z,{className:"h-10 w-10 text-green-500"})]})})]}),T&&(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),"Health Status"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["healthy"===T.status?(0,a.jsx)(f.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(v.Z,{className:`h-5 w-5 ${"degraded"===T.status?"text-yellow-500":"text-red-500"}`}),(0,a.jsx)("span",{className:"font-semibold",children:T.status.toUpperCase()})]}),(0,a.jsx)(n.Badge,{className:"healthy"===T.status?"bg-green-500":"degraded"===T.status?"bg-yellow-500":"bg-red-500",children:T.status})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Interface Status"}),(0,a.jsx)("p",{className:"font-semibold",children:T.interface_status})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Peers"}),(0,a.jsx)("p",{className:"font-semibold",children:T.active_peers})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Capacity Utilization"}),(0,a.jsxs)("p",{className:"font-semibold",children:[T.capacity_utilization.toFixed(1),"%"]})]})]}),T.issues.length>0&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded",children:[(0,a.jsx)("p",{className:"font-semibold text-red-900 mb-2",children:"Issues:"}),(0,a.jsx)("ul",{className:"space-y-1",children:T.issues.map((e,s)=>(0,a.jsxs)("li",{className:"text-sm text-red-800",children:["â€¢ ",e]},s))})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last checked: ",new Date(T.timestamp).toLocaleString()]})]})]}),(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),"Server Configuration"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[S.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Description"}),(0,a.jsx)("p",{className:"mt-1",children:S.description})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2 flex items-center gap-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Public Endpoint"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-sm font-mono flex-1",children:S.public_endpoint}),(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>I(S.public_endpoint,"endpoint"),children:"endpoint"===k?(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Listen Port"}),(0,a.jsx)("code",{className:"text-sm font-mono",children:S.listen_port})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Server IPv4"}),(0,a.jsx)("code",{className:"text-sm font-mono",children:S.server_ipv4})]}),S.server_ipv6&&(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Server IPv6"}),(0,a.jsx)("code",{className:"text-sm font-mono",children:S.server_ipv6})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded col-span-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mb-2 flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Public Key"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"text-sm font-mono flex-1 break-all",children:S.public_key}),(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",onClick:()=>I(S.public_key,"public_key"),children:"public_key"===k?(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})]})]})]})]}),(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"Network Configuration"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"DNS Servers"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:S.dns_servers.map((e,s)=>(0,a.jsx)(n.Badge,{variant:"outline",children:e},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Allowed IPs"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:S.allowed_ips.map((e,s)=>(0,a.jsx)(n.Badge,{variant:"outline",children:e},s))})]}),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Persistent Keepalive"}),(0,a.jsxs)("p",{className:"font-semibold",children:[S.persistent_keepalive," seconds"]})]})]})]}),(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),"Traffic Statistics"]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-6 bg-green-50 border border-green-200 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"text-sm text-green-900 font-medium",children:"Total Received"}),(0,a.jsx)(y.Z,{className:"h-5 w-5 text-green-600"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-900",children:(0,P.td)(S.total_rx_bytes)})]}),(0,a.jsxs)("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"text-sm text-blue-900 font-medium",children:"Total Transmitted"}),(0,a.jsx)(g.Z,{className:"h-5 w-5 text-blue-600"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:(0,P.td)(S.total_tx_bytes)})]}),(0,a.jsxs)("div",{className:"p-6 bg-purple-50 border border-purple-200 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"text-sm text-purple-900 font-medium",children:"Total Traffic"}),(0,a.jsx)(p.Z,{className:"h-5 w-5 text-purple-600"})]}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:(0,P.td)(S.total_rx_bytes+S.total_tx_bytes)})]})]}),S.last_stats_update&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-4 flex items-center gap-1",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3"}),"Last updated: ",(0,P.pi)(S.last_stats_update)]})]}),(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),"Associated Peers (",S.current_peers,")"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/peers?server_id=${s}`,children:(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(_.Z,{className:"mr-1 h-3 w-3"}),"View All"]})}),(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/peers/new?server_id=${s}`,children:(0,a.jsxs)(n.Button,{size:"sm",children:[(0,a.jsx)(h.Z,{className:"mr-1 h-3 w-3"}),"Add Peer"]})})]})]}),0===L.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 mx-auto text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No peers configured on this server yet."}),(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/peers/new?server_id=${s}`,children:(0,a.jsxs)(n.Button,{className:"mt-4",size:"sm",children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Add First Peer"]})})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[L.slice(0,10).map(e=>(0,a.jsx)(Z,{peer:e},e.id)),S.current_peers>10&&(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/peers?server_id=${s}`,className:"block text-center",children:(0,a.jsxs)(n.Button,{variant:"outline",size:"sm",className:"w-full",children:["View All ",S.current_peers," Peers"]})})]})]}),S.metadata_&&Object.keys(S.metadata_).length>0&&(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Additional Metadata"}),(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded",children:(0,a.jsx)("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(S.metadata_,null,2)})})]}),(0,a.jsxs)(n.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),"Timestamps"]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Created"}),(0,a.jsx)("p",{className:"font-semibold",children:new Date(S.created_at).toLocaleString()})]}),S.updated_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),(0,a.jsx)("p",{className:"font-semibold",children:new Date(S.updated_at).toLocaleString()})]}),S.last_stats_update&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Last Stats Update"}),(0,a.jsx)("p",{className:"font-semibold",children:new Date(S.last_stats_update).toLocaleString()})]})]})]})]})}function Z({peer:e}){return(0,a.jsx)(i.default,{href:`/dashboard/network/wireguard/peers/${e.id}`,children:(0,a.jsx)("div",{className:"p-4 border rounded hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.name}),(0,a.jsx)(n.Badge,{className:(e=>{switch(e){case"active":return"bg-green-500";case"inactive":default:return"bg-gray-500";case"disabled":return"bg-red-500";case"expired":return"bg-orange-500"}})(e.status),children:e.status}),e.is_online&&(0,a.jsx)(n.Badge,{variant:"outline",className:"bg-green-50",children:"Online"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1 text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3"}),e.peer_ipv4]}),e.last_handshake&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(w.Z,{className:"h-3 w-3"}),(0,P.pi)(e.last_handshake)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Traffic"}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:(0,P.td)(e.total_bytes)})]})]})})})}},4743:(e,s,t)=>{"use strict";t.d(s,{EQ:()=>p,Eb:()=>m,FP:()=>g,JI:()=>o,Ml:()=>f,Mp:()=>N,Nd:()=>x,aN:()=>j,d4:()=>b,f2:()=>h,f_:()=>y,mI:()=>u,sZ:()=>v,v6:()=>w,vY:()=>_});var a=t(48324),r=t(44976),i=t(17010),d=t(59341);let n="/wireguard",l=["wireguard"],c={all:l,servers:{all:[...l,"servers"],lists:()=>[...l,"servers","list"],list:e=>[...l,"servers","list",e],detail:e=>[...l,"servers","detail",e],health:e=>[...l,"servers","health",e]},peers:{all:[...l,"peers"],lists:()=>[...l,"peers","list"],list:e=>[...l,"peers","list",e],detail:e=>[...l,"peers","detail",e],config:e=>[...l,"peers","config",e]},dashboard:()=>[...l,"dashboard"]};function o(e={}){return(0,a.a)({queryKey:c.servers.list(e),queryFn:async()=>{let s=new URLSearchParams;e.status&&s.append("status",e.status),e.location&&s.append("location",e.location),e.limit&&s.append("limit",String(e.limit)),e.offset&&s.append("offset",String(e.offset));let t=`${n}/servers?${s.toString()}`;return(await d.x1.get(t)).data},staleTime:3e4})}function m(e){return(0,a.a)({queryKey:c.servers.detail(e),queryFn:async()=>(await d.x1.get(`${n}/servers/${e}`)).data,enabled:!!e,staleTime:6e4})}function x(e){return(0,a.a)({queryKey:c.servers.health(e),queryFn:async()=>(await d.x1.get(`${n}/servers/${e}/health`)).data,enabled:!!e,staleTime:1e4,refetchInterval:3e4})}function u(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.post(`${n}/servers`,e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:c.servers.lists()}),e.invalidateQueries({queryKey:c.dashboard()})}})}function p(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async({serverId:e,data:s})=>(await d.x1.patch(`${n}/servers/${e}`,s)).data,onSuccess:(s,t)=>{e.invalidateQueries({queryKey:c.servers.detail(t.serverId)}),e.invalidateQueries({queryKey:c.servers.lists()}),e.invalidateQueries({queryKey:c.dashboard()})}})}function h(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.delete(`${n}/servers/${e}`),e),onSuccess:()=>{e.invalidateQueries({queryKey:c.servers.lists()}),e.invalidateQueries({queryKey:c.dashboard()})}})}function g(e={}){return(0,a.a)({queryKey:c.peers.list(e),queryFn:async()=>{let s=new URLSearchParams;e.server_id&&s.append("server_id",e.server_id),e.customer_id&&s.append("customer_id",e.customer_id),e.subscriber_id&&s.append("subscriber_id",e.subscriber_id),e.status&&s.append("status",e.status),e.limit&&s.append("limit",String(e.limit)),e.offset&&s.append("offset",String(e.offset));let t=`${n}/peers?${s.toString()}`;return(await d.x1.get(t)).data},staleTime:3e4})}function j(e){return(0,a.a)({queryKey:c.peers.detail(e),queryFn:async()=>(await d.x1.get(`${n}/peers/${e}`)).data,enabled:!!e,staleTime:6e4})}function f(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.post(`${n}/peers`,e)).data,onSuccess:s=>{e.invalidateQueries({queryKey:c.peers.lists()}),e.invalidateQueries({queryKey:c.servers.detail(s.server_id)}),e.invalidateQueries({queryKey:c.dashboard()})}})}function v(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async({peerId:e,data:s})=>(await d.x1.patch(`${n}/peers/${e}`,s)).data,onSuccess:(s,t)=>{e.invalidateQueries({queryKey:c.peers.detail(t.peerId)}),e.invalidateQueries({queryKey:c.peers.lists()}),e.invalidateQueries({queryKey:c.servers.detail(s.server_id)}),e.invalidateQueries({queryKey:c.dashboard()})}})}function N(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.delete(`${n}/peers/${e}`),e),onSuccess:()=>{e.invalidateQueries({queryKey:c.peers.lists()}),e.invalidateQueries({queryKey:c.servers.lists()}),e.invalidateQueries({queryKey:c.dashboard()})}})}function b(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.post(`${n}/peers/${e}/regenerate`)).data,onSuccess:(s,t)=>{e.invalidateQueries({queryKey:c.peers.detail(t)}),e.invalidateQueries({queryKey:c.peers.config(t)})}})}function y(){return(0,a.a)({queryKey:c.dashboard(),queryFn:async()=>(await d.x1.get(`${n}/dashboard`)).data,staleTime:1e4,refetchInterval:3e4})}function w(){let e=(0,r.NL)();return(0,i.D)({mutationFn:async e=>(await d.x1.post(`${n}/provision`,e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:c.peers.lists()}),e.invalidateQueries({queryKey:c.servers.lists()}),e.invalidateQueries({queryKey:c.dashboard()})}})}function _(){return(0,i.D)({mutationFn:async e=>{let s=(await d.x1.get(`${n}/peers/${e}/config`)).data,t=new Blob([s.config_file],{type:"text/plain"}),a=window.URL.createObjectURL(t),r=document.createElement("a");return r.href=a,r.download=`${s.peer_name}.conf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),s}})}},89098:(e,s,t)=>{"use strict";var a,r;t.d(s,{Aj:()=>i,Cz:()=>d,Sc:()=>r,dN:()=>a,pi:()=>l,td:()=>n}),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.DEGRADED="degraded",e.MAINTENANCE="maintenance"}(a||(a={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.DISABLED="disabled",e.EXPIRED="expired"}(r||(r={}));let i={active:"bg-green-500",inactive:"bg-gray-500",degraded:"bg-yellow-500",maintenance:"bg-blue-500"},d={active:"bg-green-500",inactive:"bg-gray-500",disabled:"bg-red-500",expired:"bg-orange-500"};function n(e){if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(2))} ${["B","KB","MB","GB","TB"][s]}`}function l(e){if(!e)return"Never";let s=Math.floor((new Date().getTime()-new Date(e).getTime())/1e3),t=Math.floor(s/60),a=Math.floor(t/60),r=Math.floor(a/24);return r>0?`${r}d ago`:a>0?`${a}h ago`:t>0?`${t}m ago`:`${s}s ago`}},6169:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,dynamic:()=>r,dynamicParams:()=>i});var a=t(68570);let r=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/wireguard/servers/[id]/page.tsx#dynamic`),i=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/wireguard/servers/[id]/page.tsx#dynamicParams`),d=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/network/wireguard/servers/[id]/page.tsx#default`)}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(8882));module.exports=a})();