(()=>{var e={};e.id=2118,e.ids=[2118],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},33727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(40889),s(13321),s(46366),s(96560);var a=s(23191),r=s(88716),i=s(37922),n=s.n(i),d=s(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o=["",{children:["dashboard",{children:["settings",{children:["organization",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,40889)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/organization/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/organization/page.tsx"],x="/dashboard/settings/organization/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/settings/organization/page",pathname:"/dashboard/settings/organization",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},33478:(e,t,s)=>{Promise.resolve().then(s.bind(s,39562))},39562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var a=s(10326),r=s(17577),i=s(48723),n=s(77506),d=s(41291),l=s(69508),o=s(94019),c=s(31215),x=s(63685),m=s(74975),u=s(5932),h=s(15919),g=s(24061),p=s(76464),j=s(66307),f=s(28916),v=s(31540),b=s(76828),N=s(29771),y=s(53402),C=s(59341);let w={getTenant:async function e(e){return(await C.x1.get(`/tenant/${e}`)).data},updateTenant:async function e(e,t){return(await C.x1.patch(`/tenant/${e}`,t)).data},getStats:async function e(e){let t=e?`/tenant/${e}/stats`:"/tenant/stats";return(await C.x1.get(t)).data},listInvitations:async function e(e){let t=e?`/tenant/${e}/invitations`:"/tenant/invitations";return(await C.x1.get(t)).data},createInvitation:async function e(e,t){return(await C.x1.post(`/tenant/${e}/invitations`,t)).data},revokeInvitation:async function(e,t){await C.x1.delete(`/tenant/${e}/invitations/${t}`)},getStatusDisplayName:function(e){return({active:"Active",suspended:"Suspended",disabled:"Disabled",pending:"Pending",inactive:"Inactive"})[e.toLowerCase()]||e},getPlanDisplayName:function(e){return({free:"Free",starter:"Starter",professional:"Professional",enterprise:"Enterprise",basic:"Basic",premium:"Premium"})[e.toLowerCase()]||e}};var k=s(44976),_=s(17010),S=s(48324),D=s(36607);class T{getAuthHeaders(){let e=localStorage.getItem("access_token");return{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}async initiateVerification(e,t){let s=await fetch(`${this.baseUrl}/api/platform/v1/admin/tenants/${e}/domains/verify`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Failed to initiate domain verification");return s.json()}async checkVerification(e,t){let s=await fetch(`${this.baseUrl}/api/platform/v1/admin/tenants/${e}/domains/check`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!s.ok)throw Error((await s.json().catch(()=>({}))).detail||"Failed to check domain verification");return s.json()}async getStatus(e){let t=await fetch(`${this.baseUrl}/api/platform/v1/admin/tenants/${e}/domains/status`,{headers:this.getAuthHeaders()});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to get domain status");return t.json()}async removeDomain(e){let t=await fetch(`${this.baseUrl}/api/platform/v1/admin/tenants/${e}/domains`,{method:"DELETE",headers:this.getAuthHeaders()});if(!t.ok)throw Error((await t.json().catch(()=>({}))).detail||"Failed to remove domain");return t.json()}validateDomain(e){if(!e||0===e.trim().length)return{valid:!1,error:"Domain cannot be empty"};let t=e.trim().toLowerCase();return/\s/.test(t)?{valid:!1,error:"Domain cannot contain whitespace"}:/^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*\.[a-z]{2,}$/.test(t)?t.length<3||t.length>255?{valid:!1,error:"Domain must be between 3 and 255 characters"}:{valid:!0}:{valid:!1,error:"Invalid domain format"}}constructor(){this.baseUrl=D.LM.api.baseUrl}}let F=new T;function I(e){let t=(0,k.NL)(),s=(0,_.D)({mutationFn:t=>F.initiateVerification(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["domain-status",e]})}}),a=(0,_.D)({mutationFn:t=>F.checkVerification(e,t),onSuccess:s=>{"verified"===s.status&&t.invalidateQueries({queryKey:["domain-status",e]})}}),r=(0,_.D)({mutationFn:()=>F.removeDomain(e),onSuccess:()=>{t.invalidateQueries({queryKey:["domain-status",e]})}});return{initiate:s.mutate,initiateAsync:s.mutateAsync,isInitiating:s.isPending,initiateError:s.error,initiateResult:s.data,check:a.mutate,checkAsync:a.mutateAsync,isChecking:a.isPending,checkError:a.error,checkResult:a.data,remove:r.mutate,removeAsync:r.mutateAsync,isRemoving:r.isPending,removeError:r.error,removeResult:r.data,reset:()=>{s.reset(),a.reset(),r.reset()}}}var P=s(54014),A=s(43810),z=s(32130),B=s(48998),E=s(86333),Z=s(24230);let L=[{value:"dns_txt",label:"DNS TXT Record",description:"Add a TXT record to your DNS settings (recommended)",recommended:!0},{value:"dns_cname",label:"DNS CNAME Record",description:"Add a CNAME record to your DNS settings"},{value:"meta_tag",label:"HTML Meta Tag",description:"Add a meta tag to your website homepage (coming soon)"},{value:"file_upload",label:"File Upload",description:"Upload a verification file to your domain (coming soon)"}];function H({open:e,onOpenChange:t,tenantId:s,onSuccess:l}){let{toast:o}=(0,i.useToast)(),{initiateAsync:c,checkAsync:x,isInitiating:m,isChecking:u,reset:h}=I(s),{validateDomain:g}={validateDomain:F.validateDomain},[p,f]=(0,r.useState)("input"),[v,b]=(0,r.useState)(""),[N,y]=(0,r.useState)("dns_txt"),[C,w]=(0,r.useState)(null),k=e=>{b(e.toLowerCase().trim())},_=async()=>{let e=g(v);if(!e.valid){o({title:"Invalid Domain",description:e.error??"Please enter a valid domain.",variant:"destructive"});return}let t=L.find(e=>e.value===N);if(t?.value==="meta_tag"||t?.value==="file_upload"){o({title:"Method Not Available",description:"This verification method is coming soon. Please use DNS verification.",variant:"destructive"});return}try{let e=await c({domain:v,method:N});w(e),f("instructions"),o({title:"Verification Initiated",description:"Follow the instructions to verify your domain"})}catch(e){o({title:"Initiation Failed",description:e instanceof Error?e.message:"Failed to initiate verification",variant:"destructive"})}},S=async()=>{if(C?.token)try{let e=await x({domain:v,token:C.token,method:N});w(e),"verified"===e.status?(f("complete"),o({title:"Domain Verified!",description:`${v} has been successfully verified`}),l?.()):"failed"===e.status?o({title:"Verification Failed",description:e.error_message||"Could not verify domain. Please check your DNS settings and try again.",variant:"destructive"}):"expired"===e.status&&(o({title:"Token Expired",description:"Verification token has expired. Please start over.",variant:"destructive"}),D())}catch(e){o({title:"Check Failed",description:e instanceof Error?e.message:"Failed to check verification",variant:"destructive"})}},D=()=>{f("input"),b(""),y("dns_txt"),w(null),h()},T=()=>{D(),t(!1)},H=(e,t)=>{navigator.clipboard.writeText(e),o({title:"Copied to Clipboard",description:`${t} has been copied`})},V=()=>{if(!C?.expires_at)return null;let e=new Date(C.expires_at),t=new Date;return Math.floor((e.getTime()-t.getTime())/36e5)};return(0,a.jsx)(i.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(i.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(i.DialogHeader,{children:[(0,a.jsxs)(i.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),"Verify Custom Domain"]}),(0,a.jsx)(i.DialogDescription,{children:"Verify ownership of your custom domain to enable custom branding"})]}),"input"===p&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-lg",children:"Domain Information"}),(0,a.jsx)(i.CardDescription,{children:"Enter the domain you want to verify and select a verification method"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(i.Label,{htmlFor:"domain",children:["Domain Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(i.Input,{id:"domain",value:v,onChange:e=>k(e.target.value),placeholder:"example.com",autoFocus:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter your domain without http:// or www"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"method",children:"Verification Method"}),(0,a.jsxs)(i.Select,{value:N,onValueChange:e=>y(e),children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{})}),(0,a.jsx)(i.SelectContent,{children:L.map(e=>(0,a.jsx)(i.SelectItem,{value:e.value,disabled:"meta_tag"===e.value||"file_upload"===e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.label,e.recommended&&(0,a.jsx)(i.Badge,{variant:"secondary",className:"ml-1",children:"Recommended"})]})},e.value))})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:L.find(e=>e.value===N)?.description})]})]})]})}),"instructions"===p&&C&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-lg",children:"Verification Instructions"}),(0,a.jsxs)(i.CardDescription,{children:["Follow these steps to verify ownership of ",v]})]}),(0,a.jsx)(i.CardContent,{className:"space-y-4",children:C.instructions&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:C.instructions.type}),(0,a.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200 mt-1",children:C.instructions.description})]})]})}),C.instructions.dns_record&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-medium",children:"DNS Record Configuration"}),(0,a.jsxs)("div",{className:"bg-muted p-4 rounded-lg space-y-2 font-mono text-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,a.jsx)("div",{className:"font-semibold",children:C.instructions.dns_record.type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Name:"}),(0,a.jsx)("div",{className:"font-semibold",children:C.instructions.dns_record.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"TTL:"}),(0,a.jsx)("div",{className:"font-semibold",children:C.instructions.dns_record.ttl})]})]}),C.instructions.dns_record.value&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Value:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("code",{className:"flex-1 bg-background px-3 py-2 rounded border break-all",children:C.instructions.dns_record.value}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>H(C.instructions.dns_record.value,"DNS record value"),children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]})]}),C.instructions.dns_record.target&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Target:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("code",{className:"flex-1 bg-background px-3 py-2 rounded border",children:C.instructions.dns_record.target}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>H(C.instructions.dns_record.target,"DNS record target"),children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Steps to Verify"}),(0,a.jsx)("ol",{className:"list-decimal list-inside space-y-2 text-sm",children:C.instructions.steps.map((e,t)=>(0,a.jsx)("li",{className:"text-muted-foreground",children:e},t))})]}),C.instructions.verification_command&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h4",{className:"font-medium flex items-center gap-2",children:[(0,a.jsx)(z.Z,{className:"h-4 w-4"}),"Test DNS Propagation"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"flex-1 bg-muted px-3 py-2 rounded border font-mono text-sm",children:C.instructions.verification_command}),(0,a.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>H(C.instructions.verification_command,"Verification command"),children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(B.Z,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"DNS Propagation Time"}),(0,a.jsx)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mt-1",children:"DNS changes may take 5-10 minutes to propagate. If verification fails, please wait a few minutes and try again."}),null!==V()&&(0,a.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mt-2",children:["Verification token expires in ",V()," hours"]})]})]})})]})})]})}),"verify"===p&&C&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{className:"text-lg",children:"Verification Status"})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:["pending"===C.status&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(n.Z,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Checking verification..."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"This may take a moment"})]}),"failed"===C.status&&(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 p-6 rounded-lg text-center",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),(0,a.jsx)("h4",{className:"font-medium text-red-900 dark:text-red-100 text-lg",children:"Verification Failed"}),(0,a.jsx)("p",{className:"text-sm text-red-800 dark:text-red-200 mt-2",children:C.error_message||"Could not verify domain. Please check your DNS settings."})]})]})]})}),"complete"===p&&C&&(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(i.Card,{className:"border-green-500",children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"text-lg flex items-center gap-2 text-green-600",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5"}),"Domain Verified Successfully!"]}),(0,a.jsx)(i.CardDescription,{children:"Your custom domain has been verified and is now active"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 p-6 rounded-lg text-center",children:[(0,a.jsx)(j.Z,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 dark:text-green-100 text-lg",children:v}),(0,a.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Verified on"," ",C.verified_at?new Date(C.verified_at).toLocaleString():"just now"]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"What's Next?"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[(0,a.jsx)("li",{children:"• Your domain is now associated with your tenant"}),(0,a.jsx)("li",{children:"• You can configure custom branding settings"}),(0,a.jsx)("li",{children:"• Custom domain will be used for branded experiences"})]})]})]})]})}),(0,a.jsxs)(i.DialogFooter,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:"instructions"===p&&(0,a.jsxs)(i.Button,{variant:"outline",onClick:()=>f("input"),children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,a.jsx)("div",{className:"flex gap-2",children:"complete"===p?(0,a.jsx)(i.Button,{onClick:T,children:"Close"}):"input"===p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:T,children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:_,disabled:m||!v,children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Initiating..."]}):(0,a.jsxs)(a.Fragment,{children:["Next",(0,a.jsx)(Z.Z,{className:"h-4 w-4 ml-2"})]})})]}):"instructions"===p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:T,children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:S,disabled:u,children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):"Check Verification"})]}):(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>f("instructions"),children:"Try Again"})})]})]})})}var V=s(58038),q=s(83855),M=s(98091);function R({tenantId:e}){let{toast:t}=(0,i.useToast)(),{data:s,isLoading:n,refetch:l}=(0,S.a)({queryKey:["domain-status",e],queryFn:()=>F.getStatus(e),enabled:!!e,staleTime:3e4,refetchInterval:!1}),{removeAsync:o,isRemoving:c}=I(e),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),g=async()=>{try{await o(),t({title:"Domain Removed",description:"Custom domain has been removed from your account"}),h(!1),l()}catch(e){t({title:"Removal Failed",description:e instanceof Error?e.message:"Failed to remove domain",variant:"destructive"})}};return n?(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),"Custom Domain"]}),(0,a.jsx)(i.CardDescription,{children:"Verify your custom domain for branded experiences"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,a.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,a.jsx)(i.Skeleton,{className:"h-10 w-32"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),"Custom Domain"]}),(0,a.jsx)(i.CardDescription,{children:s?.is_verified?"Your custom domain is verified and active":"Verify your custom domain for branded experiences"})]}),(0,a.jsx)(i.CardContent,{className:"space-y-4",children:s?.is_verified&&s.domain?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-start justify-between p-4 bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,a.jsx)(j.Z,{className:"h-5 w-5 text-green-600 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-green-900 dark:text-green-100",children:s.domain}),(0,a.jsxs)(i.Badge,{variant:"secondary",className:"bg-green-100 dark:bg-green-900",children:[(0,a.jsx)(V.Z,{className:"h-3 w-3 mr-1"}),"Verified"]})]}),s.verified_at&&(0,a.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Verified on ",new Date(s.verified_at).toLocaleDateString()]})]})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",onClick:()=>m(!0),className:"flex-1",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Change Domain"]}),(0,a.jsxs)(i.Button,{variant:"outline",onClick:()=>h(!0),disabled:c,className:"text-red-600 hover:text-red-700",children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2"}),"Remove"]})]}),(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 p-3 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,a.jsx)("strong",{children:"Benefits:"})," Your custom domain enables branded login pages, email templates, and customer-facing portals."]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted rounded-lg",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"No domain verified"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Verify a custom domain to enable branded experiences for your organization."})]})]}),(0,a.jsxs)(i.Button,{onClick:()=>m(!0),className:"w-full",children:[(0,a.jsx)(P.Z,{className:"h-4 w-4 mr-2"}),"Verify Domain"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Why verify a domain?"}),(0,a.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsx)("li",{children:"• Custom branding on login and customer portals"}),(0,a.jsx)("li",{children:"• Branded email communications"}),(0,a.jsx)("li",{children:"• Professional appearance for your organization"}),(0,a.jsx)("li",{children:"• Enhanced trust and credibility"})]})]})]})})]}),(0,a.jsx)(H,{open:x,onOpenChange:m,tenantId:e,onSuccess:()=>{l()}}),(0,a.jsx)(i.AlertDialog,{open:u,onOpenChange:h,children:(0,a.jsxs)(i.AlertDialogContent,{children:[(0,a.jsxs)(i.AlertDialogHeader,{children:[(0,a.jsx)(i.AlertDialogTitle,{children:"Remove Custom Domain?"}),(0,a.jsxs)(i.AlertDialogDescription,{children:["This will remove ",(0,a.jsx)("strong",{children:s?.domain})," from your account. The domain can be claimed by another tenant afterward.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Custom branding features will be disabled until you verify another domain."]})]}),(0,a.jsxs)(i.AlertDialogFooter,{children:[(0,a.jsx)(i.AlertDialogCancel,{children:"Cancel"}),(0,a.jsx)(i.AlertDialogAction,{onClick:g,className:"bg-red-600 hover:bg-red-700",disabled:c,children:c?"Removing...":"Remove Domain"})]})]})})]})}function $(){let{toast:e}=(0,i.useToast)(),{currentTenant:t,refreshTenant:s}=(0,y.S8)(),[C,k]=(0,r.useState)(null),[_,S]=(0,r.useState)(null),[D,T]=(0,r.useState)([]),[F,I]=(0,r.useState)(!1),[P,A]=(0,r.useState)(!0),[z,B]=(0,r.useState)(!1),[E,Z]=(0,r.useState)(!1),[L,H]=(0,r.useState)({}),[V,q]=(0,r.useState)(""),[M,$]=(0,r.useState)("Member"),O=(0,r.useCallback)(async()=>{if(t)try{A(!0);let e=await w.getTenant(t.id);k(e),H(e);let s=await w.getStats(t.id);S(s);let a=await w.listInvitations(t.id);T(a)}catch(t){N.k.error("Failed to load tenant data",t),e({title:"Error",description:"Failed to load organization data",variant:"destructive"})}finally{A(!1)}},[t,e]),U=async()=>{if(t)try{B(!0);let a={name:L.name,slug:L.slug,description:L.description,website:L.website,contact_email:L.contact_email,contact_phone:L.contact_phone,address:L.address,industry:L.industry,company_size:L.company_size,tax_id:L.tax_id,billing_email:L.billing_email},r=Object.fromEntries(Object.entries(a).filter(([,e])=>void 0!==e));await w.updateTenant(t.id,r),await O(),await s(),I(!1),N.k.info("Organization settings updated",{tenantId:t.id}),e({title:"Success",description:"Organization settings updated successfully"})}catch(t){N.k.error("Failed to save organization",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to update organization",variant:"destructive"})}finally{B(!1)}},Y=async()=>{if(t&&V)try{await w.createInvitation(t.id,{email:V,role:M,expires_in_days:7}),await O(),Z(!1),q(""),$("Member"),N.k.info("Team invitation sent",{email:V,role:M}),e({title:"Success",description:`Invitation sent to ${V}`})}catch(t){N.k.error("Failed to send invitation",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to send invitation",variant:"destructive"})}},G=async s=>{if(t)try{await w.revokeInvitation(t.id,s),await O(),N.k.info("Team invitation revoked",{invitationId:s}),e({title:"Success",description:"Invitation revoked successfully"})}catch(t){N.k.error("Failed to revoke invitation",t),e({title:"Error",description:t instanceof Error?t.message:"Failed to revoke invitation",variant:"destructive"})}},K=e=>{let t={active:{color:"bg-green-500/10 text-green-500 dark:bg-green-500/20",label:"Active"},trial:{color:"bg-blue-500/10 text-blue-500 dark:bg-blue-500/20",label:"Trial"},suspended:{color:"bg-orange-500/10 text-orange-500 dark:bg-orange-500/20",label:"Suspended"},cancelled:{color:"bg-red-500/10 text-red-500 dark:bg-red-500/20",label:"Cancelled"},expired:{color:"bg-red-500/10 text-red-500 dark:bg-red-500/20",label:"Expired"}}[e]||{color:"bg-card0/10 text-muted-foreground",label:e};return(0,a.jsx)(i.Badge,{className:t.color,children:t.label})},J=e=>{let t={pending:{color:"bg-yellow-500/10 text-yellow-500 dark:bg-yellow-500/20",label:"Pending"},accepted:{color:"bg-green-500/10 text-green-500 dark:bg-green-500/20",label:"Accepted"},revoked:{color:"bg-red-500/10 text-red-500 dark:bg-red-500/20",label:"Revoked"},expired:{color:"bg-card0/10 text-muted-foreground dark:bg-card0/20",label:"Expired"}}[e]||{color:"bg-card0/10 text-muted-foreground",label:e};return(0,a.jsx)(i.Badge,{className:t.color,children:t.label})};return P?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(n.Z,{className:"h-8 w-8 animate-spin text-sky-500 dark:text-sky-400"})}):C?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground dark:text-white",children:"Organization Settings"}),(0,a.jsx)("p",{className:"text-foreground dark:text-muted-foreground mt-2",children:"Manage your organization profile, team, and settings"})]}),"active"!==C.status&&(0,a.jsx)(i.Card,{className:"border-orange-200 dark:border-orange-900 bg-orange-50 dark:bg-orange-950/20",children:(0,a.jsx)(i.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-orange-900 dark:text-orange-200",children:["Account Status: ",K(C.status)]}),(0,a.jsxs)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:["trial"===C.status&&C.trial_ends_at&&`Your trial period ends on ${new Date(C.trial_ends_at).toLocaleDateString()}`,"suspended"===C.status&&"Your account has been suspended. Contact support for assistance.","cancelled"===C.status&&"Your account has been cancelled.","expired"===C.status&&"Your subscription has expired."]})]})]})})}),(0,a.jsxs)(i.Tabs,{defaultValue:"general",className:"space-y-4",children:[(0,a.jsxs)(i.TabsList,{className:"bg-muted dark:bg-accent",children:[(0,a.jsx)(i.TabsTrigger,{value:"general",children:"General"}),(0,a.jsx)(i.TabsTrigger,{value:"invitations",children:"Team Invitations"}),(0,a.jsx)(i.TabsTrigger,{value:"stats",children:"Statistics"}),(0,a.jsx)(i.TabsTrigger,{value:"billing",children:"Billing"}),(0,a.jsx)(i.TabsTrigger,{value:"security",children:"Security"})]}),(0,a.jsx)(i.TabsContent,{value:"general",className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"Organization Profile"}),(0,a.jsx)(i.CardDescription,{className:"text-foreground dark:text-muted-foreground",children:"Basic information about your organization"})]}),F?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",onClick:()=>{C&&H(C),I(!1)},disabled:z,children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,a.jsxs)(i.Button,{onClick:U,disabled:z,children:[z?(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Save"]})]}):(0,a.jsxs)(i.Button,{onClick:()=>I(!0),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(i.Avatar,{className:"h-20 w-20",children:[(0,a.jsx)(i.AvatarImage,{src:C.logo_url||void 0}),(0,a.jsx)(i.AvatarFallback,{className:"text-2xl bg-sky-500 dark:bg-sky-600 text-white",children:C.name.slice(0,2).toUpperCase()})]}),F&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Upload Logo"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG or SVG, max 2MB"})]})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-name",children:"Organization Name"}),(0,a.jsx)(i.Input,{id:"org-name",value:L.name||"",onChange:e=>H({...L,name:e.target.value}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-slug",children:"URL Slug"}),(0,a.jsx)(i.Input,{id:"org-slug",value:L.slug||"",onChange:e=>H({...L,slug:e.target.value}),disabled:!F,placeholder:"acme-corp"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-description",children:"Description"}),(0,a.jsx)(i.Textarea,{id:"org-description",value:L.description||"",onChange:e=>H({...L,description:e.target.value}),disabled:!F,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-website",children:"Website"}),(0,a.jsx)(i.Input,{id:"org-website",type:"url",value:L.website||"",onChange:e=>H({...L,website:e.target.value}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-email",children:"Contact Email"}),(0,a.jsx)(i.Input,{id:"org-email",type:"email",value:L.contact_email||"",onChange:e=>H({...L,contact_email:e.target.value}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-phone",children:"Phone Number"}),(0,a.jsx)(i.Input,{id:"org-phone",type:"tel",value:L.contact_phone||"",onChange:e=>H({...L,contact_phone:e.target.value}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-industry",children:"Industry"}),(0,a.jsx)(i.Input,{id:"org-industry",value:L.industry||"",onChange:e=>H({...L,industry:e.target.value}),disabled:!F,placeholder:"Technology, Finance, etc."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-size",children:"Company Size"}),(0,a.jsx)(i.Input,{id:"org-size",value:L.company_size||"",onChange:e=>H({...L,company_size:e.target.value}),disabled:!F,placeholder:"1-10, 11-50, etc."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-foreground dark:text-white",children:"Address"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-street",children:"Street Address"}),(0,a.jsx)(i.Input,{id:"org-street",value:L.address?.street||"",onChange:e=>H({...L,address:{...L.address,street:e.target.value}}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-city",children:"City"}),(0,a.jsx)(i.Input,{id:"org-city",value:L.address?.city||"",onChange:e=>H({...L,address:{...L.address,city:e.target.value}}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-state",children:"State/Province"}),(0,a.jsx)(i.Input,{id:"org-state",value:L.address?.state||"",onChange:e=>H({...L,address:{...L.address,state:e.target.value}}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-zip",children:"ZIP/Postal Code"}),(0,a.jsx)(i.Input,{id:"org-zip",value:L.address?.zip||"",onChange:e=>H({...L,address:{...L.address,zip:e.target.value}}),disabled:!F})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"org-country",children:"Country"}),(0,a.jsx)(i.Input,{id:"org-country",value:L.address?.country||"",onChange:e=>H({...L,address:{...L.address,country:e.target.value}}),disabled:!F})]})]})]})]})]})}),(0,a.jsx)(i.TabsContent,{value:"invitations",className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"Team Invitations"}),(0,a.jsx)(i.CardDescription,{className:"text-foreground dark:text-muted-foreground",children:"Manage pending and sent invitations"})]}),(0,a.jsxs)(i.Button,{onClick:()=>Z(!0),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Invite Member"]})]})}),(0,a.jsx)(i.CardContent,{children:0===D.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-foreground dark:text-muted-foreground",children:"No invitations sent yet"}),(0,a.jsxs)(i.Button,{variant:"outline",className:"mt-4",onClick:()=>Z(!0),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Send First Invitation"]})]}):(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Email"}),(0,a.jsx)(i.TableHead,{children:"Role"}),(0,a.jsx)(i.TableHead,{children:"Status"}),(0,a.jsx)(i.TableHead,{children:"Invited By"}),(0,a.jsx)(i.TableHead,{children:"Sent"}),(0,a.jsx)(i.TableHead,{children:"Expires"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(i.TableBody,{children:D.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"font-medium",children:e.email}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(i.Badge,{variant:"outline",children:e.role})}),(0,a.jsx)(i.TableCell,{children:J(e.status)}),(0,a.jsx)(i.TableCell,{className:"text-sm text-foreground dark:text-muted-foreground",children:e.invited_by}),(0,a.jsx)(i.TableCell,{className:"text-sm text-foreground dark:text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)(i.TableCell,{className:"text-sm text-foreground dark:text-muted-foreground",children:new Date(e.expires_at).toLocaleDateString()}),(0,a.jsx)(i.TableCell,{className:"text-right",children:"pending"===e.status&&(0,a.jsxs)(i.DropdownMenu,{children:[(0,a.jsx)(i.DropdownMenuTrigger,{children:(0,a.jsx)(i.Button,{variant:"ghost",className:"h-8 w-8 p-0","aria-label":`Open actions for invitation ${e.email}`,title:`Open actions for invitation ${e.email}`,children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(i.DropdownMenuContent,{align:"end",children:(0,a.jsxs)(i.DropdownMenuItem,{onClick:()=>G(e.id),className:"text-red-600 dark:text-red-400",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Revoke"]})})]})})]},e.id))})]})})]})}),(0,a.jsx)(i.TabsContent,{value:"stats",className:"space-y-4",children:_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Total Users"}),(0,a.jsx)(g.Z,{className:"h-4 w-4 text-foreground dark:text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-foreground dark:text-white",children:_.total_users}),(0,a.jsxs)("p",{className:"text-xs text-foreground dark:text-muted-foreground mt-1",children:[_.active_users," active"]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"API Calls"}),(0,a.jsx)(p.Z,{className:"h-4 w-4 text-foreground dark:text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-foreground dark:text-white",children:_.total_api_calls.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-foreground dark:text-muted-foreground mt-1",children:"This period"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Storage Used"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-foreground dark:text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-foreground dark:text-white",children:[(_.storage_used/1024/1024/1024).toFixed(2)," GB"]}),(0,a.jsx)("p",{className:"text-xs text-foreground dark:text-muted-foreground mt-1",children:"Across all files"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Features Enabled"}),(0,a.jsx)(j.Z,{className:"h-4 w-4 text-foreground dark:text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-foreground dark:text-white",children:_.features_enabled}),(0,a.jsx)("p",{className:"text-xs text-foreground dark:text-muted-foreground mt-1",children:"Active features"})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"Plan Information"})}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Current Plan"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground dark:text-white mt-1",children:w.getPlanDisplayName(_.plan)})]}),(0,a.jsx)(i.Badge,{variant:"outline",className:"text-lg px-3 py-1",children:w.getPlanDisplayName(_.plan)})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Account Status"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground dark:text-white mt-1",children:w.getStatusDisplayName(_.status)})]}),K(_.status)]}),void 0!==_.days_until_trial_end&&null!==_.days_until_trial_end&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Trial Period"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground dark:text-white mt-1",children:_.days_until_trial_end>0?`${_.days_until_trial_end} days remaining`:"Expired"})]})]}),void 0!==_.days_until_subscription_end&&null!==_.days_until_subscription_end&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-foreground dark:text-muted-foreground",children:"Subscription"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground dark:text-white mt-1",children:_.days_until_subscription_end>0?`Renews in ${_.days_until_subscription_end} days`:"Expired"})]})]})]})]})]})}),(0,a.jsx)(i.TabsContent,{value:"billing",className:"space-y-4",children:(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"Billing Information"}),(0,a.jsx)(i.CardDescription,{className:"text-foreground dark:text-muted-foreground",children:"Manage your organization's billing details"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-foreground dark:text-white",children:"Current Plan"}),(0,a.jsxs)("p",{className:"text-sm text-foreground dark:text-muted-foreground",children:["You are on the ",w.getPlanDisplayName(C.plan??"free")," plan"]})]}),(0,a.jsx)(i.Badge,{variant:"default",className:"text-lg px-3 py-1",children:w.getPlanDisplayName(C.plan??"free")})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"billing-email",children:"Billing Email"}),(0,a.jsx)(i.Input,{id:"billing-email",type:"email",value:C.billing_email||C.contact_email||"",disabled:!0,className:"bg-card dark:bg-card"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"tax-id",children:"Tax ID"}),(0,a.jsx)(i.Input,{id:"tax-id",value:C.tax_id||"Not provided",disabled:!0,className:"bg-card dark:bg-card"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"billing-cycle",children:"Billing Cycle"}),(0,a.jsx)(i.Input,{id:"billing-cycle",value:C.billing_cycle,disabled:!0,className:"bg-card dark:bg-card capitalize"})]})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.Button,{variant:"outline",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Update Payment Method"]}),(0,a.jsxs)(i.Button,{variant:"outline",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Download Invoices"]})]})]})]})}),(0,a.jsxs)(i.TabsContent,{value:"security",className:"space-y-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"Security Settings"}),(0,a.jsx)(i.CardDescription,{className:"text-foreground dark:text-muted-foreground",children:"Configure organization-wide security settings"})]}),(0,a.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.Label,{className:"text-foreground dark:text-white",children:"Require 2FA for all members"}),(0,a.jsx)("p",{className:"text-sm text-foreground dark:text-muted-foreground",children:"Enforce two-factor authentication"})]}),(0,a.jsx)(i.Switch,{})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.Label,{className:"text-foreground dark:text-white",children:"IP allowlist"}),(0,a.jsx)("p",{className:"text-sm text-foreground dark:text-muted-foreground",children:"Restrict access to specific IP addresses"})]}),(0,a.jsx)(i.Switch,{})]}),(0,a.jsx)(i.Separator,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.Label,{className:"text-foreground dark:text-white",children:"SSO (Single Sign-On)"}),(0,a.jsx)("p",{className:"text-sm text-foreground dark:text-muted-foreground",children:"Enable SSO with your identity provider"})]}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",children:"Configure"})]})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{children:[(0,a.jsx)(i.CardTitle,{className:"text-foreground dark:text-white",children:"API Keys"}),(0,a.jsx)(i.CardDescription,{className:"text-foreground dark:text-muted-foreground",children:"Manage API keys for programmatic access"})]}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"text-sm text-foreground dark:text-muted-foreground",children:"No API keys created yet"}),(0,a.jsxs)(i.Button,{variant:"outline",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Create API Key"]})]})})]}),t&&(0,a.jsx)(R,{tenantId:t.id})]})]}),(0,a.jsx)(i.Dialog,{open:E,onOpenChange:Z,children:(0,a.jsxs)(i.DialogContent,{className:"bg-card",children:[(0,a.jsxs)(i.DialogHeader,{children:[(0,a.jsx)(i.DialogTitle,{className:"text-foreground dark:text-white",children:"Invite Team Member"}),(0,a.jsx)(i.DialogDescription,{className:"text-foreground dark:text-muted-foreground",children:"Send an invitation to join your organization"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"invite-email",children:"Email Address"}),(0,a.jsx)(i.Input,{id:"invite-email",type:"email",value:V,onChange:e=>q(e.target.value),placeholder:"colleague@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Label,{htmlFor:"invite-role",children:"Role"}),(0,a.jsx)(i.Input,{id:"invite-role",value:M,onChange:e=>$(e.target.value),placeholder:"Member, Admin, etc."})]})]}),(0,a.jsxs)(i.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:Y,disabled:!V,children:"Send Invitation"})]})]})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-orange-500 dark:text-orange-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground dark:text-white",children:"No Organization Found"}),(0,a.jsx)("p",{className:"text-foreground dark:text-muted-foreground mt-2",children:"Unable to load organization data"})]})})}},40889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/organization/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2793,1009,6226,657,6032,4218],()=>s(33727));module.exports=a})();