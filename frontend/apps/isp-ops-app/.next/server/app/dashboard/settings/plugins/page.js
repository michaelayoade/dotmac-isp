(()=>{var e={};e.id=1933,e.ids=[1933],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},8139:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),t(54041),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),n=t(37922),l=t.n(n),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["settings",{children:["plugins",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,54041)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/plugins/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/plugins/page.tsx"],u="/dashboard/settings/plugins/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/settings/plugins/page",pathname:"/dashboard/settings/plugins",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63584:(e,s,t)=>{Promise.resolve().then(t.bind(t,98569))},98569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Y});var a=t(10326),r=t(17577),n=t(77506),l=t(69669),i=t(30812),d=t(21405),o=t(83855),c=t(88378),u=t(30361),m=t(50949),x=t(88307),h=t(66697),g=t(69508),p=t(98091),f=t(91216),j=t(12714),b=t(37358),v=t(48998),N=t(63685),y=t(94019),w=t(12978);let k=e=>null==e?void 0:e,_=({field:e,value:s,onChange:t,showSecrets:r,onToggleSecret:n,error:l})=>{let i=`w-full px-3 py-2 bg-accent border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-sky-500 ${l?"border-rose-500":"border-border"}`;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:`field-${e.key}`,className:"block text-sm font-medium text-muted-foreground",children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-rose-400 ml-1",children:"*"}),e.is_secret&&(0,a.jsx)("span",{className:"text-amber-400 ml-1 text-xs",children:"(Secret)"})]}),e.description&&"boolean"!==e.type&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description}),(()=>{switch(e.type){case"string":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"text",value:s||"",onChange:e=>t(e.target.value),placeholder:k(e.description),className:i,minLength:k(e.min_length),maxLength:k(e.max_length),pattern:k(e.pattern),required:e.required});case"secret":return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:`field-${e.key}`,type:r[e.key]?"text":"password",value:s||"",onChange:e=>t(e.target.value),placeholder:"Enter secret value",className:`${i} pr-10`,minLength:k(e.min_length),maxLength:k(e.max_length),required:e.required}),(0,a.jsx)("button",{type:"button",onClick:()=>n(e.key),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground",children:r[e.key]?(0,a.jsx)(f.Z,{className:"h-4 w-4"}):(0,a.jsx)(j.Z,{className:"h-4 w-4"})})]});case"boolean":return(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{id:`field-${e.key}`,type:"checkbox",checked:s||!1,onChange:e=>t(e.target.checked),className:"h-4 w-4 rounded border-border bg-accent text-sky-500 focus:ring-sky-500"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:e.description||"Enable this option"})]});case"integer":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"number",value:s||"",onChange:e=>t(parseInt(e.target.value,10)||0),placeholder:k(e.description),className:i,min:k(e.min_value),max:k(e.max_value),step:1,required:e.required});case"float":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"number",value:s||"",onChange:e=>t(parseFloat(e.target.value)||0),placeholder:k(e.description),className:i,min:k(e.min_value),max:k(e.max_value),step:"any",required:e.required});case"select":return(0,a.jsxs)("select",{id:`field-${e.key}`,value:s||"",onChange:e=>t(e.target.value),className:i,required:e.required,children:[(0,a.jsx)("option",{value:"",children:`Select ${e.label.toLowerCase()}...`}),e.options?.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]});case"json":return(0,a.jsx)("textarea",{id:`field-${e.key}`,value:"object"==typeof s?JSON.stringify(s,null,2):s||"",onChange:e=>{try{let s=JSON.parse(e.target.value);t(s)}catch{t(e.target.value)}},placeholder:'{"key": "value"}',rows:4,className:`${i} font-mono text-sm`,required:e.required});case"url":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"url",value:s||"",onChange:e=>t(e.target.value),placeholder:"https://example.com",className:i,required:e.required});case"email":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"email",value:s||"",onChange:e=>t(e.target.value),placeholder:"user@example.com",className:i,required:e.required});case"phone":return(0,a.jsx)("input",{id:`field-${e.key}`,type:"tel",value:s||"",onChange:e=>t(e.target.value),placeholder:"+1234567890",className:i,minLength:k(e.min_length),maxLength:k(e.max_length),pattern:k(e.pattern)??"^\\+[1-9]\\d{1,14}$",required:e.required});case"date":return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:`field-${e.key}`,type:"date",value:s||"",onChange:e=>t(e.target.value),className:`${i} pr-10`,required:e.required}),(0,a.jsx)(b.Z,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]});case"datetime":return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:`field-${e.key}`,type:"datetime-local",value:s||"",onChange:e=>t(e.target.value),className:`${i} pr-10`,required:e.required}),(0,a.jsx)(v.Z,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"})]});case"file":return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"file",onChange:e=>{let s=e.target.files?.[0];if(s){let e=new FileReader;e.onload=()=>t(e.result),e.readAsDataURL(s)}},className:"hidden",id:`file-${e.key}`,required:e.required}),(0,a.jsxs)("label",{htmlFor:`file-${e.key}`,className:`${i} cursor-pointer flex items-center gap-2 hover:bg-muted`,children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),s?"File selected":"Choose file..."]})]}),s&&"string"==typeof s?(0,a.jsxs)("div",{className:"text-xs text-muted-foreground truncate",children:[s.slice(0,50),"..."]}):null]});default:return(0,a.jsx)("input",{id:`field-${e.key}`,type:"text",value:s||"",onChange:e=>t(e.target.value),placeholder:k(e.description),className:i,required:e.required})}})(),l&&(0,a.jsx)("p",{className:"text-xs text-rose-400",children:l}),e.validation_rules.length>0&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-0.5",children:e.validation_rules.map((e,s)=>{let t=e.message??[e.type,void 0!==e.value?String(e.value):null].filter(Boolean).join(": ");return(0,a.jsx)("li",{children:t},s)})})})]})},C=({plugin:e,instance:s,availablePlugins:t,onSubmit:i,onCancel:d,onTestConnection:o})=>{let[c,m]=(0,r.useState)(e||null),[x,h]=(0,r.useState)(s?.instance_name||""),[g,p]=(0,r.useState)({}),[f,j]=(0,r.useState)({}),[b,v]=(0,r.useState)({}),[N,k]=(0,r.useState)(!1),[C,q]=(0,r.useState)(!1),[$,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(s&&s.has_configuration){let e={};s.config_schema.fields.forEach(s=>{void 0!==s.default&&(e[s.key]=s.default)}),p(e)}else if(c){let e={};c.fields.forEach(s=>{void 0!==s.default&&(e[s.key]=s.default)}),p(e)}},[s,c]);let Z=(e,s)=>{p(t=>({...t,[e]:s})),b[e]&&v(s=>{let t={...s};return delete t[e],t})},P=()=>{let e={};return c?(x.trim()||(e.instanceName="Instance name is required"),c.fields.forEach(s=>{let t=g[s.key];if(s.required&&(null==t||""===t)){e[s.key]=`${s.label} is required`;return}if(null!=t&&""!==t){if("email"===s.type&&t&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)&&(e[s.key]="Invalid email format"),"url"===s.type&&t&&!/^https?:\/\/.+/.test(t)&&(e[s.key]="Invalid URL format"),"phone"===s.type&&t&&s.pattern&&!new RegExp(s.pattern).test(t)&&(e[s.key]="Invalid phone number format"),null!=s.min_length&&t.length<s.min_length&&(e[s.key]=`Minimum length is ${s.min_length} characters`),null!=s.max_length&&t.length>s.max_length&&(e[s.key]=`Maximum length is ${s.max_length} characters`),"integer"===s.type||"float"===s.type){let a=Number(t);null!=s.min_value&&a<s.min_value&&(e[s.key]=`Minimum value is ${s.min_value}`),null!=s.max_value&&a>s.max_value&&(e[s.key]=`Maximum value is ${s.max_value}`)}if("json"===s.type&&"string"==typeof t)try{JSON.parse(t)}catch{e[s.key]="Invalid JSON format"}}}),v(e),0===Object.keys(e).length):(e.plugin="Please select a plugin",v(e),!1)},F=async e=>{if(e.preventDefault(),P()){k(!0);try{await i({plugin_name:c.name,instance_name:x,configuration:g})}catch(e){v({submit:e instanceof Error?e.message:"Failed to submit form"})}finally{k(!1)}}},A=async()=>{if(c&&P()){q(!0),S(null);try{let e=await o(s?.id??"",g);S(e)}catch(e){S({success:!1,message:e instanceof Error?e.message:"Connection test failed",details:{},timestamp:new Date().toISOString(),response_time_ms:null})}finally{q(!1)}}},L=e=>{j(s=>({...s,[e]:!s[e]}))},D=c?.fields?.reduce((e,s)=>{let t=s.group||"Configuration";return e[t]||(e[t]=[]),e[t].push(s),e},{})??{};return(0,a.jsx)("div",{className:"fixed inset-0 bg-card/75 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:s?"Edit Plugin Configuration":"Add New Plugin Instance"}),(0,a.jsx)("button",{onClick:d,"aria-label":"Close",className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,a.jsx)(y.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("form",{onSubmit:F,noValidate:!0,className:"flex flex-col max-h-[calc(90vh-80px)]","data-testid":"plugin-form",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[!s&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"plugin-select",className:"block text-sm font-medium text-muted-foreground",children:["Plugin ",(0,a.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,a.jsxs)("select",{id:"plugin-select",value:c?.name||"",onChange:e=>{m(t.find(s=>s.name===e.target.value)||null),p({})},className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a plugin..."}),t.map(e=>(0,a.jsxs)("option",{value:e.name,children:[e.name," - ",e.description]},e.name))]}),b.plugin&&(0,a.jsx)("p",{className:"text-xs text-rose-400",children:b.plugin})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{htmlFor:"instance-name",className:"block text-sm font-medium text-muted-foreground",children:["Instance Name ",(0,a.jsx)("span",{className:"text-rose-400",children:"*"})]}),(0,a.jsx)("input",{id:"instance-name",type:"text",value:x,onChange:e=>h(e.target.value),placeholder:"My Plugin Instance",className:"w-full px-3 py-2 bg-accent border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-sky-500",required:!0,disabled:!!s}),b.instanceName&&(0,a.jsx)("p",{className:"text-xs text-rose-400",children:b.instanceName})]}),c&&(0,a.jsxs)("div",{className:"bg-accent/50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-foreground mb-2",children:c.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:c.description}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Version: ",c.version]}),c.author&&(0,a.jsxs)("span",{children:["By: ",c.author]}),(0,a.jsxs)("span",{children:["Type: ",c.type]})]}),c.tags&&(0,a.jsx)("div",{className:"flex items-center gap-1 mt-2",children:c.tags.map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-muted text-xs rounded-full",children:e},e))})]}),c&&Object.keys(D).map(e=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground border-b border-border pb-2",children:e}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(D[e]||[]).sort((e,s)=>(e.order||0)-(s.order||0)).map(e=>(0,a.jsx)("div",{className:"json"===e.type?"md:col-span-2":"",children:(0,a.jsx)(_,{field:e,value:g[e.key],onChange:s=>Z(e.key,s),showSecrets:f,onToggleSecret:L,error:b[e.key]})},e.key))})]},e)),$&&(0,a.jsx)("div",{className:`p-4 rounded-lg border ${$.success?"bg-emerald-500/10 border-emerald-500/20":"bg-rose-500/10 border-rose-500/20"}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[$.success?(0,a.jsx)(u.Z,{className:"h-4 w-4 text-emerald-400"}):(0,a.jsx)(l.Z,{className:"h-4 w-4 text-rose-400"}),(0,a.jsx)("span",{className:`text-sm ${$.success?"text-emerald-400":"text-rose-400"}`,children:$.message})]})}),b.submit&&(0,a.jsx)("div",{className:"p-4 rounded-lg border border-rose-500/20 bg-rose-500/10",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 text-rose-400"}),(0,a.jsx)("span",{className:"text-sm text-rose-400",children:b.submit})]})})]}),(0,a.jsxs)("div",{className:"p-6 border-t border-border flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 text-muted-foreground hover:text-foreground transition-colors",children:"Cancel"}),c?.supports_test_connection&&(0,a.jsxs)("button",{type:"button",onClick:A,disabled:C,className:"px-4 py-2 border border-border text-muted-foreground rounded-lg hover:bg-accent transition-colors flex items-center gap-2 disabled:opacity-50",children:[C?(0,a.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Test Connection"]}),(0,a.jsxs)("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 disabled:bg-muted text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"submit-plugin-form",children:[N?(0,a.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}):null,s?"Update":"Create"," Plugin"]})]})]})]})})};var q=t(3634),$=t(58038),S=t(17069),Z=t(24061),P=t(7027);let F=e=>{switch(e){case"notification":return(0,a.jsx)(h.Z,{className:"h-5 w-5 text-sky-400"});case"integration":return(0,a.jsx)(q.Z,{className:"h-5 w-5 text-amber-400"});case"payment":return(0,a.jsx)($.Z,{className:"h-5 w-5 text-emerald-400"});case"storage":return(0,a.jsx)(c.Z,{className:"h-5 w-5 text-purple-400"});case"search":return(0,a.jsx)(x.Z,{className:"h-5 w-5 text-teal-400"});case"analytics":return(0,a.jsx)(S.Z,{className:"h-5 w-5 text-emerald-400"});case"authentication":return(0,a.jsx)(Z.Z,{className:"h-5 w-5 text-indigo-400"});case"workflow":return(0,a.jsx)(v.Z,{className:"h-5 w-5 text-orange-400"});default:return(0,a.jsx)(i.Z,{className:"h-5 w-5 text-muted-foreground"})}},A=e=>{switch(e){case"notification":return"bg-sky-500/10 text-sky-400 border-sky-500/20";case"integration":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"payment":case"analytics":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"storage":return"bg-purple-500/10 text-purple-400 border-purple-500/20";case"search":return"bg-teal-500/10 text-teal-400 border-teal-500/20";case"authentication":return"bg-indigo-500/10 text-indigo-400 border-indigo-500/20";case"workflow":return"bg-orange-500/10 text-orange-400 border-orange-500/20";default:return"bg-muted/10 text-muted-foreground border-border"}},L=e=>{switch(e){case"active":return"bg-emerald-500/10 text-emerald-400";case"inactive":default:return"bg-card0/10 text-muted-foreground";case"error":return"bg-rose-500/10 text-rose-400";case"configured":return"bg-sky-500/10 text-sky-400";case"registered":return"bg-muted/10 text-muted-foreground"}},D=({plugin:e,instances:s,onInstall:t})=>{let[n,l]=(0,r.useState)(!1),i=s.filter(e=>"active"===e.status),d=s.filter(e=>"error"===e.status),c=s.length,u=e.fields.reduce((e,s)=>{let t=s.group||"Configuration";return e[t]=(e[t]||0)+1,e},{}),m=e.fields.filter(e=>e.required).length,x=e.fields.filter(e=>e.is_secret).length;return(0,a.jsxs)("div",{className:"bg-card/50 border border-border rounded-lg hover:border-border transition-colors","data-testid":"plugin-card",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:F(e.type)}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground truncate","data-testid":"plugin-name",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.description})]}),(0,a.jsx)("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${A(e.type)}`,children:e.type})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["v",e.version]}),e.author&&(0,a.jsxs)("span",{children:["by ",e.author]}),(0,a.jsxs)("span",{children:[e.fields.length," fields"]})]}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-accent text-xs rounded-full text-muted-foreground",children:e},e)),e.tags.length>3&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-accent text-xs rounded-full text-muted-foreground",children:["+",e.tags.length-3," more"]})]})]}),c>0&&(0,a.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Instances"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),(0,a.jsx)("span",{className:"text-emerald-400",children:i.length})]}),d.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-rose-500 rounded-full"}),(0,a.jsx)("span",{className:"text-rose-400",children:d.length})]}),(0,a.jsxs)("span",{className:"text-muted-foreground",children:["of ",c]})]})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[s.slice(0,2).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground truncate",children:e.instance_name}),(0,a.jsx)("span",{className:`px-2 py-0.5 rounded-full ${L(e.status)}`,children:e.status})]},e.id)),s.length>2&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:["+",s.length-2," more instances"]})]})]}),n&&(0,a.jsxs)("div",{className:"p-4 border-b border-border space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Configuration"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Total Fields"}),(0,a.jsx)("span",{className:"text-foreground",children:e.fields.length})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Required"}),(0,a.jsx)("span",{className:"text-foreground",children:m})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Secrets"}),(0,a.jsx)("span",{className:"text-foreground",children:x})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Groups"}),(0,a.jsx)("span",{className:"text-foreground",children:Object.keys(u).length})]})]})]}),Object.keys(u).length>1&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Field Groups"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(u).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:e}),(0,a.jsxs)("span",{className:"text-foreground",children:[s," fields"]})]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Features"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.supports_health_check&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-500/10 text-emerald-400 rounded-full text-xs",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),"Health Check"]}),e.supports_test_connection&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-sky-500/10 text-sky-400 rounded-full text-xs",children:[(0,a.jsx)(q.Z,{className:"h-3 w-3"}),"Test Connection"]}),x>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-amber-500/10 text-amber-400 rounded-full text-xs",children:[(0,a.jsx)($.Z,{className:"h-3 w-3"}),"Secure Config"]})]})]}),e.dependencies&&e.dependencies.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Dependencies"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.dependencies.slice(0,4).map(e=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-accent text-xs rounded text-muted-foreground",children:e},e)),e.dependencies.length>4&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-accent text-xs rounded text-muted-foreground",children:["+",e.dependencies.length-4," more"]})]})]})]}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>l(!n),className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:n?"Hide Details":"Show Details"}),e.homepage&&(0,a.jsxs)("a",{href:e.homepage,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1",children:[(0,a.jsx)(P.Z,{className:"h-3 w-3"}),"Docs"]})]}),(0,a.jsxs)("button",{onClick:()=>t(e),className:"px-3 py-1.5 bg-sky-500 hover:bg-sky-600 text-white text-sm rounded-lg transition-colors flex items-center gap-1.5","data-testid":"install-plugin-button",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Add Instance"]})]})})]})};var E=t(41291),I=t(29163),T=t(18019),O=t(29771);let R=e=>e instanceof Error?e:Error("string"==typeof e?e:String(e)),M=e=>{switch(e){case"healthy":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-emerald-500"});case"unhealthy":return(0,a.jsx)(l.Z,{className:"h-5 w-5 text-rose-500"});case"error":return(0,a.jsx)(E.Z,{className:"h-5 w-5 text-rose-500"});default:return(0,a.jsx)(m.Z,{className:"h-5 w-5 text-amber-500"})}},U=e=>{switch(e){case"healthy":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"unhealthy":case"error":return"bg-rose-500/10 text-rose-400 border-rose-500/20";default:return"bg-amber-500/10 text-amber-400 border-amber-500/20"}},H=e=>void 0===e?"N/A":e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`,K=e=>{try{return new Date(e).toLocaleString()}catch{return"Unknown"}},G=({instances:e,healthChecks:s,onRefresh:t})=>{let[n,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),x=async()=>{i(!0);try{await t()}catch(e){O.k.error("Failed to refresh plugin health checks",R(e))}finally{i(!1)}},g=s.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),p=e.length,f=g.healthy||0,j=(g.unhealthy||0)+(g.error||0);g.unknown;let b=p>0?Math.round(f/p*100):0,N=s.map(e=>e.response_time_ms).filter(e=>void 0!==e),y=N.length>0?N.reduce((e,s)=>e+s,0)/N.length:0,w=e.map(e=>{let t=s.find(s=>s.plugin_instance_id===e.id);return{...e,health:t}}).sort((e,s)=>{if(!e.health&&!s.health)return 0;if(!e.health)return 1;if(!s.health)return -1;let t={error:0,unhealthy:1,unknown:2,healthy:3};return t[e.health.status]-t[s.health.status]});return(0,a.jsxs)("div",{className:"space-y-6","data-testid":"plugin-health-dashboard",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4","data-testid":"plugin-stats",children:[(0,a.jsxs)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-semibold text-foreground","data-testid":"health-percentage",children:[b,"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Overall Health"})]}),(0,a.jsx)("div",{className:`p-2 rounded-full ${b>=90?"bg-emerald-500/10":b>=70?"bg-amber-500/10":"bg-rose-500/10"}`,children:b>=90?(0,a.jsx)(S.Z,{className:"h-6 w-6 text-emerald-500"}):(0,a.jsx)(I.Z,{className:`h-6 w-6 ${b>=70?"text-amber-500":"text-rose-500"}`})})]}),(0,a.jsx)("div",{className:"mt-2 h-2 bg-accent rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`h-full transition-all duration-500 ${b>=90?"bg-emerald-500":b>=70?"bg-amber-500":"bg-rose-500"}`,style:{width:`${b}%`}})})]}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground","data-testid":"health-healthy-count",children:f}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Healthy"})]}),(0,a.jsx)(u.Z,{className:"h-8 w-8 text-emerald-500"})]})}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground","data-testid":"health-issues-count",children:j}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Issues"})]}),(0,a.jsx)(l.Z,{className:"h-8 w-8 text-rose-500"})]})}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground","data-testid":"health-avg-response",children:H(y)}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg Response"})]}),(0,a.jsx)(q.Z,{className:"h-8 w-8 text-sky-500"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Plugin Health Status"}),(0,a.jsxs)("button",{onClick:x,disabled:n,className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 disabled:bg-muted text-white rounded-lg transition-colors flex items-center gap-2","data-testid":"refresh-health-button",children:[(0,a.jsx)(d.Z,{className:`h-4 w-4 ${n?"animate-spin":""}`}),n?"Checking...":"Refresh Health"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[w.map(e=>{let s=e.health,t=o===e.id;return(0,a.jsxs)("div",{className:"bg-card/50 border border-border rounded-lg overflow-hidden","data-testid":"health-instance",children:[(0,a.jsxs)("div",{className:`p-4 cursor-pointer transition-colors ${t?"bg-accent/50":"hover:bg-accent/30"}`,onClick:()=>c(t?null:e.id),"data-testid":"health-instance-row",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[M(s?.status||"unknown"),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground",children:e.instance_name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.plugin_name})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsx)("div",{className:"text-foreground",children:H(s?.response_time_ms??void 0)}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"Response Time"})]}),(0,a.jsx)("div",{className:`px-3 py-1 rounded-full border text-sm font-medium ${U(s?.status||"unknown")}`,children:s?.status||"unknown"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-sm text-muted-foreground",children:s?.message||"No health data available"}),(0,a.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"h-3 w-3"}),"Last checked: ",s?.timestamp?K(s.timestamp):"Never"]})]}),t&&s&&(0,a.jsxs)("div",{className:"border-t border-border p-4 bg-accent/20",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-foreground mb-3 flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"h-4 w-4"}),"Health Check Details"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)("span",{className:`font-medium ${"healthy"===s.status?"text-emerald-400":"unhealthy"===s.status?"text-rose-400":"error"===s.status?"text-rose-400":"text-amber-400"}`,children:s.status})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Response Time:"}),(0,a.jsx)("span",{className:"text-foreground",children:H(s.response_time_ms??void 0)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Timestamp:"}),(0,a.jsx)("span",{className:"text-foreground",children:K(s.timestamp)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-muted-foreground",children:"Additional Information"}),Object.entries(s.details).length>0?Object.entries(s.details).map(([e,s])=>(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-muted-foreground capitalize",children:[e.replace(/_/g," "),":"]}),(0,a.jsx)("span",{className:"text-foreground max-w-48 truncate",children:"object"==typeof s?JSON.stringify(s):String(s)})]},e)):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No additional details available"})]})]}),e.last_error&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-rose-500/10 border border-rose-500/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 text-rose-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-rose-400 mb-1",children:"Last Error"}),(0,a.jsx)("p",{className:"text-sm text-rose-300",children:e.last_error})]})]})})]})]},e.id)}),0===w.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"No Plugin Instances"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add some plugin instances to monitor their health status."})]})]})]})};var Q=t(48324),J=t(44976),z=t(17010),B=t(59341),V=t(48723),W=t(16704);let X=e=>e instanceof Error?e:Error("string"==typeof e?e:String(e));function Y(){let[e,s]=(0,r.useState)(""),[t,f]=(0,r.useState)("all"),[j,b]=(0,r.useState)("all"),[v,N]=(0,r.useState)("grid"),[y,w]=(0,r.useState)(!1),[k,_]=(0,r.useState)(null),[q,$]=(0,r.useState)(null),{data:S,isLoading:Z,error:P}=(0,Q.a)({queryKey:["plugins","available"],queryFn:async()=>{let e=await B.x1.get("/plugins");return(0,W.uN)(e,"Failed to load available plugins")}}),F=S??[],{data:A,isLoading:L,error:E}=(0,Q.a)({queryKey:["plugins","instances"],queryFn:async()=>{let e=await B.x1.get("/plugins/instances");return(0,W.uN)(e,"Failed to load plugin instances")}}),I=A?.plugins??[],[T,R]=(0,r.useState)([]),M=(0,z.D)({mutationFn:async e=>{let s=await B.x1.post("/plugins/instances/health-check",{instance_ids:e||null});return(0,W.uN)(s,"Failed to run plugin health check")}}),U=function(){let e=(0,J.NL)(),{toast:s}=(0,V.useToast)();return(0,z.D)({mutationFn:async e=>{let s=await B.x1.post("/plugins/instances",e);return(0,W.uN)(s,"Failed to create plugin instance")},onSuccess:t=>{e.invalidateQueries({queryKey:["plugins","instances"]}),s({title:"Plugin instance created",description:`${t.instance_name} was created successfully.`})},onError:e=>{s({title:"Creation failed",description:e.response?.data?.detail||"Failed to create plugin instance",variant:"destructive"})}})}(),H=function(){let e=(0,J.NL)(),{toast:s}=(0,V.useToast)();return(0,z.D)({mutationFn:async({instanceId:e,data:s})=>{let t=await B.x1.put(`/plugins/instances/${e}/configuration`,s);return(0,W.uN)(t,"Failed to update plugin configuration")},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["plugins","instances"]}),e.invalidateQueries({queryKey:["plugins","instances",a.instanceId]}),e.invalidateQueries({queryKey:["plugins","instances",a.instanceId,"configuration"]}),s({title:"Configuration updated",description:"Plugin configuration was updated successfully."})},onError:e=>{s({title:"Update failed",description:e.response?.data?.detail||"Failed to update configuration",variant:"destructive"})}})}(),K=function(){let e=(0,J.NL)(),{toast:s}=(0,V.useToast)();return(0,z.D)({mutationFn:async e=>{let s=await B.x1.delete(`/plugins/instances/${e}`);if(s.status<200||s.status>=300)throw Error("Failed to delete plugin instance")},onSuccess:()=>{e.invalidateQueries({queryKey:["plugins","instances"]}),s({title:"Plugin instance deleted",description:"Plugin instance was removed successfully."})},onError:e=>{s({title:"Deletion failed",description:e.response?.data?.detail||"Failed to delete plugin instance",variant:"destructive"})}})}(),Y=(0,z.D)({mutationFn:async({instanceId:e,configuration:s})=>{let t=await B.x1.post(`/plugins/instances/${e}/test`,{configuration:s||null});return(0,W.uN)(t,"Failed to test plugin connection")}}),ee=function(){let e=(0,J.NL)(),{toast:s}=(0,V.useToast)();return(0,z.D)({mutationFn:async()=>{let e=await B.x1.post("/plugins/refresh");return(0,W.uN)(e,"Failed to refresh plugins")},onSuccess:t=>{e.invalidateQueries({queryKey:["plugins","available"]}),s({title:"Plugins refreshed",description:`Found ${t.available_plugins} available plugins.`})},onError:e=>{s({title:"Refresh failed",description:e.response?.data?.detail||"Failed to refresh plugins",variant:"destructive"})}})}(),es=(0,V.useConfirmDialog)(),et=(0,r.useCallback)(async()=>{try{let e=await M.mutateAsync(void 0);R(e)}catch(e){O.k.error("Failed to load plugin health checks",X(e))}},[M]),ea=async e=>{await U.mutateAsync(e),w(!1),$(null),await et()},er=async(e,s)=>{await H.mutateAsync({instanceId:e,data:{configuration:s}}),_(null),await et()},en=async e=>{await es({title:"Delete plugin instance",description:"Are you sure you want to delete this plugin instance? This cannot be undone.",confirmText:"Delete",variant:"destructive"})&&(await K.mutateAsync(e),R(s=>s.filter(s=>s.plugin_instance_id!==e)))},el=async(e,s)=>await Y.mutateAsync({instanceId:e,configuration:s||null}),ei=async()=>{await ee.mutateAsync(),await et()},ed=e=>{if("all"===e){f("all");return}f(e)},eo=e=>{if("all"===e){b("all");return}b(e)},ec=F.filter(s=>{let a=s.name.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase()),r="all"===t||s.type===t;return a&&r}),eu=I.filter(s=>{let t=s.plugin_name.toLowerCase().includes(e.toLowerCase())||s.instance_name.toLowerCase().includes(e.toLowerCase()),a="all"===j||s.status===j;return t&&a}),em=e=>T.find(s=>s.plugin_instance_id===e),ex=P||E;return Z||L?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-sky-500 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading plugins..."})]})})}):ex?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)(V.Alert,{variant:"destructive",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)(V.AlertDescription,{children:ex.message||"Failed to load plugin data"})]})})}):(0,a.jsx)("main",{role:"main",className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-semibold text-foreground flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-6 w-6 text-sky-500"}),"Plugin Management"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Configure and manage plugins for extended functionality"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:ei,disabled:ee.isPending,className:"px-3 py-2 text-sm border border-border text-muted-foreground rounded-lg hover:bg-accent transition-colors flex items-center gap-2 disabled:opacity-50",children:[(0,a.jsx)(d.Z,{className:`h-4 w-4 ${ee.isPending?"animate-spin":""}`}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>w(!0),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Add Plugin"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-sky-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground",children:F.length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Available Plugins"})]})]})}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground",children:I.length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Active Instances"})]})]})}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-emerald-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground",children:T.filter(e=>"healthy"===e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Healthy"})]})]})}),(0,a.jsx)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.Z,{className:"h-8 w-8 text-amber-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-foreground",children:T.filter(e=>"healthy"!==e.status).length}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Issues"})]})]})})]}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("input",{type:"text",placeholder:"Search plugins...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-card border border-border rounded-lg text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-sky-500"})]}),(0,a.jsx)("select",{value:"grid"===v?t:j,onChange:e=>"grid"===v?ed(e.target.value):eo(e.target.value),className:"px-3 py-2 bg-card border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-sky-500",children:"grid"===v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"notification",children:"Notification"}),(0,a.jsx)("option",{value:"integration",children:"Integration"}),(0,a.jsx)("option",{value:"payment",children:"Payment"}),(0,a.jsx)("option",{value:"storage",children:"Storage"}),(0,a.jsx)("option",{value:"search",children:"Search"}),(0,a.jsx)("option",{value:"analytics",children:"Analytics"}),(0,a.jsx)("option",{value:"authentication",children:"Authentication"}),(0,a.jsx)("option",{value:"workflow",children:"Workflow"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"error",children:"Error"}),(0,a.jsx)("option",{value:"configured",children:"Configured"})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>N("grid"),className:`p-2 rounded-md transition-colors ${"grid"===v?"bg-sky-500 text-white":"bg-accent text-muted-foreground hover:text-foreground"}`,children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-0.5 w-4 h-4",children:[(0,a.jsx)("div",{className:"bg-current rounded-sm"}),(0,a.jsx)("div",{className:"bg-current rounded-sm"}),(0,a.jsx)("div",{className:"bg-current rounded-sm"}),(0,a.jsx)("div",{className:"bg-current rounded-sm"})]})}),(0,a.jsx)("button",{onClick:()=>N("list"),className:`p-2 rounded-md transition-colors ${"list"===v?"bg-sky-500 text-white":"bg-accent text-muted-foreground hover:text-foreground"}`,children:(0,a.jsxs)("div",{className:"space-y-1 w-4 h-4",children:[(0,a.jsx)("div",{className:"bg-current h-0.5 rounded"}),(0,a.jsx)("div",{className:"bg-current h-0.5 rounded"}),(0,a.jsx)("div",{className:"bg-current h-0.5 rounded"})]})}),(0,a.jsx)("button",{onClick:()=>N("health"),className:`p-2 rounded-md transition-colors ${"health"===v?"bg-sky-500 text-white":"bg-accent text-muted-foreground hover:text-foreground"}`,children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})]}),"health"===v?(0,a.jsx)(G,{instances:I,healthChecks:T,onRefresh:et}):"grid"!==v||y?(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Plugin Instances"}),0===eu.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:0===I.length?'No plugin instances configured yet. Click "Add Plugin" to get started.':"No instances match your search criteria."}):(0,a.jsx)("div",{className:"space-y-4",children:eu.map(e=>{let s=em(e.id);return(0,a.jsxs)("div",{className:"bg-card/50 border border-border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-3 h-3 rounded-full ${s?.status==="healthy"?"bg-emerald-500":s?.status==="unhealthy"?"bg-rose-500":"bg-amber-500"}`}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-foreground",children:e.instance_name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.plugin_name," â€¢ ",e.status]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>_(e),className:"p-2 text-muted-foreground hover:text-foreground transition-colors",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>en(e.id),disabled:K.isPending,className:"p-2 text-muted-foreground hover:text-rose-400 transition-colors disabled:opacity-50",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]})]}),e.last_error&&(0,a.jsx)("div",{className:"mt-2 text-sm text-rose-400 bg-rose-500/10 px-2 py-1 rounded",children:e.last_error})]},e.id)})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Available Plugins"}),0===ec.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No plugins found matching your search."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ec.map(e=>(0,a.jsx)(D,{plugin:e,instances:I.filter(s=>s.plugin_name===e.name),onInstall:e=>{$(e),w(!0)}},e.name))})]}),y&&(0,a.jsx)(C,{plugin:q,onSubmit:ea,onCancel:()=>{w(!1),$(null)},onTestConnection:el,availablePlugins:F}),k&&(0,a.jsx)(C,{plugin:k.config_schema,instance:k,onSubmit:e=>er(k.id,e.configuration),onCancel:()=>_(null),onTestConnection:(e,s)=>el(k.id,s),availablePlugins:F})]})})}},54041:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/plugins/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(8139));module.exports=a})();