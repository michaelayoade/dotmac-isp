(()=>{var e={};e.id=8587,e.ids=[8587],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},61001:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(35323),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["settings",{children:["tokens",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,35323)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/tokens/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/tokens/page.tsx"],x="/dashboard/settings/tokens/page",p={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/settings/tokens/page",pathname:"/dashboard/settings/tokens",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68304:(e,s,t)=>{Promise.resolve().then(t.bind(t,83850))},83850:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(10326),r=t(17577),n=t(48723),o=t(77506),i=t(76828),l=t(83855),d=t(41291),c=t(39447),x=t(98091),p=t(66307),h=t(91216),u=t(12714),m=t(43810),j=t(59341),g=t(20892),k=t(29771);let b=e=>e instanceof Error?e:Error("string"==typeof e?e:String(e));function f(){let{toast:e}=(0,n.useToast)(),[s,t]=(0,r.useState)([]),[g,f]=(0,r.useState)(!0),[v,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),[P,D]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[I,q]=(0,r.useState)(30),[S,E]=(0,r.useState)(!1),[H,Z]=(0,r.useState)(!0),F=(0,r.useCallback)(async()=>{try{f(!0);let e=await j.x1.get("/auth/tokens").catch(()=>({data:[]}));t(e.data)}catch(s){k.k.error("Failed to load API tokens",b(s)),e({title:"Error",description:"Failed to load API tokens",variant:"destructive"})}finally{f(!1)}},[e]),B=async()=>{if(!P){e({title:"Validation Error",description:"Please provide a token name",variant:"destructive"});return}try{E(!0);let s=await j.x1.post("/auth/tokens",{name:P,description:A,expires_in_days:I});T(s.data),y(!1),w(!0),D(""),_(""),q(30),e({title:"Success",description:"API token created successfully"}),await F()}catch(s){k.k.error("Failed to create API token",b(s)),e({title:"Error",description:s.response?.data?.detail||"Failed to create API token",variant:"destructive"})}finally{E(!1)}},M=async s=>{try{await j.x1.delete(`/auth/tokens/${s}`),e({title:"Success",description:"API token revoked successfully"}),await F()}catch(t){k.k.error("Failed to revoke API token",b(t),{tokenId:s}),e({title:"Error",description:t.response?.data?.detail||"Failed to revoke token",variant:"destructive"})}},U=s=>{navigator.clipboard.writeText(s),e({title:"Copied",description:"Token copied to clipboard"})},O=e=>{if(!e)return{label:"Never",color:"bg-green-500/10 text-green-500"};let s=new Date(e),t=new Date,a=Math.ceil((s.getTime()-t.getTime())/864e5);return a<0?{label:"Expired",color:"bg-red-500/10 text-red-500"}:a<=7?{label:`${a} days`,color:"bg-orange-500/10 text-orange-500"}:{label:`${a} days`,color:"bg-green-500/10 text-green-500"}};return g?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin text-sky-500"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-8 w-8 text-sky-500"}),"API Tokens"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage personal access tokens for API authentication"})]}),(0,a.jsxs)(n.Button,{onClick:()=>y(!0),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Create Token"]})]}),(0,a.jsx)(n.Card,{className:"border-blue-200 dark:border-blue-900 bg-blue-50 dark:bg-blue-950/20",children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-200",children:"Keep your tokens secure"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"Tokens provide full access to your account via the API. Treat them like passwords and never share them in publicly accessible areas."})]})]})})}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{children:"Active Tokens"}),(0,a.jsx)(n.CardDescription,{children:"Tokens you have created for API access. Click the menu to revoke a token."})]}),(0,a.jsx)(n.CardContent,{children:0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground font-medium",children:"No API tokens yet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Create a token to get started with the API"}),(0,a.jsxs)(n.Button,{variant:"outline",className:"mt-4",onClick:()=>y(!0),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Create Your First Token"]})]}):(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Name"}),(0,a.jsx)(n.TableHead,{children:"Token Prefix"}),(0,a.jsx)(n.TableHead,{children:"Created"}),(0,a.jsx)(n.TableHead,{children:"Last Used"}),(0,a.jsx)(n.TableHead,{children:"Expires"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(n.TableBody,{children:s.map(e=>{let s=O(e.expires_at);return(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]})}),(0,a.jsx)(n.TableCell,{children:(0,a.jsxs)("code",{className:"px-2 py-1 bg-muted rounded text-xs",children:[e.token_prefix,"•••"]})}),(0,a.jsx)(n.TableCell,{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)(n.TableCell,{className:"text-sm text-muted-foreground",children:e.last_used_at?new Date(e.last_used_at).toLocaleDateString():"Never"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(n.Badge,{className:s.color,children:s.label})}),(0,a.jsx)(n.TableCell,{className:"text-right",children:(0,a.jsxs)(n.DropdownMenu,{children:[(0,a.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"sm",children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.DropdownMenuContent,{align:"end",children:(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>M(e.id),className:"text-red-600 dark:text-red-400",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Revoke Token"]})})]})})]},e.id)})})]})})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{children:"Using API Tokens"}),(0,a.jsx)(n.CardDescription,{children:"How to authenticate with your API tokens"})]}),(0,a.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"HTTP Header Authentication"}),(0,a.jsx)("code",{className:"block bg-muted p-4 rounded-lg text-sm",children:'curl -H "Authorization: Bearer YOUR_TOKEN" https://api.example.com/v1/endpoint'})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"JavaScript/TypeScript"}),(0,a.jsx)("code",{className:"block bg-muted p-4 rounded-lg text-sm overflow-x-auto",children:`fetch('https://api.example.com/v1/endpoint', {
  headers: { 'Authorization': 'Bearer YOUR_TOKEN' }
})`})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Python"}),(0,a.jsx)("code",{className:"block bg-muted p-4 rounded-lg text-sm overflow-x-auto",children:`import requests
headers = {'Authorization': 'Bearer YOUR_TOKEN'}
response = requests.get('https://api.example.com/v1/endpoint', headers=headers)`})]})]})]}),(0,a.jsx)(n.Dialog,{open:v,onOpenChange:y,children:(0,a.jsxs)(n.DialogContent,{children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{children:"Create API Token"}),(0,a.jsx)(n.DialogDescription,{children:"Generate a new token for API authentication. Make sure to copy it - you won't be able to see it again!"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"token-name",children:"Token Name"}),(0,a.jsx)(n.Input,{id:"token-name",value:P,onChange:e=>D(e.target.value),placeholder:"My API Token"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"A descriptive name to help you remember what this token is for"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"token-description",children:"Description (Optional)"}),(0,a.jsx)(n.Textarea,{id:"token-description",value:A,onChange:e=>_(e.target.value),placeholder:"Used for automated deployments...",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"token-expiry",children:"Expires In"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{id:"token-expiry",type:"number",min:1,max:365,value:I,onChange:e=>q(parseInt(e.target.value)||30),className:"w-24"}),(0,a.jsx)("span",{className:"flex items-center text-sm text-muted-foreground",children:"days"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose between 1-365 days. Shorter lifetimes are more secure."})]})]}),(0,a.jsxs)(n.DialogFooter,{children:[(0,a.jsx)(n.Button,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,a.jsxs)(n.Button,{onClick:B,disabled:S,children:[S?(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Create Token"]})]})]})}),(0,a.jsx)(n.Dialog,{open:N,onOpenChange:w,children:(0,a.jsxs)(n.DialogContent,{children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsxs)(n.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-green-500"}),"Token Created Successfully"]}),(0,a.jsx)(n.DialogDescription,{children:"Copy your new token now. For security reasons, you won't be able to see it again."})]}),(0,a.jsx)("div",{className:"space-y-4 py-4",children:C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Token Name"}),(0,a.jsx)("p",{className:"font-medium",children:C.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Your New Token"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Input,{readOnly:!0,type:H?"text":"password",value:C.token,className:"font-mono text-sm"}),(0,a.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>Z(!H),children:H?(0,a.jsx)(h.Z,{className:"h-4 w-4"}):(0,a.jsx)(u.Z,{className:"h-4 w-4"})}),(0,a.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>U(C.token),children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-900 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-orange-600 dark:text-orange-400 shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-orange-900 dark:text-orange-200",children:[(0,a.jsx)("p",{className:"font-medium",children:"Make sure to copy your token now!"}),(0,a.jsx)("p",{className:"mt-1",children:"You won't be able to see this token again. Store it somewhere safe."})]})]})})]})}),(0,a.jsx)(n.DialogFooter,{children:(0,a.jsx)(n.Button,{onClick:()=>w(!1),children:"I've Saved My Token"})})]})})]})}function v(){return(0,a.jsx)(g.eu,{permission:"settings.tokens.read",children:(0,a.jsx)(f,{})})}},35323:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/settings/tokens/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(61001));module.exports=a})();