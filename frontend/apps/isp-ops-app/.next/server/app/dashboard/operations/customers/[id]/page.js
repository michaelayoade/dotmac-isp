(()=>{var e={};e.id=36,e.ids=[36],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},68007:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>o}),t(15441),t(3356),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),n=t.n(i),c=t(95231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);t.d(s,l);let o=["",{children:["dashboard",{children:["operations",{children:["customers",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,15441)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/[id]/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,3356)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/[id]/layout.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],d=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/[id]/page.tsx"],m="/dashboard/operations/customers/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/operations/customers/[id]/page",pathname:"/dashboard/operations/customers/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},87553:(e,s,t)=>{Promise.resolve().then(t.bind(t,26164))},6138:(e,s,t)=>{Promise.resolve().then(t.bind(t,89057))},26164:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(10326),r=t(35047),i=t(90434),n=t(48723),c=t(79635),l=t(48705),o=t(51110),d=t(71208),m=t(95964),x=t(21985),u=t(36283),h=t(66697);let p=[{name:"Overview",href:"",icon:c.Z},{name:"Profile",href:"/profile",icon:c.Z},{name:"Subscriptions",href:"/subscriptions",icon:l.Z},{name:"Network",href:"/network",icon:o.Z},{name:"Devices",href:"/devices",icon:d.Z},{name:"Billing",href:"/billing",icon:m.Z},{name:"Tickets",href:"/tickets",icon:x.Z},{name:"Documents",href:"/documents",icon:u.Z},{name:"Activity",href:"/activity",icon:h.Z}];function j({children:e,params:s}){let t=(0,r.usePathname)(),c=`/dashboard/operations/customers/${s.id}`;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"border-b bg-background sticky top-0 z-10",children:(0,a.jsx)("nav",{className:"flex space-x-6 overflow-x-auto px-6",children:p.map(e=>{let s=`${c}${e.href}`,r=t===s,l=e.icon;return(0,a.jsxs)(i.default,{href:s,className:(0,n.cn)("flex items-center gap-2 border-b-2 px-1 py-4 text-sm font-medium transition-colors whitespace-nowrap",r?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-muted-foreground"),children:[(0,a.jsx)(l,{className:"h-4 w-4"}),e.name]},e.name)})})}),e]})}},89057:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>$});var a=t(10326),r=t(95062),i=t(48723),n=t(86333),c=t(21405),l=t(35047);function o({customer:e,onRefresh:s}){var t;let r=(0,l.useRouter)();return(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>r.back(),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:e.display_name||e.email}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[void 0!==e.healthScore&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:`text-4xl font-bold ${(t=e.healthScore)>=80?"text-green-600":t>=60?"text-yellow-600":"text-red-600"}`,children:e.healthScore}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Health Score"})]}),(0,a.jsx)(i.Badge,{variant:{ACTIVE:"default",SUSPENDED:"secondary",CANCELED:"destructive"}[e.status]||"secondary",children:e.status}),(0,a.jsx)(i.Button,{variant:"outline",size:"sm",onClick:s,children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})]})]})}var d=t(79635),m=t(5932),x=t(42887),u=t(37358);function h({customer:e}){return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5"}),"Customer Overview"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mt-1 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:e.email})]})]}),e.phone&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mt-1 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Phone"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:e.phone})]})]}),e.accountNumber&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mt-1 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Account Number"}),(0,a.jsx)("p",{className:"font-mono font-medium text-sm",children:e.accountNumber})]})]}),e.createdAt&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mt-1 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Customer Since"}),(0,a.jsx)("p",{className:"font-medium text-sm",children:new Date(e.createdAt).toLocaleDateString()})]})]})]})]})}var p=t(71059),j=t(94893),f=t(17069),N=t(21985),v=t(17577);function g({customerId:e,customerStatus:s,onActionComplete:t}){let[r,n]=(0,v.useState)(!1),c=async()=>{n(!0);try{i.toast.success("Customer suspended successfully"),t()}catch(e){i.toast.error("Failed to suspend customer")}finally{n(!1)}},l=async()=>{n(!0);try{i.toast.success("Customer resumed successfully"),t()}catch(e){i.toast.error("Failed to resume customer")}finally{n(!1)}};return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Quick Actions"})}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:["ACTIVE"===s&&(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:c,disabled:r,children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Suspend Service"]}),"SUSPENDED"===s&&(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:l,disabled:r,children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Resume Service"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{window.location.href=`/dashboard/operations/customers/${e}/subscriptions`},children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Upgrade Plan"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{window.location.href=`/dashboard/ticketing/new?customerId=${e}`},children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Create Ticket"]}),(0,a.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{window.location.href=`/dashboard/communications/send?customerId=${e}`},children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Send Email"]})]})})]})}var w=t(48705),C=t(3634),y=t(71821);function b({subscription:e,totalSubscriptions:s}){return e?(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),"Current Subscription"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Plan"}),(0,a.jsx)("span",{className:"font-medium",children:e.plan||"Unknown"})]}),e.bandwidth&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(C.Z,{className:"h-3 w-3"}),"Bandwidth"]}),(0,a.jsx)("span",{className:"font-medium",children:e.bandwidth})]}),void 0!==e.price&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3"}),"Price"]}),(0,a.jsxs)("span",{className:"font-medium",children:["$",e.price.toFixed(2)]})]}),e.cycle&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3"}),"Billing Cycle"]}),(0,a.jsx)("span",{className:"font-medium capitalize",children:e.cycle})]}),e.status&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status"}),(0,a.jsx)(i.Badge,{variant:"ACTIVE"===e.status?"default":"secondary",children:e.status})]}),s>1&&(0,a.jsxs)("div",{className:"pt-2 border-t text-xs text-muted-foreground",children:["+",s-1," more subscription(s)"]})]})]}):(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),"Subscription"]})}),(0,a.jsx)(i.CardContent,{children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No active subscription"})})]})}var k=t(45091),P=t(66697),S=t(54014),Z=t(90434);function D({network:e,customerId:s}){return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-5 w-5"}),"Network Status"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(P.Z,{className:"h-3 w-3"}),"Connection"]}),(0,a.jsx)(i.Badge,{variant:e?.online?"default":"destructive",children:e?.online?"Online":"Offline"})]}),e?.ipv4Address&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"h-3 w-3"}),"IPv4"]}),(0,a.jsx)("span",{className:"font-mono text-sm",children:e.ipv4Address})]}),e?.ipv6Prefix&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(S.Z,{className:"h-3 w-3"}),"IPv6"]}),(0,a.jsx)("span",{className:"font-mono text-sm truncate max-w-[150px]",children:e.ipv6Prefix})]}),e?.bandwidth&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Bandwidth"}),(0,a.jsx)("span",{className:"font-medium",children:e.bandwidth})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)(Z.default,{href:`/dashboard/operations/customers/${s}/network`,className:"text-sm text-primary hover:underline",children:"View Details →"})})]})]})}var A=t(71208),I=t(53982);function T({devices:e,customerId:s}){return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Z,{className:"h-5 w-5"}),"Devices"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Devices"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:e.total})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(I.Z,{className:"h-3 w-3 fill-green-500 text-green-500"}),"Online"]}),(0,a.jsx)("span",{className:"font-medium",children:e.online})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(I.Z,{className:"h-3 w-3 fill-gray-400 text-gray-400"}),"Offline"]}),(0,a.jsx)("span",{className:"font-medium",children:e.offline})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)(Z.default,{href:`/dashboard/operations/customers/${s}/devices`,className:"text-sm text-primary hover:underline",children:"View All Devices →"})})]})]})}var q=t(41291);function B({tickets:e,customerId:s}){return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Support Tickets"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Open Tickets"}),(0,a.jsx)("span",{className:"text-2xl font-bold",children:e.open})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.critical>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(q.Z,{className:"h-3 w-3 text-red-500"}),"Critical"]}),(0,a.jsx)(i.Badge,{variant:"destructive",children:e.critical})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Closed"}),(0,a.jsx)("span",{className:"font-medium",children:e.closed})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)(Z.default,{href:`/dashboard/operations/customers/${s}/tickets`,className:"text-sm text-primary hover:underline",children:"View All Tickets →"})})]})]})}var E=t(95964);function _({billing:e,customerId:s}){let t=e.summary?.balance??0,r=t<0;return(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.Z,{className:"h-5 w-5"}),"Billing Summary"]})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3"}),"Balance"]}),(0,a.jsxs)("span",{className:`text-2xl font-bold ${r?"text-red-600":"text-foreground"}`,children:["$",Math.abs(t).toFixed(2)]})]}),r&&(0,a.jsx)(i.Badge,{variant:"destructive",className:"w-full justify-center",children:"Overdue"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Total Invoices"}),(0,a.jsx)("span",{className:"font-medium",children:e.totalInvoices})]}),e.unpaidInvoices>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Unpaid"}),(0,a.jsx)(i.Badge,{variant:"secondary",children:e.unpaidInvoices})]}),e.summary?.lastPayment&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3"}),"Last Payment"]}),(0,a.jsx)("span",{className:"text-xs",children:new Date(e.summary.lastPayment).toLocaleDateString()})]})]}),(0,a.jsx)("div",{className:"pt-2 border-t",children:(0,a.jsx)(Z.default,{href:`/dashboard/operations/customers/${s}/billing`,className:"text-sm text-primary hover:underline",children:"View Billing Details →"})})]})]})}function V(){return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.Skeleton,{className:"h-8 w-64"}),(0,a.jsx)(i.Skeleton,{className:"h-4 w-48"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.Skeleton,{className:"h-10 w-16"}),(0,a.jsx)(i.Skeleton,{className:"h-6 w-20"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.Skeleton,{className:"h-5 w-32"})}),(0,a.jsx)(i.CardContent,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.Skeleton,{className:"h-9 w-32"}),(0,a.jsx)(i.Skeleton,{className:"h-9 w-32"}),(0,a.jsx)(i.Skeleton,{className:"h-9 w-32"})]})})]}),(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(e=>(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.Skeleton,{className:"h-5 w-32"})}),(0,a.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,a.jsx)(i.Skeleton,{className:"h-4 w-full"}),(0,a.jsx)(i.Skeleton,{className:"h-4 w-3/4"}),(0,a.jsx)(i.Skeleton,{className:"h-4 w-1/2"})]})]},e))})]})}function $({params:e}){let{customer:s,subscriptions:t,network:n,devices:c,tickets:l,billing:d,isLoading:m,error:x,refetch:u}=(0,r.ir)({customerId:e.id,enabled:!0});if(m)return(0,a.jsx)(V,{});if(x)return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)(i.Alert,{variant:"destructive",children:[(0,a.jsx)(q.Z,{className:"h-4 w-4"}),(0,a.jsxs)(i.AlertDescription,{children:["Failed to load customer details: ",x]})]})});if(!s)return(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)(i.Alert,{children:[(0,a.jsx)(q.Z,{className:"h-4 w-4"}),(0,a.jsx)(i.AlertDescription,{children:"Customer not found"})]})});let p=s.displayName??s.companyName,j={id:s.id,...p?{display_name:p}:{},email:s.email,status:s.status},f={id:s.id,...p?{display_name:p}:{},email:s.email,...void 0!==s.phone&&null!==s.phone?{phone:s.phone}:{},...s.createdAt?{createdAt:s.createdAt}:{},...s.tier?{tier:s.tier}:{}};return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsx)(o,{customer:j,onRefresh:u}),(0,a.jsx)(g,{customerId:e.id,customerStatus:s.status,onActionComplete:u}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(h,{customer:f}),(0,a.jsx)(b,{subscription:t.current,totalSubscriptions:t.total}),(0,a.jsx)(D,{network:n,customerId:e.id}),(0,a.jsx)(T,{devices:c,customerId:e.id}),(0,a.jsx)(B,{tickets:l,customerId:e.id}),(0,a.jsx)(_,{billing:d,customerId:e.id})]})]})}},95062:(e,s,t)=>{"use strict";t.d(s,{Az:()=>r,X7:()=>i,eW:()=>n,ir:()=>c});var a=t(70401);function r(e={}){let{limit:s=50,offset:t=0,status:r,search:i,includeActivities:n=!1,includeNotes:c=!1,enabled:l=!0,pollInterval:o=3e4}=e,{data:d,isLoading:m,error:x,refetch:u}=(0,a.useCustomerListQuery)({limit:s,offset:t,status:r,search:i||void 0,includeActivities:n,includeNotes:c},{enabled:l,refetchInterval:o});return{customers:d?.customers?.customers??[],total:d?.customers?.totalCount??0,hasNextPage:d?.customers?.hasNextPage??!1,limit:s,offset:t,isLoading:m,error:x instanceof Error?x.message:x?String(x):void 0,refetch:u}}function i(e={}){let{enabled:s=!0,pollInterval:t=6e4}=e,{data:r,isLoading:i,error:n,refetch:c}=(0,a.useCustomerMetricsQuery)(void 0,{enabled:s,refetchInterval:t}),l=r?.customerMetrics;return{metrics:{totalCustomers:l?.totalCustomers??0,activeCustomers:l?.activeCustomers??0,newCustomers:l?.newCustomers??0,churnedCustomers:l?.churnedCustomers??0,totalCustomerValue:l?.totalCustomerValue??0,averageCustomerValue:l?.averageCustomerValue??0},isLoading:i,error:n instanceof Error?n.message:n?String(n):void 0,refetch:c}}function n(e={}){let{limit:s=20,offset:t=0,status:r,search:i,enabled:n=!0,pollInterval:c=3e4}=e,{data:l,isLoading:o,isFetching:d,error:m,refetch:x}=(0,a.useCustomerDashboardQuery)({limit:s,offset:t,status:r,search:i||void 0},{enabled:n,refetchInterval:c}),u=l?.customers?.customers??[],h=l?.customers?.totalCount??0,p=l?.customers?.hasNextPage??!1,j=l?.customerMetrics;return{customers:u,total:h,hasNextPage:p,metrics:{totalCustomers:j?.totalCustomers??0,activeCustomers:j?.activeCustomers??0,newCustomers:j?.newCustomers??0,churnedCustomers:j?.churnedCustomers??0,totalCustomerValue:j?.totalCustomerValue??0,averageCustomerValue:j?.averageCustomerValue??0},isLoading:o,isFetching:d,error:m instanceof Error?m.message:m?String(m):void 0,refetch:x}}function c(e){let{customerId:s,enabled:t=!0}=e,{data:r,isLoading:i,error:n,refetch:c}=(0,a.useCustomer360ViewQuery)({customerId:s},{enabled:t&&!!s}),l=r?.customerSubscriptions??[],o=l.filter(e=>"ACTIVE"===e.status||"TRIALING"===e.status),d=r?.customerNetworkInfo??{},m=r?.customerDevices??{},x=r?.customerTickets??{},u=r?.customerBilling??{};return{customer:r?.customer??null,subscriptions:{current:o[0]??null,total:l.length,active:o.length},network:d,devices:{total:m?.totalDevices??0,online:m?.onlineDevices??0,offline:m?.offlineDevices??0},tickets:{open:x?.openCount??0,closed:x?.closedCount??0,critical:x?.criticalCount??0},billing:{summary:u?.summary??null,totalInvoices:u?.totalInvoices??0,unpaidInvoices:u?.unpaidInvoices??0},isLoading:i,error:n instanceof Error?n.message:n?String(n):void 0,refetch:c}}},3356:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/[id]/layout.tsx#default`)},15441:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/[id]/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,401,6032,4218],()=>t(68007));module.exports=a})();