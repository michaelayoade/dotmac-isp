(()=>{var e={};e.id=1806,e.ids=[1806],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},3077:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(83318),s(13321),s(46366),s(96560);var a=s(23191),r=s(88716),o=s(37922),i=s.n(o),l=s(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let c=["",{children:["dashboard",{children:["operations",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,83318)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],d=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/page.tsx"],m="/dashboard/operations/customers/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/operations/customers/page",pathname:"/dashboard/operations/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81456:(e,t,s)=>{Promise.resolve().then(s.bind(s,28012))},28012:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N,dynamic:()=>v});var a=s(10326),r=s(17577),o=s(35047),i=s(21405),l=s(83855),n=s(95062),c=s(78810),d=s(36607),m=s(29771);!function(){var e=Error("Cannot find module '../../../../shared/utils/customerImpersonation'");throw e.code="MODULE_NOT_FOUND",e}();let u=()=>({"Content-Type":"application/json"});function p(e){let t=d.LM.api.baseUrl||"",s=async e=>{m.k.info("Impersonating customer",{customerId:e}),await Object(function(){var e=Error("Cannot find module '../../../../shared/utils/customerImpersonation'");throw e.code="MODULE_NOT_FOUND",e}())({customerId:e,baseUrl:t,buildHeaders:u})},r=async(e,s)=>{if(m.k.info("Updating customer status",{customerId:e,status:s}),!(await fetch(`${t}/api/v1/customers/${e}/status`,{method:"PATCH",credentials:"include",headers:u(),body:JSON.stringify({status:s})})).ok)throw Error("Failed to update customer status")},o=async e=>{if(m.k.info("Resetting customer password",{customerId:e}),!(await fetch(`${t}/api/v1/customers/${e}/reset-password`,{method:"POST",credentials:"include",headers:u()})).ok)throw Error("Failed to send reset password email")};return(0,a.jsx)(c.CustomersList,{...e,apiBaseUrl:t,buildAuthHeaders:u,impersonateCustomer:s,updateCustomerStatus:r,resetCustomerPassword:o,portalPath:"/customer-portal"})}var x=s(5839);function h({metrics:e,loading:t}){return(0,a.jsx)(x.CustomersMetrics,{metrics:e,loading:t})}function f(e){return(0,a.jsx)(c.CreateCustomerModal,{...e,onCustomerCreated:t=>{m.k.info("Customer saved successfully",{customerId:t.id}),e.onCustomerCreated(t)}})}var g=s(48723),w=s(41291);let v="force-dynamic",N=function(){let e=(0,o.useRouter)(),[t,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(void 0),x={limit:100,offset:0,pollInterval:3e4};m&&(x.status=m),t.trim()&&(x.search=t.trim());let{customers:v,metrics:N,total:j,isLoading:b,isFetching:C,error:y,refetch:E}=(0,n.eW)(x);return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Customer Management"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your internet subscribers, track service health, and handle support requests."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,a.jsxs)(g.Button,{variant:"outline",onClick:()=>{E()},disabled:b||C,children:[(0,a.jsx)(i.Z,{className:`h-4 w-4 mr-2 ${C?"animate-spin":""}`}),"Refresh"]}),(0,a.jsxs)(g.Button,{onClick:()=>{d(!0)},children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"New Customer"]})]})]}),(0,a.jsx)(h,{metrics:{total_customers:N.totalCustomers,active_customers:N.activeCustomers,new_customers_this_month:N.newCustomers,churned_this_month:N.churnedCustomers,total_revenue:N.totalCustomerValue,average_lifetime_value:N.averageCustomerValue},loading:b}),(0,a.jsxs)(g.Card,{children:[(0,a.jsx)(g.CardHeader,{children:(0,a.jsx)(g.CardTitle,{className:"text-base",children:"Filters"})}),(0,a.jsx)(g.CardContent,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(g.Input,{placeholder:"Search customers by name, email, or account number...",value:t,onChange:e=>s(e.target.value),className:"max-w-md"})}),(0,a.jsxs)("select",{value:m||"",onChange:e=>u(e.target.value?e.target.value:void 0),className:"px-3 py-2 border rounded-md bg-background",children:[(0,a.jsx)("option",{value:"",children:"All Statuses"}),(0,a.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,a.jsx)("option",{value:"SUSPENDED",children:"Suspended"}),(0,a.jsx)("option",{value:"CANCELED",children:"Canceled"})]})]})})]}),y?(0,a.jsxs)(g.Alert,{variant:"destructive",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsxs)(g.AlertDescription,{children:["Failed to load customers: ",y]})]}):(0,a.jsx)(p,{customers:v,loading:b,onCustomerSelect:t=>{e.push(`/dashboard/operations/customers/${t.id}`)}}),c&&(0,a.jsx)(f,{onClose:()=>d(!1),onCustomerCreated:()=>{d(!1),E()},createCustomer:async()=>({}),updateCustomer:async()=>({})})]})}},95062:(e,t,s)=>{"use strict";s.d(t,{Az:()=>r,X7:()=>o,eW:()=>i,ir:()=>l});var a=s(70401);function r(e={}){let{limit:t=50,offset:s=0,status:r,search:o,includeActivities:i=!1,includeNotes:l=!1,enabled:n=!0,pollInterval:c=3e4}=e,{data:d,isLoading:m,error:u,refetch:p}=(0,a.useCustomerListQuery)({limit:t,offset:s,status:r,search:o||void 0,includeActivities:i,includeNotes:l},{enabled:n,refetchInterval:c});return{customers:d?.customers?.customers??[],total:d?.customers?.totalCount??0,hasNextPage:d?.customers?.hasNextPage??!1,limit:t,offset:s,isLoading:m,error:u instanceof Error?u.message:u?String(u):void 0,refetch:p}}function o(e={}){let{enabled:t=!0,pollInterval:s=6e4}=e,{data:r,isLoading:o,error:i,refetch:l}=(0,a.useCustomerMetricsQuery)(void 0,{enabled:t,refetchInterval:s}),n=r?.customerMetrics;return{metrics:{totalCustomers:n?.totalCustomers??0,activeCustomers:n?.activeCustomers??0,newCustomers:n?.newCustomers??0,churnedCustomers:n?.churnedCustomers??0,totalCustomerValue:n?.totalCustomerValue??0,averageCustomerValue:n?.averageCustomerValue??0},isLoading:o,error:i instanceof Error?i.message:i?String(i):void 0,refetch:l}}function i(e={}){let{limit:t=20,offset:s=0,status:r,search:o,enabled:i=!0,pollInterval:l=3e4}=e,{data:n,isLoading:c,isFetching:d,error:m,refetch:u}=(0,a.useCustomerDashboardQuery)({limit:t,offset:s,status:r,search:o||void 0},{enabled:i,refetchInterval:l}),p=n?.customers?.customers??[],x=n?.customers?.totalCount??0,h=n?.customers?.hasNextPage??!1,f=n?.customerMetrics;return{customers:p,total:x,hasNextPage:h,metrics:{totalCustomers:f?.totalCustomers??0,activeCustomers:f?.activeCustomers??0,newCustomers:f?.newCustomers??0,churnedCustomers:f?.churnedCustomers??0,totalCustomerValue:f?.totalCustomerValue??0,averageCustomerValue:f?.averageCustomerValue??0},isLoading:c,isFetching:d,error:m instanceof Error?m.message:m?String(m):void 0,refetch:u}}function l(e){let{customerId:t,enabled:s=!0}=e,{data:r,isLoading:o,error:i,refetch:l}=(0,a.useCustomer360ViewQuery)({customerId:t},{enabled:s&&!!t}),n=r?.customerSubscriptions??[],c=n.filter(e=>"ACTIVE"===e.status||"TRIALING"===e.status),d=r?.customerNetworkInfo??{},m=r?.customerDevices??{},u=r?.customerTickets??{},p=r?.customerBilling??{};return{customer:r?.customer??null,subscriptions:{current:c[0]??null,total:n.length,active:c.length},network:d,devices:{total:m?.totalDevices??0,online:m?.onlineDevices??0,offline:m?.offlineDevices??0},tickets:{open:u?.openCount??0,closed:u?.closedCount??0,critical:u?.criticalCount??0},billing:{summary:p?.summary??null,totalInvoices:p?.totalInvoices??0,unpaidInvoices:p?.unpaidInvoices??0},isLoading:o,error:i instanceof Error?i.message:i?String(i):void 0,refetch:l}}},27795:()=>{throw Error('Module parse failed: Unexpected token (11:7)\nFile was processed with these loaders:\n * ./node_modules/next/dist/build/webpack/loaders/next-flight-client-module-loader.js\n * ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js\nYou may need an additional loader to handle the result of these loaders.\n| import { useState } from "react";\n| \n> export interface CreateCustomerModalProps<T = any, CreateInput = any, UpdateInput = any> {\n|   onClose: () => void;\n|   onCustomerCreated: (customer: T) => void;')},37905:(e,t,s)=>{"use strict";s(10326),s(17577)},94610:(e,t,s)=>{"use strict";s(10326),s(17577)},41524:()=>{throw Error('Module parse failed: Unexpected token (30:7)\nFile was processed with these loaders:\n * ./node_modules/next/dist/build/webpack/loaders/next-flight-client-module-loader.js\n * ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js\nYou may need an additional loader to handle the result of these loaders.\n| import { useState, useEffect, useCallback } from "react";\n| \n> export interface NetworkInfo {\n|   connection_status: "online" | "offline" | "degraded";\n|   ip_address?: string;')},29017:()=>{throw Error('Module parse failed: Unexpected token (15:7)\nFile was processed with these loaders:\n * ./node_modules/next/dist/build/webpack/loaders/next-flight-client-module-loader.js\n * ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js\nYou may need an additional loader to handle the result of these loaders.\n| import { useState } from "react";\n| \n> export interface CustomerNote {\n|   id: string;\n|   customer_id: string;')},30425:(e,t,s)=>{"use strict";s.d(t,{C:()=>P});var a=s(10326),r=s(48723),o=s(79635),i=s(38787),l=s(5932),n=s(42887),c=s(77636),d=s(71821),m=s(37358),u=s(15919),p=s(32691),x=s(7027),h=s(59819),f=s(67187),g=s(76828),w=s(12714),v=s(69508),N=s(98091),j=s(17577);function b({status:e}){let t=e?.toUpperCase(),s={PROSPECT:{label:"Prospect",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},ACTIVE:{label:"Active",className:"bg-green-500/20 text-green-400 border-green-500/30"},INACTIVE:{label:"Inactive",className:"bg-gray-500/20 text-gray-400 border-gray-500/30"},SUSPENDED:{label:"Suspended",className:"bg-orange-500/20 text-orange-400 border-orange-500/30"},CHURNED:{label:"Churned",className:"bg-red-500/20 text-red-400 border-red-500/30"},ARCHIVED:{label:"Archived",className:"bg-slate-500/20 text-slate-400 border-slate-500/30"}},r=s[t]??s.PROSPECT;return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.className}`,children:r.label})}function C({tier:e}){let t=e?.toUpperCase(),s={FREE:{label:"Free",className:"bg-slate-500/20 text-slate-400 border-slate-500/30"},BASIC:{label:"Basic",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"},STANDARD:{label:"Standard",className:"bg-purple-500/20 text-purple-400 border-purple-500/30"},PREMIUM:{label:"Premium",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},ENTERPRISE:{label:"Enterprise",className:"bg-green-500/20 text-green-400 border-green-500/30"}},r=s[t]??s.FREE;return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.className}`,children:r.label})}function y({customer:e,onSelect:t,onEdit:s,onDelete:y,apiBaseUrl:E,buildAuthHeaders:P,impersonateCustomer:S,updateCustomerStatus:k,resetCustomerPassword:D,portalPath:_="/customer-portal"}){let[U,A]=(0,j.useState)(!1),{toast:I}=(0,r.useToast)(),F=e.displayName||e.display_name||`${e.firstName||e.first_name||""}${e.middleName||e.middle_name?` ${e.middleName||e.middle_name}`:""} ${e.lastName||e.last_name||""}`,M=e.id,T=e.email,V=e.phone,$=e.city,R=e.stateProvince||e.state_province,q=e.country,L=e.status,Z=e.tier,O=(e.customerType||e.customer_type||"").toUpperCase(),B=e.companyName||e.company_name,H=e.customerNumber||e.customer_number,G=parseFloat(e.lifetimeValue||e.lifetime_value||0),Q=e.totalPurchases||e.total_purchases||0,J=e.createdAt||e.created_at,Y="INDIVIDUAL"===O?o.Z:i.Z,z=async e=>{if(e.stopPropagation(),A(!1),!S){console.error("Impersonation not available"),I({title:"Feature Not Available",description:"Customer impersonation is not available",variant:"destructive"});return}try{await S(M),window.open(_,"_blank"),I({title:"Logged in as Customer",description:`You are now viewing the portal as ${F}`})}catch(e){console.error("Customer impersonation failed",e),I({title:"Login Failed",description:e instanceof Error?e.message:"Failed to login as customer",variant:"destructive"})}},W=async e=>{e.stopPropagation(),A(!1);let t="SUSPENDED"===L?.toUpperCase()?"ACTIVE":"SUSPENDED";if(k)try{await k(M,t),I({title:"SUSPENDED"===t?"Customer Suspended":"Customer Reactivated",description:`${F} has been ${"SUSPENDED"===t?"suspended":"reactivated"} successfully`}),window.location.reload()}catch(e){I({title:"Action Failed",description:e instanceof Error?e.message:"Failed to update customer status",variant:"destructive"})}else try{if(!(await fetch(`${E}/api/isp/v1/admin/customers/${M}/status`,{method:"PATCH",credentials:"include",headers:P(),body:JSON.stringify({status:t})})).ok)throw Error("Failed to update customer status");I({title:"SUSPENDED"===t?"Customer Suspended":"Customer Reactivated",description:`${F} has been ${"SUSPENDED"===t?"suspended":"reactivated"} successfully`}),window.location.reload()}catch(e){I({title:"Action Failed",description:e instanceof Error?e.message:"Failed to update customer status",variant:"destructive"})}},X=async e=>{if(e.stopPropagation(),A(!1),D)try{await D(M),I({title:"Password Reset Email Sent",description:`A password reset link has been sent to ${T}`})}catch(e){I({title:"Reset Failed",description:e instanceof Error?e.message:"Failed to send password reset email",variant:"destructive"})}else try{if(!(await fetch(`${E}/api/isp/v1/admin/customers/${M}/reset-password`,{method:"POST",credentials:"include",headers:P()})).ok)throw Error("Failed to send reset password email");I({title:"Password Reset Email Sent",description:`A password reset link has been sent to ${T}`})}catch(e){I({title:"Reset Failed",description:e instanceof Error?e.message:"Failed to send password reset email",variant:"destructive"})}},K=L?.toUpperCase();return(0,a.jsxs)("tr",{className:"hover:bg-slate-800/50 transition-colors cursor-pointer",onClick:()=>t(e),children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-slate-700 flex items-center justify-center",children:(0,a.jsx)(Y,{className:"h-5 w-5 text-slate-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:F}),B&&(0,a.jsx)("div",{className:"text-sm text-slate-400",children:B}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["#",H]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-slate-300",children:[(0,a.jsx)(l.Z,{className:"h-3 w-3 mr-2"}),T]}),V&&(0,a.jsxs)("div",{className:"flex items-center text-sm text-slate-400",children:[(0,a.jsx)(n.Z,{className:"h-3 w-3 mr-2"}),V]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:$||q?(0,a.jsxs)("div",{className:"flex items-center text-sm text-slate-300",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 mr-2"}),[$,R,q].filter(Boolean).join(", ")]}):(0,a.jsx)("span",{className:"text-slate-500",children:"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(b,{status:L}),(0,a.jsx)("div",{children:(0,a.jsx)(C,{tier:Z})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-slate-300",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(G)]}),(0,a.jsxs)("div",{className:"text-xs text-slate-400",children:[Q," purchases"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-slate-400",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-2"}),new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),A(!U)},className:"text-slate-400 hover:text-white transition-colors",children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})}),U&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-slate-800 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 max-h-96 overflow-y-auto",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsx)("div",{className:"px-3 py-1 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Quick Actions"}),S&&(0,a.jsxs)("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 text-sm text-blue-400 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),"Login as Customer"]}),(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),A(!1),window.open(_,"_blank"),I({title:"Customer Portal Opened",description:"Viewing customer portal interface in new tab"})},className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),"View Customer Portal"]}),(0,a.jsx)("button",{onClick:W,className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-slate-700 w-full text-left ${"SUSPENDED"===K?"text-green-400":"text-orange-400"}`,children:"SUSPENDED"===K?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),"Reactivate Customer"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),"Suspend Customer"]})}),(0,a.jsxs)("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),"Reset Password"]}),(0,a.jsx)("div",{className:"border-t border-slate-700 my-1"}),(0,a.jsx)("div",{className:"px-3 py-1 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Manage"}),(0,a.jsxs)("button",{onClick:s=>{s.stopPropagation(),t(e),A(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"View Details"]}),s&&(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),s(e),A(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),"Edit Customer"]}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border-t border-slate-700 my-1"}),(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),y(e),A(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-red-400 hover:bg-slate-700 w-full text-left",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4"}),"Delete Customer"]})]})]})})]})})]})}function E(){return(0,a.jsxs)("tr",{className:"animate-pulse",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-slate-700 rounded-full"}),(0,a.jsxs)("div",{className:"ml-4 space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-32"}),(0,a.jsx)("div",{className:"h-3 bg-slate-700 rounded w-24"})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-40"}),(0,a.jsx)("div",{className:"h-3 bg-slate-700 rounded w-32"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-24"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-6 bg-slate-700 rounded-full w-16"}),(0,a.jsx)("div",{className:"h-6 bg-slate-700 rounded-full w-12"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-20"}),(0,a.jsx)("div",{className:"h-3 bg-slate-700 rounded w-16"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-20"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"h-4 bg-slate-700 rounded w-4"})})]})}function P({customers:e,loading:t,onCustomerSelect:s,onEditCustomer:r,onDeleteCustomer:i,apiBaseUrl:l,buildAuthHeaders:n,impersonateCustomer:c,updateCustomerStatus:d,resetCustomerPassword:m,portalPath:u}){return t?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Status & Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Value"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-slate-900 divide-y divide-slate-700",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(E,{},t))})]})}):e.length?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,a.jsx)("thead",{className:"bg-slate-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Status & Tier"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Value"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-slate-900 divide-y divide-slate-700",children:e.map(e=>{let t={customer:e,onSelect:s,apiBaseUrl:l,buildAuthHeaders:n};return r&&(t.onEdit=r),i&&(t.onDelete=i),c&&(t.impersonateCustomer=c),d&&(t.updateCustomerStatus=d),m&&(t.resetCustomerPassword=m),u&&(t.portalPath=u),(0,a.jsx)(y,{...t},e.id)})})]})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-slate-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No customers found"}),(0,a.jsx)("p",{className:"text-slate-400 mb-4",children:"No customers match your search criteria."})]})}},78810:(e,t,s)=>{"use strict";s.d(t,{CustomersList:()=>o.C});var a=s(27795);s.o(a,"CreateCustomerModal")&&s.d(t,{CreateCustomerModal:function(){return a.CreateCustomerModal}}),s.o(a,"CustomersList")&&s.d(t,{CustomersList:function(){return a.CustomersList}});var r=s(29017);s.o(r,"CreateCustomerModal")&&s.d(t,{CreateCustomerModal:function(){return r.CreateCustomerModal}}),s.o(r,"CustomersList")&&s.d(t,{CustomersList:function(){return r.CustomersList}}),s(94610);var o=s(30425);s(37905);var i=s(41524);s.o(i,"CreateCustomerModal")&&s.d(t,{CreateCustomerModal:function(){return i.CreateCustomerModal}})},83318:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,dynamic:()=>r});var a=s(68570);let r=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/page.tsx#dynamic`),o=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/operations/customers/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2793,1009,6226,657,5839,401,6032,4218],()=>s(3077));module.exports=a})();