(()=>{var e={};e.id=2853,e.ids=[2853],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},40764:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c}),t(26569),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["analytics",{children:["advanced",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26569)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/advanced/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/advanced/page.tsx"],m="/dashboard/analytics/advanced/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/analytics/advanced/page",pathname:"/dashboard/analytics/advanced",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81071:(e,s,t)=>{Promise.resolve().then(t.bind(t,47867))},47867:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>G,dynamic:()=>O,dynamicParams:()=>$});var a=t(10326),r=t(48723),l=t(17577),n=t(14958),i=t(18423),d=t(62637),c=t(9997),o=t(42559),m=t(52735),u=t(74390),x=t(10669),h=t(47445),p=t(49844),j=t(8564),g=t(30660),v=t(71821),y=t(31540),f=t(17069),b=t(32067),N=t(33519),C=t(15802),R=t(93663),w=t(34041);function S(){let[e,s]=(0,l.useState)("area"),[t,S]=(0,l.useState)("30d"),k=(0,l.useMemo)(()=>{let e=new Date;return("7d"===t?(0,b.D)({start:(0,N.k)(e,6),end:e}):"30d"===t?(0,b.D)({start:(0,N.k)(e,29),end:e}):"90d"===t?(0,b.D)({start:(0,N.k)(e,89),end:e}):(0,C.R)({start:(0,R.W)(e,11),end:e})).map((e,s)=>{let a=5e4+1e3*s,r=5e3*Math.random();return{date:"12m"===t?(0,w.WU)(e,"MMM yyyy"):(0,w.WU)(e,"MMM dd"),mrr:a+r,newRevenue:2e3+3e3*Math.random(),churnRevenue:500+1500*Math.random(),totalRevenue:a+r+(2e3+3e3*Math.random())}})},[t]),P=k[k.length-1],M=k[k.length-2],T=P&&M?(P.mrr-M.mrr)/M.mrr*100:0;return(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5"}),"Revenue Analytics"]}),(0,a.jsx)(r.CardDescription,{children:"Track MRR, new revenue, and churn over time"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(r.Select,{value:t,onValueChange:e=>S(e),children:[(0,a.jsx)(r.SelectTrigger,{className:"w-[120px]",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"7d",children:"Last 7 days"}),(0,a.jsx)(r.SelectItem,{value:"30d",children:"Last 30 days"}),(0,a.jsx)(r.SelectItem,{value:"90d",children:"Last 90 days"}),(0,a.jsx)(r.SelectItem,{value:"12m",children:"Last 12 months"})]})]}),(0,a.jsxs)(r.Select,{value:e,onValueChange:e=>s(e),children:[(0,a.jsx)(r.SelectTrigger,{className:"w-[100px]",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"line",children:"Line"}),(0,a.jsx)(r.SelectItem,{value:"area",children:"Area"}),(0,a.jsx)(r.SelectItem,{value:"bar",children:"Bar"})]})]}),(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([[["Date","MRR","New Revenue","Churn Revenue","Total Revenue"],...k.map(e=>[e.date,e.mrr,e.newRevenue,e.churnRevenue,e.totalRevenue])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=`revenue-data-${t}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current MRR"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:["$",P?.mrr.toLocaleString(void 0,{maximumFractionDigits:0})]}),(0,a.jsxs)("p",{className:`text-xs flex items-center gap-1 ${T>=0?"text-green-500":"text-red-500"}`,children:[(0,a.jsx)(f.Z,{className:"h-3 w-3"}),T>=0?"+":"",T.toFixed(2),"% vs previous period"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"New Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-500",children:["+$",P?.newRevenue.toLocaleString(void 0,{maximumFractionDigits:0})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current period"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Churn Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-500",children:["-$",P?.churnRevenue.toLocaleString(void 0,{maximumFractionDigits:0})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current period"})]})]}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(()=>{let s={data:k,margin:{top:5,right:30,left:20,bottom:5}};return"line"===e?(0,a.jsxs)(n.w,{...s,children:[(0,a.jsx)(i.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(d.K,{dataKey:"date",className:"text-xs"}),(0,a.jsx)(c.B,{className:"text-xs"}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),(0,a.jsx)(m.D,{}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"mrr",stroke:"hsl(var(--primary))",strokeWidth:2,name:"MRR"}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"newRevenue",stroke:"hsl(142, 76%, 36%)",strokeWidth:2,name:"New Revenue"}),(0,a.jsx)(u.x,{type:"monotone",dataKey:"churnRevenue",stroke:"hsl(0, 84%, 60%)",strokeWidth:2,name:"Churn Revenue"})]}):"area"===e?(0,a.jsxs)(x.T,{...s,children:[(0,a.jsx)(i.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(d.K,{dataKey:"date",className:"text-xs"}),(0,a.jsx)(c.B,{className:"text-xs"}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),(0,a.jsx)(m.D,{}),(0,a.jsx)(h.u,{type:"monotone",dataKey:"mrr",stackId:"1",stroke:"hsl(var(--primary))",fill:"hsl(var(--primary))",fillOpacity:.6,name:"MRR"}),(0,a.jsx)(h.u,{type:"monotone",dataKey:"newRevenue",stackId:"1",stroke:"hsl(142, 76%, 36%)",fill:"hsl(142, 76%, 36%)",fillOpacity:.6,name:"New Revenue"})]}):(0,a.jsxs)(p.v,{...s,children:[(0,a.jsx)(i.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(d.K,{dataKey:"date",className:"text-xs"}),(0,a.jsx)(c.B,{className:"text-xs"}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),(0,a.jsx)(m.D,{}),(0,a.jsx)(j.$,{dataKey:"mrr",fill:"hsl(var(--primary))",name:"MRR"}),(0,a.jsx)(j.$,{dataKey:"newRevenue",fill:"hsl(142, 76%, 36%)",name:"New Revenue"}),(0,a.jsx)(j.$,{dataKey:"churnRevenue",fill:"hsl(0, 84%, 60%)",name:"Churn Revenue"})]})})()})})]})]})}var k=t(81562),P=t(99280),M=t(41291);function T(){let[e,s]=(0,l.useState)("12m"),t=(0,l.useMemo)(()=>{let s=new Date,t="6m"===e?6:"12m"===e?12:24;return(0,C.R)({start:(0,R.W)(s,t-1),end:s}).map((e,s)=>{let t=500+50*s,a=5+Math.floor(15*Math.random()),r=50+Math.floor(30*Math.random());return{month:(0,w.WU)(e,"MMM yyyy"),totalCustomers:t,churnedCustomers:a,churnRate:a/t*100,newCustomers:r,netGrowth:r-a}})},[e]),n=t[t.length-1],x=t.reduce((e,s)=>e+s.churnRate,0)/t.length,h=t.reduce((e,s)=>e+s.churnedCustomers,0),p=n?.netGrowth??0;return(0,a.jsxs)(r.Card,{children:[(0,a.jsx)(r.CardHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5"}),"Customer Churn Analysis"]}),(0,a.jsx)(r.CardDescription,{children:"Track customer retention and churn patterns"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(r.Select,{value:e,onValueChange:e=>s(e),children:[(0,a.jsx)(r.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"6m",children:"Last 6 months"}),(0,a.jsx)(r.SelectItem,{value:"12m",children:"Last 12 months"}),(0,a.jsx)(r.SelectItem,{value:"24m",children:"Last 24 months"})]})]}),(0,a.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{let s=new Blob([[["Month","Total Customers","Churned Customers","Churn Rate (%)","New Customers","Net Growth"],...t.map(e=>[e.month,e.totalCustomers,e.churnedCustomers,e.churnRate.toFixed(2),e.newCustomers,e.netGrowth])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=`churn-analysis-${e}.csv`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,a.jsxs)(r.CardContent,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Churn Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-500",children:[n?n.churnRate.toFixed(2):"0.00","%"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[n?.churnedCustomers??0," customers"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Churn Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[x.toFixed(2),"%"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Over ","6m"===e?"6":"12m"===e?"12":"24"," months"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Churned"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-500",children:h}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Since ",t[0]?.month]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Net Growth"}),(0,a.jsxs)("p",{className:`text-2xl font-bold ${p>=0?"text-green-500":"text-red-500"}`,children:[p>=0?"+":"",p.toFixed(0)]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current month"})]})]}),n&&n.churnRate>5&&(0,a.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,a.jsx)(M.Z,{className:"h-5 w-5 text-red-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-red-500",children:"High Churn Alert"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current churn rate (",n.churnRate.toFixed(2),"%) is above the healthy threshold of 5%. Consider implementing retention strategies."]})]})]}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(k.c,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(i.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(d.K,{dataKey:"month",className:"text-xs"}),(0,a.jsx)(c.B,{yAxisId:"left",className:"text-xs"}),(0,a.jsx)(c.B,{yAxisId:"right",orientation:"right",className:"text-xs"}),(0,a.jsx)(o.u,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),(0,a.jsx)(m.D,{}),(0,a.jsx)(j.$,{yAxisId:"left",dataKey:"churnedCustomers",fill:"hsl(0, 84%, 60%)",name:"Churned Customers"}),(0,a.jsx)(j.$,{yAxisId:"left",dataKey:"newCustomers",fill:"hsl(142, 76%, 36%)",name:"New Customers"}),(0,a.jsx)(u.x,{yAxisId:"right",type:"monotone",dataKey:"churnRate",stroke:"hsl(var(--primary))",strokeWidth:2,name:"Churn Rate (%)"})]})})}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Top Churn Reasons"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Service Quality Issues"}),(0,a.jsx)("span",{className:"font-medium",children:"32%"})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Pricing Concerns"}),(0,a.jsx)("span",{className:"font-medium",children:"28%"})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Moved/Relocation"}),(0,a.jsx)("span",{className:"font-medium",children:"21%"})]}),(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Competitor Offers"}),(0,a.jsx)("span",{className:"font-medium",children:"19%"})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Retention Recommendations"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"•"}),"Implement proactive support for service issues"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"•"}),"Offer loyalty discounts to long-term customers"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"•"}),"Create win-back campaigns for churned customers"]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-500",children:"•"}),"Monitor competitor pricing and adjust offers"]})]})]})]})]})]})}var L=t(66697),D=t(24061),B=t(76464);L.Z,D.Z,B.Z,v.Z,f.Z,L.Z;var _=t(36283),I=t(12714),q=t(31215);let U=[{id:"revenue",label:"Total Revenue",category:"Billing"},{id:"mrr",label:"Monthly Recurring Revenue",category:"Billing"},{id:"arr",label:"Annual Recurring Revenue",category:"Billing"},{id:"new_customers",label:"New Customers",category:"Customers"},{id:"churned_customers",label:"Churned Customers",category:"Customers"},{id:"active_customers",label:"Active Customers",category:"Customers"},{id:"churn_rate",label:"Churn Rate",category:"Customers"},{id:"avg_customer_value",label:"Average Customer Value",category:"Billing"},{id:"ltv",label:"Customer Lifetime Value",category:"Billing"},{id:"cac",label:"Customer Acquisition Cost",category:"Marketing"},{id:"open_tickets",label:"Open Tickets",category:"Support"},{id:"resolved_tickets",label:"Resolved Tickets",category:"Support"},{id:"avg_resolution_time",label:"Avg Resolution Time",category:"Support"},{id:"network_uptime",label:"Network Uptime %",category:"Operations"},{id:"bandwidth_usage",label:"Total Bandwidth Usage",category:"Operations"}],A=[{value:"day",label:"Daily"},{value:"week",label:"Weekly"},{value:"month",label:"Monthly"},{value:"quarter",label:"Quarterly"},{value:"year",label:"Yearly"},{value:"plan",label:"By Plan"},{value:"region",label:"By Region"}];function E({apiClient:e,useToast:s,logger:t}){let{toast:n}=s(),[i,d]=(0,l.useState)({name:"",description:"",dateRange:"30d",metrics:[],groupBy:"month",filters:{}}),c=e=>{d(s=>({...s,metrics:s.metrics.includes(e)?s.metrics.filter(s=>s!==e):[...s.metrics,e]}))},o=async()=>{if(!i.name.trim()){n({title:"Validation Error",description:"Please provide a report name",variant:"destructive"});return}if(0===i.metrics.length){n({title:"Validation Error",description:"Please select at least one metric",variant:"destructive"});return}try{await e.post("/analytics/reports",{name:i.name,description:i.description,date_range:i.dateRange,metrics:i.metrics,group_by:i.groupBy,filters:i.filters}),n({title:"Report Saved",description:`Custom report "${i.name}" has been saved successfully.`})}catch(e){t.error("Failed to save custom report",e instanceof Error?e:Error(String(e))),n({title:"Save Failed",description:e instanceof Error?e.message:"Failed to save report. Please try again.",variant:"destructive"})}},m=async()=>{if(0===i.metrics.length){n({title:"Validation Error",description:"Please select at least one metric",variant:"destructive"});return}try{let s=(await e.post("/analytics/reports/generate",{date_range:i.dateRange,metrics:i.metrics,group_by:i.groupBy,filters:i.filters})).data;t.debug("Generated report data",{reportName:i.name||void 0,metricCount:i.metrics.length}),n({title:"Report Generated",description:`Your custom report is ready with ${s.dataPoints||0} data points.`})}catch(e){t.error("Failed to generate custom report",e instanceof Error?e:Error(String(e))),n({title:"Generation Failed",description:e instanceof Error?e.message:"Failed to generate report. Please try again.",variant:"destructive"})}},u=U.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category]?.push(s),e),{});return(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5"}),"Custom Report Builder"]}),(0,a.jsx)(r.CardDescription,{children:"Create custom analytics reports with selected metrics and filters"})]}),(0,a.jsxs)(r.CardContent,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"reportName",children:"Report Name *"}),(0,a.jsx)(r.Input,{id:"reportName",placeholder:"e.g., Monthly Revenue Analysis",value:i.name,onChange:e=>d({...i,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"dateRange",children:"Date Range"}),(0,a.jsxs)(r.Select,{value:i.dateRange,onValueChange:e=>d({...i,dateRange:e}),children:[(0,a.jsx)(r.SelectTrigger,{id:"dateRange",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"7d",children:"Last 7 days"}),(0,a.jsx)(r.SelectItem,{value:"30d",children:"Last 30 days"}),(0,a.jsx)(r.SelectItem,{value:"90d",children:"Last 90 days"}),(0,a.jsx)(r.SelectItem,{value:"12m",children:"Last 12 months"}),(0,a.jsx)(r.SelectItem,{value:"ytd",children:"Year to date"}),(0,a.jsx)(r.SelectItem,{value:"all",children:"All time"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"description",children:"Description (Optional)"}),(0,a.jsx)(r.Input,{id:"description",placeholder:"Brief description of this report",value:i.description,onChange:e=>d({...i,description:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(r.Label,{htmlFor:"groupBy",children:"Group By"}),(0,a.jsxs)(r.Select,{value:i.groupBy,onValueChange:e=>d({...i,groupBy:e}),children:[(0,a.jsx)(r.SelectTrigger,{id:"groupBy",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsx)(r.SelectContent,{children:A.map(e=>(0,a.jsx)(r.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(r.Label,{children:"Select Metrics *"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose the metrics you want to include in your report"}),(0,a.jsx)("div",{className:"border rounded-lg p-4 space-y-4 max-h-[400px] overflow-y-auto",children:Object.entries(u).map(([e,s])=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-sm",children:e}),(0,a.jsx)("div",{className:"grid gap-2 md:grid-cols-2",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.Checkbox,{id:e.id,checked:i.metrics.includes(e.id),onChange:()=>c(e.id)}),(0,a.jsx)("label",{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:e.label})]},e.id))})]},e))}),i.metrics.length>0&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[i.metrics.length," metric",1!==i.metrics.length?"s":""," selected"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 pt-4 border-t",children:[(0,a.jsxs)(r.Button,{onClick:m,children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Preview Report"]}),(0,a.jsxs)(r.Button,{variant:"outline",onClick:o,children:[(0,a.jsx)(q.Z,{className:"h-4 w-4 mr-2"}),"Save Template"]}),(0,a.jsxs)(r.Button,{variant:"outline",onClick:()=>{if(0===i.metrics.length){n({title:"Validation Error",description:"Please select at least one metric",variant:"destructive"});return}let e=new Blob([["Date",...i.metrics.map(e=>{let s=U.find(s=>s.id===e);return s?.label||e})].join(",")],{type:"text/csv"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`${i.name||"custom-report"}-${Date.now()}.csv`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s),n({title:"Report Exported",description:"Your report has been downloaded as CSV."})},children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Export to CSV"]})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("h4",{className:"font-semibold mb-3",children:"Saved Report Templates"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground text-center py-8 border rounded-lg bg-muted/30",children:"No saved reports yet. Create and save your first custom report above."})]})]})]})}var F=t(59341),K=t(29771);function V(){return(0,a.jsx)(E,{apiClient:F.x1,useToast:r.useToast,logger:K.k})}var Z=t(29163);let O="force-dynamic",$=!0;function G(){return(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between space-y-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Advanced Analytics"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"In-depth analysis with customizable charts and reports"})]})}),(0,a.jsxs)(r.Tabs,{defaultValue:"revenue",className:"space-y-6",children:[(0,a.jsxs)(r.TabsList,{className:"grid w-full max-w-md grid-cols-3",children:[(0,a.jsxs)(r.TabsTrigger,{value:"revenue",className:"flex items-center gap-2",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4"}),"Revenue"]}),(0,a.jsxs)(r.TabsTrigger,{value:"churn",className:"flex items-center gap-2",children:[(0,a.jsx)(Z.Z,{className:"h-4 w-4"}),"Churn"]}),(0,a.jsxs)(r.TabsTrigger,{value:"reports",className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),"Reports"]})]}),(0,a.jsx)(r.TabsContent,{value:"revenue",className:"space-y-6",children:(0,a.jsx)(S,{})}),(0,a.jsx)(r.TabsContent,{value:"churn",className:"space-y-6",children:(0,a.jsx)(T,{})}),(0,a.jsx)(r.TabsContent,{value:"reports",className:"space-y-6",children:(0,a.jsx)(V,{})})]})]})}},26569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n,dynamic:()=>r,dynamicParams:()=>l});var a=t(68570);let r=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/advanced/page.tsx#dynamic`),l=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/advanced/page.tsx#dynamicParams`),n=(0,a.createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/advanced/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(40764));module.exports=a})();