(()=>{var e={};e.id=171,e.ids=[171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},10146:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(80598),t(13321),t(46366),t(96560);var r=t(23191),a=t(88716),i=t(37922),l=t.n(i),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=["",{children:["dashboard",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,80598)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/page.tsx"],x="/dashboard/analytics/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/analytics/page",pathname:"/dashboard/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},47641:(e,s,t)=>{Promise.resolve().then(t.bind(t,65146))},65146:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(10326),a=t(17577),i=t(48723),l=t(77863);function n({data:e,className:s="",height:t=300,horizontal:i=!1,showValues:n=!0,animated:d=!0,colorScheme:o="blue"}){let[c,x]=a.useState(null);if(!e||0===e.length)return(0,r.jsx)("div",{className:(0,l.cn)("flex items-center justify-center rounded-lg border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50",s),style:{height:t},children:(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No data available"})});let m=Math.max(...e.map(e=>e.value)),u={blue:"bg-sky-500",green:"bg-green-500",purple:"bg-purple-500",gradient:"bg-gradient-to-r from-sky-500 to-purple-500"},h={blue:"hover:bg-sky-600",green:"hover:bg-green-600",purple:"hover:bg-purple-600",gradient:"hover:from-sky-600 hover:to-purple-600"};return(0,r.jsx)("div",{className:(0,l.cn)("space-y-3",s),children:e.map((e,s)=>{let t=m>0?e.value/m*100:0,a=c===s;return(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:(0,l.cn)("font-medium transition-colors",a?"text-sky-500":"text-slate-700 dark:text-slate-300"),children:e.label}),n&&(0,r.jsx)("span",{className:(0,l.cn)("font-semibold tabular-nums transition-colors",a?"text-sky-500":"text-slate-900 dark:text-white"),children:e.value.toLocaleString()})]}),(0,r.jsxs)("div",{className:"relative h-8 bg-slate-100 dark:bg-slate-800 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:(0,l.cn)("absolute top-0 left-0 h-full rounded-lg transition-all duration-500",e.color||u[o],e.color||h[o],d&&"animate-in slide-in-from-left",a&&"shadow-lg"),style:{width:`${t}%`,animationDelay:`${100*s}ms`},onMouseEnter:()=>x(s),onMouseLeave:()=>x(null),children:d&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"})}),t>15&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center px-3",children:(0,r.jsxs)("span",{className:"text-xs font-medium text-white",children:[t.toFixed(0),"%"]})})]})]},s)})})}var d=t(21030),o=t(48324),c=t(59341),x=t(41291),m=t(71821),u=t(17069),h=t(36283);function p({period:e="30d"}){let{data:s,isLoading:t,error:a}=function(e="30d"){return(0,o.a)({queryKey:["billing-metrics",e],queryFn:async()=>(await c.x1.get(`/analytics/billing/metrics?timeRange=${e}`)).data,staleTime:6e4})}(e);if(t)return(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.Skeleton,{className:"h-4 w-[100px]"}),(0,r.jsx)(i.Skeleton,{className:"h-4 w-4"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)(i.Skeleton,{className:"h-8 w-[120px] mb-1"}),(0,r.jsx)(i.Skeleton,{className:"h-3 w-[80px]"})]})]},s))});if(a)return(0,r.jsx)(i.Card,{children:(0,r.jsx)(i.CardContent,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5"}),(0,r.jsxs)("p",{children:["Failed to load billing metrics: ",a.message]})]})})});if(!s)return null;let l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Monthly Recurring Revenue"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:l(s.mrr)}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ARR: ",l(s.arr)]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Active Subscriptions"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.activeSubscriptions}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Total revenue: ",l(s.totalRevenue)]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Invoices"}),(0,r.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.totalInvoices}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.paidInvoices," paid, ",s.overdueInvoices," overdue"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Outstanding Balance"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:l(s.outstandingBalance)}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting payment"})]})]})]}),s.revenueTimeSeries&&s.revenueTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Revenue Over Time"}),(0,r.jsx)(i.CardDescription,{children:"Daily revenue for the selected period"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(d.w,{data:s.revenueTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showGrid:!0,showValues:!0,gradient:!0})})]}),s.subscriptionsTimeSeries&&s.subscriptionsTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Subscription Growth"}),(0,r.jsx)(i.CardDescription,{children:"Active subscriptions over time"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(n,{data:s.subscriptionsTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showValues:!0,colorScheme:"green"})})]})]})}var j=t(24061),f=t(74975),g=t(99280);function C({period:e="30d"}){let s;let{data:t,isLoading:a,error:l}=function(e="30d"){return(0,o.a)({queryKey:["customer-metrics",e],queryFn:async()=>(await c.x1.get(`/analytics/customers/metrics?timeRange=${e}`)).data,staleTime:6e4})}(e);if(a)return(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.Skeleton,{className:"h-4 w-[100px]"}),(0,r.jsx)(i.Skeleton,{className:"h-4 w-4"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)(i.Skeleton,{className:"h-8 w-[120px] mb-1"}),(0,r.jsx)(i.Skeleton,{className:"h-3 w-[80px]"})]})]},s))});if(l)return(0,r.jsx)(i.Card,{children:(0,r.jsx)(i.CardContent,{className:"pt-6",children:(0,r.jsxs)("p",{className:"text-destructive",children:["Failed to load customer metrics: ",l.message]})})});if(!t)return null;let x=e=>`${(100*e).toFixed(1)}%`;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Customers"}),(0,r.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.totalCustomers}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.activeCustomers," active"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"New Customers"}),(0,r.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.newCustomers}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Growth: ",x(t.customerGrowthRate)]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Churn Rate"}),(0,r.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:x(t.churnRate)}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.churnedCustomers," churned"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Lifetime Value"}),(0,r.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(s=t.averageLifetimeValue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s))}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Retention: ",x(t.retentionRate)]})]})]})]}),t.customerTimeSeries&&t.customerTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Customer Growth"}),(0,r.jsx)(i.CardDescription,{children:"Total customers over time"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(d.w,{data:t.customerTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showGrid:!0,showValues:!0,gradient:!0})})]}),t.churnTimeSeries&&t.churnTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Customer Churn"}),(0,r.jsx)(i.CardDescription,{children:"Churned customers over time"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(n,{data:t.churnTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showValues:!0,colorScheme:"purple"})})]})]})}var v=t(66697),b=t(48998),N=t(50949);function y({period:e="24h"}){let{data:s,isLoading:t,error:a}=(0,o.a)({queryKey:["monitoring-metrics"],queryFn:async()=>(await c.x1.get("/monitoring/metrics")).data,staleTime:1e4,refetchInterval:3e4});if(t)return(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.Skeleton,{className:"h-4 w-[100px]"}),(0,r.jsx)(i.Skeleton,{className:"h-4 w-4"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)(i.Skeleton,{className:"h-8 w-[120px] mb-1"}),(0,r.jsx)(i.Skeleton,{className:"h-3 w-[80px]"})]})]},s))});if(a)return(0,r.jsx)(i.Card,{children:(0,r.jsx)(i.CardContent,{className:"pt-6",children:(0,r.jsxs)("p",{className:"text-destructive",children:["Failed to load monitoring metrics: ",a.message]})})});if(!s)return null;let l=e=>`${(100*e).toFixed(2)}%`;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Requests"}),(0,r.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.totalRequests.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Error rate: ",l(s.errorRate)]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Avg Response Time"}),(0,r.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[s.avgResponseTimeMs.toFixed(0),"ms"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["P95: ",s.p95ResponseTimeMs.toFixed(0),"ms"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Active Users"}),(0,r.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.activeUsers}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",l(s.systemUptime)]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Critical Errors"}),(0,r.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.criticalErrors}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.warningCount," warnings"]})]})]})]}),s.requestsTimeSeries&&s.requestsTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Request Volume"}),(0,r.jsx)(i.CardDescription,{children:"API requests over time"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(d.w,{data:s.requestsTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showGrid:!0,showValues:!0,gradient:!0})})]}),s.responseTimeTimeSeries&&s.responseTimeTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Response Time Trend"}),(0,r.jsx)(i.CardDescription,{children:"Average response time in milliseconds"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(d.w,{data:s.responseTimeTimeSeries.map(e=>({label:e.label,value:e.value})),height:250,showGrid:!0,showValues:!0})})]}),s.errorRateTimeSeries&&s.errorRateTimeSeries.length>0&&(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Error Rate"}),(0,r.jsx)(i.CardDescription,{children:"Percentage of failed requests"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)(d.w,{data:s.errorRateTimeSeries.map(e=>({label:e.label,value:100*e.value})),height:250,showGrid:!0,showValues:!0})})]})]})}var w=t(21405),T=t(76464);function S(){let[e,s]=(0,a.useState)("30d"),{data:t,isLoading:l,refetch:n}=function(e="30d"){return function(e="30d"){return(0,o.a)({queryKey:["dashboard-data",e],queryFn:async()=>{let[s,t,r]=await Promise.all([c.x1.get(`/analytics/billing/metrics?timeRange=${e}`),c.x1.get(`/analytics/customers/metrics?timeRange=${e}`),c.x1.get("/monitoring/metrics")]);return{billing:s.data,customer:t.data,monitoring:r.data}},staleTime:6e4})}(e)}(e);return(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Real-time metrics powered by GraphQL"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.Button,{variant:"7d"===e?"default":"outline",size:"sm",onClick:()=>s("7d"),children:"7 Days"}),(0,r.jsx)(i.Button,{variant:"30d"===e?"default":"outline",size:"sm",onClick:()=>s("30d"),children:"30 Days"}),(0,r.jsx)(i.Button,{variant:"90d"===e?"default":"outline",size:"sm",onClick:()=>s("90d"),children:"90 Days"})]}),(0,r.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>n(),disabled:l,children:[(0,r.jsx)(w.Z,{className:`h-4 w-4 mr-2 ${l?"animate-spin":""}`}),"Refresh"]})]})]}),t&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"MRR"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:["$",t.billing?.mrr?.toLocaleString()||"0"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.billing?.activeSubscriptions||0," subscriptions"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Customers"}),(0,r.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.customer?.totalCustomers?.toLocaleString()||"0"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.customer?.newCustomers||0," new this period"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Requests"}),(0,r.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:t.monitoring?.totalRequests?.toLocaleString()||"0"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(100*(t.monitoring?.errorRate||0)).toFixed(2),"% error rate"]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Avg Response"}),(0,r.jsx)(T.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold",children:[t.monitoring?.avgResponseTimeMs?.toFixed(0)||"0","ms"]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["P95: ",t.monitoring?.p95ResponseTimeMs?.toFixed(0)||"0","ms"]})]})]})]}),(0,r.jsxs)(i.Tabs,{defaultValue:"billing",className:"space-y-4",children:[(0,r.jsxs)(i.TabsList,{children:[(0,r.jsx)(i.TabsTrigger,{value:"billing",children:"Billing"}),(0,r.jsx)(i.TabsTrigger,{value:"customers",children:"Customers"}),(0,r.jsx)(i.TabsTrigger,{value:"monitoring",children:"Monitoring"})]}),(0,r.jsx)(i.TabsContent,{value:"billing",className:"space-y-4",children:(0,r.jsx)(p,{period:e})}),(0,r.jsx)(i.TabsContent,{value:"customers",className:"space-y-4",children:(0,r.jsx)(C,{period:e})}),(0,r.jsx)(i.TabsContent,{value:"monitoring",className:"space-y-4",children:(0,r.jsx)(y,{period:"30d"===e?"24h":"7d"})})]})]})}},21030:(e,s,t)=>{"use strict";t.d(s,{w:()=>l});var r=t(10326),a=t(17577),i=t(77863);function l({data:e,className:s="",height:t=200,showGrid:l=!0,showLabels:n=!0,showValues:d=!1,animated:o=!0,gradient:c=!0}){let[x,m]=a.useState(null),u=a.useId();if(!e||0===e.length)return(0,r.jsx)("div",{className:(0,i.cn)("flex items-center justify-center",s),style:{height:t},children:(0,r.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No data available"})});let h=Math.max(...e.map(e=>e.value)),p=Math.min(...e.map(e=>e.value)),j=h-p||1,f=e.map((s,t)=>({x:t/(e.length-1)*100,y:100-(s.value-p)/j*60,value:s.value,label:s.label})),g=f.map((e,s)=>`${0===s?"M":"L"} ${e.x} ${e.y}`).join(" "),C=f[f.length-1],v=c&&C?`${g} L ${C.x} 100 L 0 100 Z`:"";return(0,r.jsxs)("div",{className:(0,i.cn)("relative",s),children:[n&&(0,r.jsx)("div",{className:"flex justify-between mb-2 px-2",children:e.map((e,s)=>(0,r.jsx)("span",{className:(0,i.cn)("text-xs transition-colors",x===s?"text-sky-500 font-medium":"text-slate-600 dark:text-slate-400"),children:e.label},s))}),(0,r.jsxs)("div",{className:"relative",style:{height:t},children:[(0,r.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full",children:[l&&(0,r.jsx)("g",{className:"opacity-20",children:[0,25,50,75,100].map(e=>(0,r.jsx)("line",{x1:"0",y1:e,x2:"100",y2:e,stroke:"currentColor",strokeWidth:"0.2",className:"text-slate-400 dark:text-slate-600"},e))}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:u,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"0%",stopColor:"rgb(14, 165, 233)",stopOpacity:"0.3"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"rgb(14, 165, 233)",stopOpacity:"0"})]})}),(0,r.jsx)("path",{d:v,fill:`url(#${u})`,className:o?"animate-in fade-in duration-500":""})]}),(0,r.jsx)("path",{d:g,fill:"none",stroke:"rgb(14, 165, 233)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o?"animate-in slide-in-from-left duration-700":""}),f.map((e,s)=>(0,r.jsxs)("g",{children:[(0,r.jsx)("circle",{cx:e.x,cy:e.y,r:x===s?6:4,fill:"rgb(14, 165, 233)",className:(0,i.cn)("transition-all duration-200 cursor-pointer",o&&"animate-in zoom-in",x===s&&"drop-shadow-lg"),style:{animationDelay:`${50*s}ms`},onMouseEnter:()=>m(s),onMouseLeave:()=>m(null)}),x===s&&d&&(0,r.jsx)("text",{x:e.x,y:e.y-10,textAnchor:"middle",className:"text-xs fill-sky-500 font-medium",style:{fontSize:"4px"},children:e.value})]},s))]}),null!==x&&f[x]&&e[x]&&(0,r.jsxs)("div",{className:"absolute bg-slate-900 dark:bg-slate-800 text-white px-3 py-2 rounded-lg shadow-lg text-sm pointer-events-none z-10 animate-in fade-in zoom-in duration-200",style:{left:`${f[x].x}%`,top:`${f[x].y}%`,transform:"translate(-50%, -120%)"},children:[(0,r.jsx)("div",{className:"font-medium",children:e[x].label}),(0,r.jsx)("div",{className:"text-sky-400",children:f[x].value.toLocaleString()})]})]})]})}},80598:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/analytics/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(10146));module.exports=r})();