(()=>{var e={};e.id=1919,e.ids=[1919],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},20850:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(55259),s(13321),s(46366),s(96560);var a=s(23191),i=s(88716),r=s(37922),n=s.n(r),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["billing-revenue",{children:["payment-methods",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,55259)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/payment-methods/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/payment-methods/[id]/page.tsx"],m="/dashboard/billing-revenue/payment-methods/[id]/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dashboard/billing-revenue/payment-methods/[id]/page",pathname:"/dashboard/billing-revenue/payment-methods/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},32681:(e,t,s)=>{Promise.resolve().then(s.bind(s,19215))},19215:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var a=s(10326),i=s(17577),r=s(35047),n=s(48723),l=s(28916),d=s(59734),o=s(16671),c=s(30361),m=s(48998),h=s(69669),u=s(41291),x=s(77506),p=s(86333),y=s(33734),j=s(58038),g=s(98091),f=s(77636),v=s(79635),b=s(5932),_=s(37358),N=s(71821),w=s(19569),C=s(90434),k=s(34041);function D(){var e,t;let s=(0,r.useParams)(),D=(0,r.useRouter)(),{toast:P}=(0,n.useToast)();s.id;let{paymentMethods:T,loading:A,setDefaultPaymentMethod:F,removePaymentMethod:S,verifyPaymentMethod:Z}=(0,w.k)(),[q,B]=(0,i.useState)(null),[E,M]=(0,i.useState)([]),[U,H]=(0,i.useState)(!1),[R,V]=(0,i.useState)(!1),[W,$]=(0,i.useState)(!1),[I,z]=(0,i.useState)(!1),[G,L]=(0,i.useState)(!1),[O,X]=(0,i.useState)(!1),[Y,J]=(0,i.useState)(""),[K,Q]=(0,i.useState)(""),ee=e=>{let t=new Date(e);return`${(0,k.WU)(t,"MMM d, yyyy")} at ${(0,k.WU)(t,"h:mm a")}`},et=async()=>{if(q){X(!0);try{await F(q.payment_method_id),P({title:"Success",description:"Default payment method updated"})}catch(e){P({title:"Error",description:"Failed to set default payment method",variant:"destructive"})}finally{X(!1)}}},es=async()=>{if(!q)return;let e=parseFloat(Y),t=parseFloat(K);if(isNaN(e)||isNaN(t)){P({title:"Error",description:"Please enter valid amounts",variant:"destructive"});return}L(!0);try{await Z(q.payment_method_id,{verification_code1:Y,verification_code2:K,verification_amounts:[e,t]}),P({title:"Success",description:"Bank account verified successfully"}),V(!1),J(""),Q("")}catch(e){P({title:"Error",description:"Verification failed. Please check the amounts and try again.",variant:"destructive"})}finally{L(!1)}},ea=async()=>{if(q){z(!0);try{await S(q.payment_method_id),P({title:"Success",description:"Payment method removed successfully"}),D.push("/dashboard/billing-revenue/payment-methods")}catch(e){P({title:"Error",description:"Failed to remove payment method",variant:"destructive"})}finally{z(!1)}}},ei=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e/100);return A&&!q?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading payment method details..."})]})}):q?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.Button,{variant:"outline",asChild:!0,children:(0,a.jsx)(C.default,{href:"/dashboard/billing-revenue/payment-methods",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Payment Method Details"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"View and manage this payment method"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[!q.is_default&&(0,a.jsx)(n.Button,{variant:"outline",onClick:et,disabled:O,children:O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Set as Default"]})}),"bank_account"===q.method_type&&!q.is_verified&&"pending_verification"===q.status&&(0,a.jsxs)(n.Button,{onClick:()=>V(!0),children:[(0,a.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Verify Bank Account"]}),(0,a.jsxs)(n.Button,{variant:"destructive",onClick:()=>$(!0),children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Remove"]})]})]}),(0,a.jsx)(n.Card,{children:(0,a.jsx)(n.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[(0,a.jsx)("div",{className:"p-4 bg-accent rounded-lg",children:(e=>{switch(e){case"card":return(0,a.jsx)(l.Z,{className:"h-8 w-8 text-blue-500"});case"bank_account":return(0,a.jsx)(d.Z,{className:"h-8 w-8 text-green-500"});case"wallet":return(0,a.jsx)(o.Z,{className:"h-8 w-8 text-purple-500"});default:return(0,a.jsx)(l.Z,{className:"h-8 w-8 text-muted-foreground"})}})(q.method_type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold",children:["card"===q.method_type&&(0,a.jsxs)(a.Fragment,{children:[q.card_brand?.toUpperCase()||"CARD"," ****"," ",q.card_last4]}),"bank_account"===q.method_type&&(0,a.jsxs)(a.Fragment,{children:[q.bank_name||"Bank Account"," ****"," ",q.bank_account_last4]}),"wallet"===q.method_type&&(0,a.jsx)(a.Fragment,{children:q.wallet_type||"Wallet"})]}),q.is_default&&(0,a.jsxs)(n.Badge,{variant:"secondary",className:"flex items-center gap-1",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 text-yellow-500 fill-yellow-500"}),"Default"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(e=q.status,t=q.is_verified,"active"===e&&t?(0,a.jsxs)(n.Badge,{variant:"default",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),"Active"]}):"pending_verification"===e?(0,a.jsxs)(n.Badge,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),"Pending Verification"]}):"verification_failed"===e?(0,a.jsxs)(n.Badge,{variant:"destructive",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),"Verification Failed"]}):"expired"===e?(0,a.jsxs)(n.Badge,{variant:"secondary",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3"}),"Expired"]}):(0,a.jsx)(n.Badge,{variant:"secondary",className:"flex items-center gap-1 w-fit",children:e})),"bank_account"===q.method_type&&q.is_verified&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-green-600",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Verified"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Type"}),(0,a.jsx)("div",{className:"font-medium capitalize",children:q.method_type.replace("_"," ")})]}),"card"===q.method_type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Expiration"}),(0,a.jsxs)("div",{className:"font-medium",children:[String(q.card_exp_month).padStart(2,"0"),"/",q.card_exp_year]})]}),"bank_account"===q.method_type&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Account Type"}),(0,a.jsx)("div",{className:"font-medium capitalize",children:q.bank_account_type||"Checking"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Added"}),(0,a.jsx)("div",{className:"font-medium",children:(0,k.WU)(new Date(q.created_at),"MMM d, yyyy")})]}),q.expires_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Expires"}),(0,a.jsx)("div",{className:"font-medium",children:(0,k.WU)(new Date(q.expires_at),"MMM d, yyyy")})]})]})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),"Billing Information"]})}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[q.billing_name&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:q.billing_name})]}),q.billing_email&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:q.billing_email})]}),q.billing_address_line1&&(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:q.billing_address_line1}),q.billing_address_line2&&(0,a.jsx)("div",{children:q.billing_address_line2}),(0,a.jsxs)("div",{children:[q.billing_city,", ",q.billing_state," ",q.billing_postal_code]}),(0,a.jsx)("div",{children:q.billing_country})]})]}),!q.billing_address_line1&&!q.billing_name&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No billing information available"})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5"}),"Audit Trail"]})}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Created"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:ee(q.created_at)})]}),q.verified_at&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Verified"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:ee(q.verified_at)})]}),q.expires_at&&(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Expires"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(0,k.WU)(new Date(q.expires_at),"MMM d, yyyy")})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Status"}),(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:q.status})]})]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Recent Transactions"]})}),(0,a.jsx)(n.CardContent,{children:U?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"Loading transactions..."}):0===E.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found for this payment method"}):(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Date"}),(0,a.jsx)(n.TableHead,{children:"Description"}),(0,a.jsx)(n.TableHead,{children:"Invoice"}),(0,a.jsx)(n.TableHead,{children:"Status"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Amount"})]})}),(0,a.jsx)(n.TableBody,{children:E.map(e=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsxs)(n.TableCell,{children:[(0,a.jsx)("div",{className:"text-sm",children:(0,k.WU)(new Date(e.date),"MMM d, yyyy")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,k.WU)(new Date(e.date),"h:mm a")})]}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)("div",{className:"max-w-[300px] truncate",children:e.description})}),(0,a.jsx)(n.TableCell,{children:e.invoice_id?(0,a.jsx)(C.default,{href:`/dashboard/billing-revenue/invoices/${e.invoice_id}`,className:"text-blue-600 hover:underline",children:e.invoice_id}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(n.Badge,{variant:"succeeded"===e.status?"default":"secondary",children:e.status})}),(0,a.jsx)(n.TableCell,{className:"text-right font-medium",children:ei(e.amount,e.currency)})]},e.id))})]})})]}),(0,a.jsx)(n.Dialog,{open:R,onOpenChange:V,children:(0,a.jsxs)(n.DialogContent,{children:[(0,a.jsxs)(n.DialogHeader,{children:[(0,a.jsx)(n.DialogTitle,{children:"Verify Bank Account"}),(0,a.jsx)(n.DialogDescription,{children:"Enter the two small deposit amounts (in cents) that were sent to your bank account. This usually takes 1-2 business days."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"amount1",children:"First Deposit Amount (cents)"}),(0,a.jsx)(n.Input,{id:"amount1",type:"number",placeholder:"e.g., 32",value:Y,onChange:e=>J(e.target.value),min:"1",max:"99"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{htmlFor:"amount2",children:"Second Deposit Amount (cents)"}),(0,a.jsx)(n.Input,{id:"amount2",type:"number",placeholder:"e.g., 45",value:K,onChange:e=>Q(e.target.value),min:"1",max:"99"})]}),(0,a.jsx)("div",{className:"rounded-md bg-blue-500/10 border border-blue-500/20 p-3",children:(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Check your bank statement for two small deposits from our billing system. Enter these amounts to verify your account."})})]}),(0,a.jsxs)(n.DialogFooter,{children:[(0,a.jsx)(n.Button,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,a.jsx)(n.Button,{onClick:es,disabled:G||!Y||!K,children:G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify Account"})]})]})}),(0,a.jsx)(n.AlertDialog,{open:W,onOpenChange:$,children:(0,a.jsxs)(n.AlertDialogContent,{children:[(0,a.jsxs)(n.AlertDialogHeader,{children:[(0,a.jsx)(n.AlertDialogTitle,{children:"Remove Payment Method"}),(0,a.jsxs)(n.AlertDialogDescription,{children:["Are you sure you want to remove this payment method? This action cannot be undone.",q.is_default&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("strong",{className:"text-yellow-600",children:"Warning: This is your default payment method. You may want to set another payment method as default before removing this one."})]})]})]}),(0,a.jsxs)(n.AlertDialogFooter,{children:[(0,a.jsx)(n.AlertDialogCancel,{disabled:I,children:"Cancel"}),(0,a.jsx)(n.AlertDialogAction,{onClick:ea,disabled:I,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Removing..."]}):"Remove"})]})]})})]}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Payment method not found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The payment method you are looking for does not exist or has been removed."}),(0,a.jsx)(n.Button,{asChild:!0,children:(0,a.jsxs)(C.default,{href:"/dashboard/billing-revenue/payment-methods",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Back to Payment Methods"]})})]})})}s(29771)},19569:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var a=s(17577),i=s(59341),r=s(29771);let n=()=>{let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[l,d]=(0,a.useState)(null),o=(0,a.useCallback)(async()=>{n(!0),d(null);try{let e=await i.x1.get("/billing/tenant/payment-methods");return t(e.data),r.k.info("Fetched payment methods",{count:e.data.length}),e.data}catch(t){let e=t.response?.data?.detail||"Failed to fetch payment methods";throw d(e),r.k.error("Error fetching payment methods",{error:e}),t}finally{n(!1)}},[]),c=(0,a.useCallback)(async e=>{n(!0),d(null);try{let t=await i.x1.post("/billing/tenant/payment-methods",e);return await o(),r.k.info("Added payment method",{method_type:e.method_type}),t.data}catch(t){let e=t.response?.data?.detail||"Failed to add payment method";throw d(e),r.k.error("Error adding payment method",{error:e}),t}finally{n(!1)}},[o]),m=(0,a.useCallback)(async(e,t)=>{n(!0),d(null);try{let s=await i.x1.patch(`/billing/tenant/payment-methods/${e}`,t);return await o(),r.k.info("Updated payment method",{payment_method_id:e}),s.data}catch(s){let t=s.response?.data?.detail||"Failed to update payment method";throw d(t),r.k.error("Error updating payment method",{payment_method_id:e,error:t}),s}finally{n(!1)}},[o]),h=(0,a.useCallback)(async e=>{n(!0),d(null);try{let t=await i.x1.post(`/billing/tenant/payment-methods/${e}/set-default`);return await o(),r.k.info("Set default payment method",{payment_method_id:e}),t.data}catch(s){let t=s.response?.data?.detail||"Failed to set default payment method";throw d(t),r.k.error("Error setting default payment method",{payment_method_id:e,error:t}),s}finally{n(!1)}},[o]),u=(0,a.useCallback)(async e=>{n(!0),d(null);try{await i.x1.delete(`/billing/tenant/payment-methods/${e}`),await o(),r.k.info("Removed payment method",{payment_method_id:e})}catch(s){let t=s.response?.data?.detail||"Failed to remove payment method";throw d(t),r.k.error("Error removing payment method",{payment_method_id:e,error:t}),s}finally{n(!1)}},[o]),x=(0,a.useCallback)(async(e,t)=>{n(!0),d(null);try{let s=await i.x1.post(`/billing/tenant/payment-methods/${e}/verify`,t);return await o(),r.k.info("Verified payment method",{payment_method_id:e}),s.data}catch(s){let t=s.response?.data?.detail||"Failed to verify payment method";throw d(t),r.k.error("Error verifying payment method",{payment_method_id:e,error:t}),s}finally{n(!1)}},[o]),p=e.find(e=>e.is_default);return(0,a.useEffect)(()=>{o()},[o]),{paymentMethods:e,defaultPaymentMethod:p,loading:s,error:l,fetchPaymentMethods:o,addPaymentMethod:c,updatePaymentMethod:m,setDefaultPaymentMethod:h,removePaymentMethod:u,verifyPaymentMethod:x}}},55259:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/payment-methods/[id]/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2793,1009,6226,657,6032,4218],()=>s(20850));module.exports=a})();