(()=>{var e={};e.id=8951,e.ids=[8951],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},85246:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(56956),t(13321),t(46366),t(96560);var i=t(23191),a=t(88716),r=t(37922),d=t.n(r),l=t(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["billing-revenue",{children:["pricing",{children:["rules",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,56956)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/pricing/rules/[id]/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/pricing/rules/[id]/page.tsx"],m="/dashboard/billing-revenue/pricing/rules/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/billing-revenue/pricing/rules/[id]/page",pathname:"/dashboard/billing-revenue/pricing/rules/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50816:(e,s,t)=>{Promise.resolve().then(t.bind(t,82375))},82375:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var i=t(10326),a=t(17577),r=t(44976),d=t(48324),l=t(17010),n=t(48723),c=t(77506),o=t(86333),m=t(69508),x=t(98295),u=t(85962),h=t(98091),p=t(40765),g=t(17069),j=t(48705),v=t(24061),N=t(37358),f=t(34041),_=t(59341),b=t(35047),y=t(93158);function C({params:e}){let{toast:s}=(0,n.useToast)(),t=(0,b.useRouter)(),C=(0,r.NL)(),{api:w}=(0,y.M)(),T=w.baseUrl,[P,D]=(0,a.useState)(!1),[q,A]=(0,a.useState)("overview"),{data:U,isLoading:k,error:M,refetch:B}=(0,d.a)({queryKey:["pricing-rule",T,e.id],queryFn:async()=>(await _.x1.get(`${T}/api/v1/billing/pricing/rules/${e.id}`)).data}),S=(0,l.D)({mutationFn:async s=>(await _.x1.post(`${T}/api/v1/billing/pricing/rules/${e.id}/${s?"activate":"deactivate"}`)).data,onSuccess:(t,i)=>{s({title:"Success",description:`Pricing rule ${i?"activated":"deactivated"} successfully`}),C.invalidateQueries({queryKey:["pricing-rule",T,e.id]}),C.invalidateQueries({queryKey:["pricing-rules"]})},onError:e=>{s({title:"Error",description:e.response?.data?.message||"Failed to update pricing rule status",variant:"destructive"})}}),F=(0,l.D)({mutationFn:async()=>{await _.x1.delete(`${T}/api/v1/billing/pricing/rules/${e.id}`)},onSuccess:()=>{s({title:"Success",description:"Pricing rule deleted successfully"}),t.push("/dashboard/billing-revenue/pricing")},onError:e=>{s({title:"Error",description:e.response?.data?.message||"Failed to delete pricing rule",variant:"destructive"})}}),H=e=>e>=500?(0,i.jsxs)(n.Badge,{className:"bg-red-500",children:["Critical (",e,")"]}):e>=300?(0,i.jsxs)(n.Badge,{className:"bg-orange-500",children:["High (",e,")"]}):e>=100?(0,i.jsxs)(n.Badge,{className:"bg-yellow-500",children:["Medium (",e,")"]}):(0,i.jsxs)(n.Badge,{className:"bg-gray-500",children:["Low (",e,")"]}),$=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);if(k)return(0,i.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,i.jsx)(c.Z,{className:"h-8 w-8 animate-spin"})});if(M||!U)return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsxs)(n.Button,{variant:"ghost",onClick:()=>t.back(),children:[(0,i.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Back"]})}),(0,i.jsx)(n.Card,{children:(0,i.jsxs)(n.CardContent,{className:"pt-6",children:[(0,i.jsx)("div",{className:"text-center text-destructive",children:"Failed to load pricing rule. The rule may not exist or you may not have permission to view it."}),(0,i.jsx)("div",{className:"text-center mt-4",children:(0,i.jsx)(n.Button,{onClick:()=>t.push("/dashboard/billing-revenue/pricing"),children:"Return to Pricing"})})]})})]});let L=U.max_uses?U.current_uses/U.max_uses*100:0;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"flex items-center justify-between",children:(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)(n.Button,{variant:"ghost",onClick:()=>t.back(),children:[(0,i.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold",children:U.name}),(0,i.jsx)(n.Badge,{variant:U.is_active?"default":"secondary",children:U.is_active?"Active":"Inactive"}),H(U.priority)]}),U.description&&(0,i.jsx)("p",{className:"text-muted-foreground mt-1",children:U.description})]})]})}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Quick Actions"})}),(0,i.jsx)(n.CardContent,{children:(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(n.Button,{variant:"outline",onClick:()=>t.push(`/dashboard/billing-revenue/pricing?edit=${e.id}`),children:[(0,i.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Edit Rule"]}),(0,i.jsxs)(n.Button,{variant:"outline",onClick:()=>S.mutate(!U.is_active),disabled:S.isPending,children:[S.isPending?(0,i.jsx)(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}):U.is_active?(0,i.jsx)(x.Z,{className:"mr-2 h-4 w-4"}):(0,i.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),U.is_active?"Deactivate":"Activate"]}),(0,i.jsxs)(n.Button,{variant:"outline",onClick:()=>D(!0),className:"text-destructive",children:[(0,i.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Delete Rule"]})]})})]}),(0,i.jsxs)(n.Tabs,{value:q,onValueChange:A,children:[(0,i.jsxs)(n.TabsList,{children:[(0,i.jsx)(n.TabsTrigger,{value:"overview",children:"Overview"}),(0,i.jsx)(n.TabsTrigger,{value:"application",children:"Application"}),(0,i.jsx)(n.TabsTrigger,{value:"usage",children:"Usage History"})]}),(0,i.jsx)(n.TabsContent,{value:"overview",className:"space-y-4",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(p.Z,{className:"h-5 w-5"}),"Rule Information"]})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rule ID"}),(0,i.jsx)("div",{className:"font-mono text-sm",children:U.rule_id})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Name"}),(0,i.jsx)("div",{className:"font-medium",children:U.name})]}),U.description&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Description"}),(0,i.jsx)("div",{children:U.description})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Priority"}),(0,i.jsx)("div",{className:"mt-1",children:H(U.priority)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Status"}),(0,i.jsx)("div",{className:"mt-1",children:(0,i.jsx)(n.Badge,{variant:U.is_active?"default":"secondary",children:U.is_active?"Active":"Inactive"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Created"}),(0,i.jsx)("div",{children:(0,f.WU)(new Date(U.created_at),"MMM d, yyyy h:mm a")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Last Updated"}),(0,i.jsx)("div",{children:(0,f.WU)(new Date(U.updated_at),"MMM d, yyyy h:mm a")})]})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(g.Z,{className:"h-5 w-5"}),"Discount Configuration"]})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Discount Type"}),(0,i.jsx)("div",{className:"mt-1",children:(e=>{let{label:s,className:t}={percentage:{label:"Percentage",className:"bg-blue-500"},fixed_amount:{label:"Fixed Amount",className:"bg-green-500"},fixed_price:{label:"Fixed Price",className:"bg-purple-500"}}[e];return(0,i.jsx)(n.Badge,{className:t,children:s})})(U.discount_type)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Discount Value"}),(0,i.jsx)("div",{className:"text-2xl font-bold mt-1",children:"percentage"===U.discount_type?`${U.discount_value}%`:$(U.discount_value)})]}),"percentage"===U.discount_type&&(0,i.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-md",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Example"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["$100.00 product → $",(100*(1-U.discount_value/100)).toFixed(2)," after discount"]})]}),"fixed_amount"===U.discount_type&&(0,i.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-md",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Example"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["$100.00 product → $",(100-U.discount_value).toFixed(2)," after discount"]})]}),"fixed_price"===U.discount_type&&(0,i.jsxs)("div",{className:"p-3 bg-purple-50 dark:bg-purple-950 rounded-md",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:"Fixed Price"}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["Any applicable product will be priced at ",$(U.discount_value)]})]})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(j.Z,{className:"h-5 w-5"}),"Application Scope"]})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Applies To"}),U.applies_to_all?(0,i.jsx)(n.Badge,{variant:"outline",className:"mt-1",children:"All Products"}):(0,i.jsxs)("div",{className:"mt-1 space-y-1",children:[U.applies_to_product_ids.length>0&&(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:U.applies_to_product_ids.length})," ","specific products"]}),U.applies_to_categories.length>0&&(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("span",{className:"font-medium",children:U.applies_to_categories.length})," ","categories"]})]})]}),!U.applies_to_all&&U.applies_to_product_ids.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Product IDs"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[U.applies_to_product_ids.slice(0,5).map(e=>(0,i.jsx)(n.Badge,{variant:"secondary",children:e},e)),U.applies_to_product_ids.length>5&&(0,i.jsxs)(n.Badge,{variant:"secondary",children:["+",U.applies_to_product_ids.length-5," more"]})]})]}),!U.applies_to_all&&U.applies_to_categories.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Categories"}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[U.applies_to_categories.slice(0,5).map(e=>(0,i.jsx)(n.Badge,{variant:"secondary",children:e},e)),U.applies_to_categories.length>5&&(0,i.jsxs)(n.Badge,{variant:"secondary",children:["+",U.applies_to_categories.length-5," more"]})]})]})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(v.Z,{className:"h-5 w-5"}),"Conditions"]})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Minimum Quantity"}),(0,i.jsx)("div",{className:"font-medium",children:U.min_quantity?U.min_quantity:"No minimum"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Customer Segments"}),U.customer_segments.length>0?(0,i.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:U.customer_segments.map(e=>(0,i.jsx)(n.Badge,{variant:"outline",children:e},e))}):(0,i.jsx)("div",{className:"text-sm",children:"All customer segments"})]})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,i.jsx)(N.Z,{className:"h-5 w-5"}),"Time Constraints"]})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Start Date"}),(0,i.jsx)("div",{children:U.starts_at?(0,f.WU)(new Date(U.starts_at),"MMM d, yyyy h:mm a"):"No start date (always active)"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"End Date"}),(0,i.jsx)("div",{children:U.ends_at?(0,f.WU)(new Date(U.ends_at),"MMM d, yyyy h:mm a"):"No end date (never expires)"})]}),U.starts_at&&U.ends_at&&(0,i.jsx)("div",{className:"p-3 bg-accent rounded-md",children:(0,i.jsxs)("div",{className:"text-sm",children:["Valid for"," ",Math.ceil((new Date(U.ends_at).getTime()-new Date(U.starts_at).getTime())/864e5)," ","days"]})})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Usage Limits"})}),(0,i.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Maximum Uses"}),(0,i.jsx)("div",{className:"font-medium",children:U.max_uses?U.max_uses.toLocaleString():"Unlimited"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Current Uses"}),(0,i.jsx)("div",{className:"text-2xl font-bold",children:U.current_uses.toLocaleString()})]}),U.max_uses&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Usage Progress"}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:(0,i.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${Math.min(L,100)}%`}})}),(0,i.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[L.toFixed(1),"% used"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm text-muted-foreground",children:"Remaining Uses"}),(0,i.jsx)("div",{className:"font-medium",children:(U.max_uses-U.current_uses).toLocaleString()})]})]})]})]})]})}),(0,i.jsxs)(n.TabsContent,{value:"application",className:"space-y-4",children:[(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"What Products Does This Rule Apply To?"})}),(0,i.jsx)(n.CardContent,{className:"space-y-4",children:U.applies_to_all?(0,i.jsxs)("div",{className:"p-4 bg-accent rounded-lg",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:"All Products"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"This rule applies to all products in your catalog without exception."})]}):(0,i.jsxs)(i.Fragment,{children:[U.applies_to_product_ids.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Specific Products"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:U.applies_to_product_ids.map(e=>(0,i.jsx)(n.Badge,{variant:"secondary",children:e},e))}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[U.applies_to_product_ids.length," product(s) selected"]})]}),U.applies_to_categories.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Product Categories"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:U.applies_to_categories.map(e=>(0,i.jsx)(n.Badge,{variant:"secondary",children:e},e))}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["All products in these ",U.applies_to_categories.length," categor",1===U.applies_to_categories.length?"y":"ies"]})]})]})})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Customer Eligibility"})}),(0,i.jsx)(n.CardContent,{className:"space-y-4",children:U.customer_segments.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-medium mb-2",children:"Required Customer Segments"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:U.customer_segments.map(e=>(0,i.jsx)(n.Badge,{variant:"outline",children:e},e))}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Only customers in these segments can use this pricing rule"})]}):(0,i.jsxs)("div",{className:"p-4 bg-accent rounded-lg",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:"All Customers"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"This rule is available to all customers regardless of segment."})]})})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Quantity Requirements"})}),(0,i.jsx)(n.CardContent,{children:U.min_quantity?(0,i.jsxs)("div",{className:"p-4 bg-accent rounded-lg",children:[(0,i.jsxs)("div",{className:"font-medium mb-2",children:["Minimum Quantity: ",U.min_quantity]}),(0,i.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Customers must purchase at least ",U.min_quantity," unit(s) to qualify for this discount."]})]}):(0,i.jsxs)("div",{className:"p-4 bg-accent rounded-lg",children:[(0,i.jsx)("div",{className:"font-medium mb-2",children:"No Minimum Quantity"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:"This rule applies regardless of quantity purchased."})]})})]})]}),(0,i.jsxs)(n.TabsContent,{value:"usage",className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{className:"pb-2",children:(0,i.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Total Usage"})}),(0,i.jsxs)(n.CardContent,{children:[(0,i.jsx)("div",{className:"text-3xl font-bold",children:U.current_uses.toLocaleString()}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Times applied"})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{className:"pb-2",children:(0,i.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Usage Limit"})}),(0,i.jsxs)(n.CardContent,{children:[(0,i.jsx)("div",{className:"text-3xl font-bold",children:U.max_uses?U.max_uses.toLocaleString():"∞"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Maximum applications"})]})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{className:"pb-2",children:(0,i.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Remaining"})}),(0,i.jsxs)(n.CardContent,{children:[(0,i.jsx)("div",{className:"text-3xl font-bold",children:U.max_uses?(U.max_uses-U.current_uses).toLocaleString():"∞"}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Applications left"})]})]})]}),U.max_uses&&(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Usage Progress"})}),(0,i.jsx)(n.CardContent,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,i.jsxs)("span",{children:[U.current_uses.toLocaleString()," / ",U.max_uses.toLocaleString()," uses"]}),(0,i.jsxs)("span",{className:"font-medium",children:[L.toFixed(1),"%"]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:(0,i.jsx)("div",{className:`h-4 rounded-full ${L>=90?"bg-red-600":L>=75?"bg-orange-600":"bg-blue-600"}`,style:{width:`${Math.min(L,100)}%`}})})]}),L>=90&&(0,i.jsxs)("div",{className:"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-md",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-red-900 dark:text-red-100",children:"High Usage Warning"}),(0,i.jsxs)("div",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:["This rule has been used ",L.toFixed(0),"% of its maximum limit. Consider increasing the limit or creating a new rule."]})]})]})})]}),(0,i.jsxs)(n.Card,{children:[(0,i.jsx)(n.CardHeader,{children:(0,i.jsx)(n.CardTitle,{children:"Usage Over Time"})}),(0,i.jsx)(n.CardContent,{children:(0,i.jsx)("div",{className:"p-8 bg-accent rounded-lg text-center",children:(0,i.jsx)("p",{className:"text-muted-foreground",children:"Usage history chart would appear here. This feature requires additional data tracking and visualization implementation."})})})]})]})]}),(0,i.jsx)(n.AlertDialog,{open:P,onOpenChange:D,children:(0,i.jsxs)(n.AlertDialogContent,{children:[(0,i.jsxs)(n.AlertDialogHeader,{children:[(0,i.jsx)(n.AlertDialogTitle,{children:"Delete Pricing Rule"}),(0,i.jsxs)(n.AlertDialogDescription,{children:['Are you sure you want to delete the rule "',U.name,'"? This action cannot be undone and will remove the rule permanently.']})]}),(0,i.jsxs)(n.AlertDialogFooter,{children:[(0,i.jsx)(n.AlertDialogCancel,{disabled:F.isPending,children:"Cancel"}),(0,i.jsx)(n.AlertDialogAction,{onClick:()=>F.mutate(),disabled:F.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:F.isPending?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete Rule"})]})]})})]})}},56956:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});let i=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/billing-revenue/pricing/rules/[id]/page.tsx#default`)}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(85246));module.exports=i})();