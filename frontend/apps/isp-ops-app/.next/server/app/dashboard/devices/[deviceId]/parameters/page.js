(()=>{var e={};e.id=1089,e.ids=[1089],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},39836:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>u,tree:()=>c}),a(75051),a(13321),a(46366),a(96560);var t=a(23191),r=a(88716),i=a(37922),n=a.n(i),d=a(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);a.d(s,l);let c=["",{children:["dashboard",{children:["devices",{children:["[deviceId]",{children:["parameters",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,75051)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/[deviceId]/parameters/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/[deviceId]/parameters/page.tsx"],p="/dashboard/devices/[deviceId]/parameters/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/devices/[deviceId]/parameters/page",pathname:"/dashboard/devices/[deviceId]/parameters",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28071:(e,s,a)=>{Promise.resolve().then(a.bind(a,10030))},10030:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>k});var t=a(10326),r=a(17577),i=a(44976),n=a(48324),d=a(17010),l=a(48723),c=a(31215),o=a(94019),p=a(69508),m=a(941),u=a(39183),h=a(36283),x=a(86333),j=a(21405),g=a(88378),f=a(41291),v=a(88307),b=a(74250),y=a(20892),N=a(90434),w=a(35047);function C(){let e=(0,w.useParams)().deviceId,[s,a]=(0,r.useState)(""),[y,C]=(0,r.useState)(new Set(["Device"])),[k,P]=(0,r.useState)(null),[q,S]=(0,r.useState)(""),[B,T]=(0,r.useState)(0),D=(0,i.NL)(),{toast:$}=(0,l.useToast)(),{apiBaseUrl:_}=(0,b.L)(),{data:Z,isLoading:E}=(0,n.a)({queryKey:["device-parameters",e,B],queryFn:async()=>{let s=await fetch(`${_}/api/isp/v1/admin/genieacs/devices/${e}/parameters`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch parameters");return s.json()}}),{data:F}=(0,n.a)({queryKey:["device",e],queryFn:async()=>{let s=await fetch(`${_}/api/isp/v1/admin/genieacs/devices/${e}`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch device");return s.json()}}),I=(0,d.D)({mutationFn:async({path:s,value:a})=>{let t=await fetch(`${_}/api/isp/v1/admin/genieacs/devices/${e}/parameters`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s,value:a})});if(!t.ok)throw Error("Failed to update parameter");return t.json()},onSuccess:()=>{D.invalidateQueries({queryKey:["device-parameters",e]}),P(null),S(""),$({title:"Parameter updated",description:"The parameter has been successfully updated on the device."})},onError:e=>{$({title:"Update failed",description:e.message||"Could not update the parameter.",variant:"destructive"})}}),L=(0,d.D)({mutationFn:async()=>{let s=await fetch(`${_}/api/isp/v1/admin/genieacs/devices/${e}/refresh`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to refresh");return s.json()},onSuccess:()=>{T(e=>e+1),$({title:"Refresh initiated",description:"Device parameters will update shortly."})}}),U=e=>{C(s=>{let a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})},A=e=>{P(e.path),S(String(e.value))},R=()=>{P(null),S("")},z=e=>{I.mutate({path:e.path,value:q})},O=e=>k===e.path?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Input,{value:q,onChange:e=>S(e.target.value),className:"h-8",autoFocus:!0}),(0,t.jsx)(l.Button,{size:"sm",onClick:()=>z(e),disabled:I.isPending,children:(0,t.jsx)(c.Z,{className:"h-3 w-3"})}),(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:R,children:(0,t.jsx)(o.Z,{className:"h-3 w-3"})})]}):(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("span",{className:"font-mono text-sm break-all",children:String(e.value)}),e.writable&&(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>A(e),className:"flex-shrink-0",children:(0,t.jsx)(p.Z,{className:"h-3 w-3"})})]}),G=e=>{switch(e.toLowerCase()){case"string":return"bg-blue-100 text-blue-800 dark:bg-blue-950/20 dark:text-blue-400";case"number":case"integer":return"bg-green-100 text-green-800 dark:bg-green-950/20 dark:text-green-400";case"boolean":return"bg-purple-100 text-purple-800 dark:bg-purple-950/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-950/20 dark:text-gray-400"}},H=(e,s=0)=>{let a=y.has(e.path),r=e.parameters.length>0||e.children.length>0;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>r&&U(e.path),className:`w-full flex items-center gap-2 px-3 py-2 rounded-md hover:bg-accent transition-colors ${0===s?"font-medium":""}`,style:{paddingLeft:`${1.5*s+.75}rem`},disabled:!r,children:[r?a?(0,t.jsx)(m.Z,{className:"h-4 w-4 flex-shrink-0"}):(0,t.jsx)(u.Z,{className:"h-4 w-4 flex-shrink-0"}):(0,t.jsx)("div",{className:"w-4"}),(0,t.jsx)(h.Z,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"}),(0,t.jsx)("span",{className:"flex-1 text-left",children:e.name}),(0,t.jsx)(l.Badge,{variant:"secondary",className:"text-xs",children:e.parameters.length})]}),a&&r&&(0,t.jsxs)("div",{className:"space-y-1",children:[e.parameters.map(e=>(0,t.jsx)("div",{className:"px-3 py-2 rounded-md border ml-6",style:{marginLeft:`${(s+1)*1.5}rem`},children:(0,t.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)(l.Badge,{className:`text-xs ${G(e.type)}`,children:e.type}),!e.writable&&(0,t.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:"Read-only"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground font-mono break-all mb-2",children:e.path}),(0,t.jsx)("div",{className:"mt-2",children:O(e)})]})})},e.path)),e.children.map(e=>H(e,s+1))]})]},e.path)},K=Z?(e=>{if(!s)return e;let a=s.toLowerCase(),t=e=>{let s=e.parameters.filter(e=>e.name.toLowerCase().includes(a)||e.path.toLowerCase().includes(a)||String(e.value).toLowerCase().includes(a)),r=e.children.map(t).filter(e=>null!==e);return s.length>0||r.length>0?{...e,parameters:s,children:r}:null};return e.map(t).filter(e=>null!==e)})(Z):[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,t.jsx)(N.default,{href:`/dashboard/devices/${e}`,children:(0,t.jsx)(x.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Device Parameters"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["TR-069 parameters for ",F?.summary?.serialNumber||e]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>L.mutate(),disabled:L.isPending,children:[(0,t.jsx)(j.Z,{className:`h-4 w-4 mr-2 ${L.isPending?"animate-spin":""}`}),"Refresh"]}),(0,t.jsx)(l.Button,{asChild:!0,children:(0,t.jsxs)(N.default,{href:`/dashboard/devices/${e}`,children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Back to Device"]})})]})]}),(0,t.jsx)(l.Card,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-900 dark:bg-blue-950/20",children:(0,t.jsx)(l.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"About TR-069 Parameters"}),(0,t.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"These parameters are defined by the TR-069 protocol standard. Only writable parameters can be modified. Changes are applied immediately to the device."})]})]})})}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"Search Parameters"}),(0,t.jsx)(l.CardDescription,{children:"Filter parameters by name, path, or value"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(l.Input,{placeholder:"Search parameters...",value:s,onChange:e=>a(e.target.value),className:"pl-10"})]})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.CardTitle,{children:"Parameter Tree"}),(0,t.jsx)(l.CardDescription,{children:K.length>0?`Showing ${K.reduce((e,s)=>e+s.parameters.length,0)} parameters`:"No parameters found"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>C(new Set(K.map(e=>e.path))),children:"Expand All"}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>C(new Set),children:"Collapse All"})]})]})}),(0,t.jsx)(l.CardContent,{children:E?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.Z,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading parameters..."})]}):0===K.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:s?"No parameters match your search":"No parameters available for this device"}):(0,t.jsx)("div",{className:"space-y-1",children:K.map(e=>H(e))})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{children:"Parameter Types"}),(0,t.jsx)(l.CardDescription,{children:"Understanding parameter types and attributes"})]}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Data Types:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(l.Badge,{className:G("string"),children:"String"}),(0,t.jsx)(l.Badge,{className:G("number"),children:"Number"}),(0,t.jsx)(l.Badge,{className:G("boolean"),children:"Boolean"}),(0,t.jsx)(l.Badge,{className:G("object"),children:"Object"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Access Control:"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsx)(l.Badge,{variant:"outline",children:"Read-only - Cannot be modified"}),(0,t.jsx)(l.Badge,{variant:"secondary",children:"Writable - Can be edited"})]})]})]})})]})]})}function k(){return(0,t.jsx)(y.eu,{permission:"devices.write",children:(0,t.jsx)(C,{})})}},75051:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/[deviceId]/parameters/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[2793,1009,6226,657,6032,4218],()=>a(39836));module.exports=t})();