(()=>{var e={};e.id=3083,e.ids=[3083],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},39834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>m,tree:()=>l}),s(43730),s(13321),s(46366),s(96560);var a=s(23191),r=s(88716),i=s(37922),n=s.n(i),o=s(95231),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l=["",{children:["dashboard",{children:["devices",{children:["presets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43730)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/presets/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],d=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/presets/page.tsx"],p="/dashboard/devices/presets/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/devices/presets/page",pathname:"/dashboard/devices/presets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},11283:(e,t,s)=>{Promise.resolve().then(s.bind(s,8778))},8778:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var a=s(10326),r=s(17577),i=s(44976),n=s(48324),o=s(17010),c=s(48723),l=s(86333),d=s(83855),p=s(88307),u=s(25880),m=s(69508),h=s(43810),x=s(98091),g=s(41291),f=s(30361),v=s(74250),j=s(20892),y=s(90434);function N(){let[e,t]=(0,r.useState)(""),[s,j]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!1),[w,b]=(0,r.useState)(null),[D,P]=(0,r.useState)({name:"",description:"",configuration:"{\n  \n}"}),S=(0,i.NL)(),{toast:q}=(0,c.useToast)(),{apiBaseUrl:T}=(0,v.L)(),E=(0,c.useConfirmDialog)(),{data:L=[],isLoading:k}=(0,n.a)({queryKey:["device-presets"],queryFn:async()=>{let e=await fetch(`${T}/api/isp/v1/admin/genieacs/presets`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch presets");return e.json()}}),F=(0,o.D)({mutationFn:async e=>{let t;try{t=JSON.parse(e.configuration)}catch(e){throw Error("Invalid JSON configuration")}let s=await fetch(`${T}/api/isp/v1/admin/genieacs/presets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,description:e.description,configuration:t})});if(!s.ok)throw Error("Failed to create preset");return s.json()},onSuccess:()=>{S.invalidateQueries({queryKey:["device-presets"]}),j(!1),_(),q({title:"Preset created successfully"})},onError:e=>{q({title:"Failed to create preset",description:e.message,variant:"destructive"})}}),O=(0,o.D)({mutationFn:async({id:e,data:t})=>{let s;try{s=JSON.parse(t.configuration)}catch(e){throw Error("Invalid JSON configuration")}let a=await fetch(`${T}/api/isp/v1/admin/genieacs/presets/${e}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,description:t.description,configuration:s})});if(!a.ok)throw Error("Failed to update preset");return a.json()},onSuccess:()=>{S.invalidateQueries({queryKey:["device-presets"]}),C(!1),b(null),_(),q({title:"Preset updated successfully"})},onError:e=>{q({title:"Failed to update preset",description:e.message,variant:"destructive"})}}),A=(0,o.D)({mutationFn:async e=>{let t=await fetch(`${T}/api/isp/v1/admin/genieacs/presets/${e}`,{method:"DELETE",credentials:"include"});if(!t.ok)throw Error("Failed to delete preset");return t.json()},onSuccess:()=>{S.invalidateQueries({queryKey:["device-presets"]}),q({title:"Preset deleted successfully"})},onError:e=>{q({title:"Failed to delete preset",description:e.message,variant:"destructive"})}}),B=(0,o.D)({mutationFn:async e=>{let t=await fetch(`${T}/api/isp/v1/admin/genieacs/presets`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:`${e.name} (Copy)`,description:e.description,configuration:e.configuration})});if(!t.ok)throw Error("Failed to duplicate preset");return t.json()},onSuccess:()=>{S.invalidateQueries({queryKey:["device-presets"]}),q({title:"Preset duplicated successfully"})},onError:e=>{q({title:"Failed to duplicate preset",description:e.message,variant:"destructive"})}}),_=()=>{P({name:"",description:"",configuration:"{\n  \n}"})},I=e=>{b(e),P({name:e.name,description:e.description,configuration:JSON.stringify(e.configuration,null,2)}),C(!0)},J=async e=>{await E({title:"Delete preset",description:`Are you sure you want to delete the preset "${e.name}"?`,confirmText:"Delete preset",variant:"destructive"})&&A.mutate(e.id)},Z=L.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())),G=e=>{P({...D,name:e.name,configuration:JSON.stringify(e.config,null,2)})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsx)(y.default,{href:"/dashboard/devices",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Configuration Presets"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage TR-069 configuration templates for devices"})]})]}),(0,a.jsxs)(c.Button,{onClick:()=>{_(),j(!0)},children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Create Preset"]})]}),(0,a.jsx)(c.Card,{children:(0,a.jsx)(c.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.Input,{placeholder:"Search presets by name or description...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]})})}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:k?(0,a.jsx)(c.Card,{className:"col-span-full",children:(0,a.jsx)(c.CardContent,{className:"py-8 text-center text-muted-foreground",children:"Loading presets..."})}):0===Z.length?(0,a.jsx)(c.Card,{className:"col-span-full",children:(0,a.jsx)(c.CardContent,{className:"py-8 text-center text-muted-foreground",children:e?"No presets match your search":"No presets created yet. Create your first preset to get started."})}):Z.map(e=>(0,a.jsxs)(c.Card,{className:"flex flex-col",children:[(0,a.jsxs)(c.CardHeader,{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)(c.Badge,{variant:"secondary",children:[e.deviceCount," devices"]})]}),(0,a.jsx)(c.CardTitle,{className:"mt-2",children:e.name}),(0,a.jsx)(c.CardDescription,{className:"line-clamp-2",children:e.description||"No description"})]}),(0,a.jsxs)(c.CardContent,{className:"flex-1 space-y-4",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsxs)("p",{children:["Updated: ",new Date(e.updatedAt).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"p-2 bg-muted rounded text-xs font-mono overflow-auto max-h-32",children:(0,a.jsx)("pre",{children:JSON.stringify(e.configuration,null,2)})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>I(e),className:"flex-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>B.mutate(e),children:(0,a.jsx)(h.Z,{className:"h-3 w-3"})}),(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>{J(e)},className:"text-destructive hover:text-destructive",children:(0,a.jsx)(x.Z,{className:"h-3 w-3"})})]})]})]},e.id))}),(0,a.jsx)(c.Dialog,{open:s,onOpenChange:j,children:(0,a.jsxs)(c.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(c.DialogHeader,{children:[(0,a.jsx)(c.DialogTitle,{children:"Create Configuration Preset"}),(0,a.jsx)(c.DialogDescription,{children:"Define a reusable configuration template for TR-069 devices"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"create-name",children:"Preset Name *"}),(0,a.jsx)(c.Input,{id:"create-name",placeholder:"e.g., Basic ONT Setup",value:D.name,onChange:e=>P({...D,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"create-description",children:"Description"}),(0,a.jsx)(c.Textarea,{id:"create-description",placeholder:"Describe what this preset does...",value:D.description,onChange:e=>P({...D,description:e.target.value}),rows:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"create-config",children:"Configuration (JSON) *"}),(0,a.jsx)(c.Textarea,{id:"create-config",placeholder:'{\\n  "parameter.path": "value"\\n}',value:D.configuration,onChange:e=>P({...D,configuration:e.target.value}),rows:12,className:"font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter TR-069 parameter paths and values in JSON format"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{children:"Load Example:"}),(0,a.jsx)("div",{className:"flex gap-2",children:[{name:"Basic ONT",config:{"InternetGatewayDevice.ManagementServer.PeriodicInformInterval":300,"InternetGatewayDevice.WANDevice.1.WANConnectionDevice.1.WANIPConnection.1.Enable":1}},{name:"WiFi Router",config:{"InternetGatewayDevice.LANDevice.1.WLANConfiguration.1.Enable":1,"InternetGatewayDevice.LANDevice.1.WLANConfiguration.1.SSID":"MyNetwork","InternetGatewayDevice.LANDevice.1.WLANConfiguration.1.BeaconType":"WPA2"}}].map(e=>(0,a.jsx)(c.Button,{variant:"outline",size:"sm",onClick:()=>G(e),children:e.name},e.name))})]}),(0,a.jsx)(c.Card,{className:"border-blue-200 bg-blue-50/50 dark:border-blue-900 dark:bg-blue-950/20",children:(0,a.jsx)(c.CardContent,{className:"pt-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Configuration Tips:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"Use full TR-069 parameter paths"}),(0,a.jsx)("li",{children:"Values can be strings, numbers, or booleans"}),(0,a.jsx)("li",{children:"Configuration is validated on save"})]})]})]})})}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),(0,a.jsxs)(c.Button,{onClick:()=>{if(!D.name.trim()){q({title:"Validation error",description:"Preset name is required",variant:"destructive"});return}F.mutate(D)},disabled:F.isPending,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Create Preset"]})]})]})]})}),(0,a.jsx)(c.Dialog,{open:N,onOpenChange:C,children:(0,a.jsxs)(c.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(c.DialogHeader,{children:[(0,a.jsx)(c.DialogTitle,{children:"Edit Configuration Preset"}),(0,a.jsx)(c.DialogDescription,{children:"Modify the configuration template"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"edit-name",children:"Preset Name *"}),(0,a.jsx)(c.Input,{id:"edit-name",placeholder:"e.g., Basic ONT Setup",value:D.name,onChange:e=>P({...D,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"edit-description",children:"Description"}),(0,a.jsx)(c.Textarea,{id:"edit-description",placeholder:"Describe what this preset does...",value:D.description,onChange:e=>P({...D,description:e.target.value}),rows:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"edit-config",children:"Configuration (JSON) *"}),(0,a.jsx)(c.Textarea,{id:"edit-config",placeholder:'{\\n  "parameter.path": "value"\\n}',value:D.configuration,onChange:e=>P({...D,configuration:e.target.value}),rows:12,className:"font-mono text-sm"})]}),w&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,a.jsxs)("p",{children:["Currently applied to ",w.deviceCount," devices"]}),(0,a.jsx)("p",{className:"text-amber-600 dark:text-amber-400 mt-1",children:"Note: Changes will not affect already provisioned devices"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)(c.Button,{variant:"outline",onClick:()=>{C(!1),b(null),_()},children:"Cancel"}),(0,a.jsxs)(c.Button,{onClick:()=>{if(!w||!D.name.trim()){q({title:"Validation error",description:"Preset name is required",variant:"destructive"});return}O.mutate({id:w.id,data:D})},disabled:O.isPending,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})]})}function C(){return(0,a.jsx)(j.eu,{permission:"devices.write",children:(0,a.jsx)(N,{})})}},43730:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/devices/presets/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2793,1009,6226,657,6032,4218],()=>s(39834));module.exports=a})();