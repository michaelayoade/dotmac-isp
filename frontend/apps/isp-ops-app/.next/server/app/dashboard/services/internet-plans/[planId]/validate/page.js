(()=>{var e={};e.id=4974,e.ids=[4974],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},12288:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>c}),t(64917),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),l=t(37922),d=t.n(l),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["services",{children:["internet-plans",{children:["[planId]",{children:["validate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,64917)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/services/internet-plans/[planId]/validate/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/services/internet-plans/[planId]/validate/page.tsx"],m="/dashboard/services/internet-plans/[planId]/validate/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/services/internet-plans/[planId]/validate/page",pathname:"/dashboard/services/internet-plans/[planId]/validate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},30684:(e,s,t)=>{Promise.resolve().then(t.bind(t,76453))},76453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(10326),r=t(17577),l=t(35047),d=t(48723),i=t(86333),n=t(76464),c=t(50949),o=t(30361),m=t(12303),x=t(48998),p=t(94893),u=t(41291),h=t(66697),g=t(71821),j=t(17069),b=t(29163),N=t(47277);function f(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),t=e.planId,{data:f,isLoading:_}=(0,N.mN)(t),{mutate:w,isPending:P}=(0,N.Fi)(),[B,F]=(0,r.useState)(null),[G,U]=(0,r.useState)({usageScenario:"moderate",downloadGB:300,uploadGB:50,durationHours:720,concurrentUsers:3}),S={light:{downloadGB:100,uploadGB:10,concurrentUsers:1,description:"Light usage: Email, browsing, social media"},moderate:{downloadGB:300,uploadGB:50,concurrentUsers:3,description:"Moderate usage: Streaming HD, video calls, gaming"},heavy:{downloadGB:800,uploadGB:150,concurrentUsers:5,description:"Heavy usage: 4K streaming, large downloads, multiple devices"},custom:{downloadGB:2e3,uploadGB:500,concurrentUsers:10,description:"Extreme usage: Multiple 4K streams, gaming, work from home"}},C=(0,r.useMemo)(()=>{if(!f||!f.has_fup||!f.fup_threshold)return null;let e=G.downloadGB+G.uploadGB,s="TB"===f.fup_threshold_unit?1024*Number(f.fup_threshold):"MB"===f.fup_threshold_unit?Number(f.fup_threshold)/1024:Number(f.fup_threshold),t=s/e*(G.durationHours/24);return{fupThresholdGB:s,totalUsageGB:e,fupTriggerPercentage:Math.min(s/e*100,100),daysUntilFup:t,willTriggerFup:e>s,normalSpeed:f.download_speed,throttledSpeed:f.fup_throttle_speed||0}},[f,G]),T=(0,r.useMemo)(()=>{if(!f||!f.has_data_cap||!f.data_cap_amount)return null;let e=G.downloadGB+G.uploadGB,s="TB"===f.data_cap_unit?1024*Number(f.data_cap_amount):"MB"===f.data_cap_unit?Number(f.data_cap_amount)/1024:Number(f.data_cap_amount),t=Math.max(e-s,0),a=f.overage_price_per_unit?t*Number(f.overage_price_per_unit):0;return{dataCapGB:s,totalUsageGB:e,capTriggerPercentage:Math.min(s/e*100,100),overageGB:t,overageCost:a,willExceedCap:e>s}},[f,G]),q=e=>{let s=S[e];U({usageScenario:e,downloadGB:s.downloadGB,uploadGB:s.uploadGB,durationHours:720,concurrentUsers:s.concurrentUsers})};return _?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading plan..."})}):f?(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(d.Button,{variant:"ghost",onClick:()=>s.back(),children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Plan Validation & Testing"}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Test ",f.name," configuration and simulate usage scenarios with visual FUP analysis"]})]})]}),(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Plan Overview"}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Plan Code"}),(0,a.jsx)("p",{className:"font-semibold",children:f.plan_code})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Download Speed"}),(0,a.jsxs)("p",{className:"font-semibold",children:[f.download_speed," ",f.speed_unit]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload Speed"}),(0,a.jsxs)("p",{className:"font-semibold",children:[f.upload_speed," ",f.speed_unit]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Monthly Price"}),(0,a.jsxs)("p",{className:"font-semibold",children:[f.currency," ",f.monthly_price.toFixed(2)]})]})]}),(f.has_fup||f.has_data_cap)&&(0,a.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[f.has_fup&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-blue-700 mb-1",children:"Fair Usage Policy"}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-bold",children:[f.fup_threshold," ",f.fup_threshold_unit]})," → ",(0,a.jsxs)("span",{className:"text-orange-600",children:["throttles to ",f.fup_throttle_speed," ",f.speed_unit]})]})]}),f.has_data_cap&&(0,a.jsxs)("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-purple-700 mb-1",children:"Data Cap"}),(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsxs)("span",{className:"font-bold",children:[f.data_cap_amount," ",f.data_cap_unit]})," → ",(0,a.jsx)("span",{className:"text-red-600",children:f.throttle_policy.replace(/_/g," ")})]})]})]})]}),C&&(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"h-6 w-6 text-blue-500"}),"FUP Trigger Timeline"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative h-24 bg-gray-100 rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 bg-green-500 flex items-center justify-center",style:{width:`${C.fupTriggerPercentage}%`},children:(0,a.jsxs)("span",{className:"text-white text-sm font-bold",children:[C.normalSpeed," Mbps (Full Speed)"]})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 bg-orange-500 flex items-center justify-center",style:{width:`${100-C.fupTriggerPercentage}%`},children:C.willTriggerFup&&(0,a.jsxs)("span",{className:"text-white text-sm font-bold",children:[C.throttledSpeed," Mbps (Throttled)"]})}),(0,a.jsx)("div",{className:"absolute inset-y-0 w-1 bg-red-600 z-10",style:{left:`${C.fupTriggerPercentage}%`},children:(0,a.jsx)("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"bg-red-600 text-white px-2 py-1 rounded text-xs font-bold",children:["FUP Trigger: ",C.fupThresholdGB.toFixed(0)," GB"]})})})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,a.jsx)("span",{children:"0 GB (Day 1)"}),(0,a.jsxs)("span",{children:[C.fupThresholdGB.toFixed(0)," GB (Day"," ",C.daysUntilFup.toFixed(1),")"]}),(0,a.jsxs)("span",{children:[C.totalUsageGB," GB (Day"," ",(G.durationHours/24).toFixed(0),")"]})]}),(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Days at Full Speed"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-green-600",children:[C.daysUntilFup.toFixed(1)," days"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Days Throttled"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-orange-600",children:[C.willTriggerFup?(G.durationHours/24-C.daysUntilFup).toFixed(1):"0"," ","days"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Speed Reduction"}),(0,a.jsx)("p",{className:"text-lg font-bold text-red-600",children:C.willTriggerFup?`${((C.normalSpeed-C.throttledSpeed)/C.normalSpeed*100).toFixed(0)}%`:"N/A"})]})]}),C.willTriggerFup?(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-yellow-700",children:"FUP will trigger under this usage scenario"}),(0,a.jsxs)("p",{className:"text-yellow-600",children:["Users will experience throttled speeds (",C.throttledSpeed," Mbps) for approximately"," ",(G.durationHours/24-C.daysUntilFup).toFixed(1)," ","days"]})]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("p",{className:"text-sm font-medium text-green-700",children:"FUP threshold not reached - users maintain full speed throughout the period"})]})]})]}),T&&(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-6 w-6 text-purple-500"}),"Data Cap Analysis"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Usage Progress"}),(0,a.jsxs)("span",{className:"font-bold",children:[T.totalUsageGB.toFixed(0)," / ",T.dataCapGB.toFixed(0)," ","GB"]})]}),(0,a.jsx)("div",{className:"relative h-8 bg-gray-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:`absolute inset-y-0 left-0 ${T.willExceedCap?"bg-red-500":"bg-blue-500"} transition-all duration-500 flex items-center justify-end pr-2`,style:{width:`${Math.min(T.capTriggerPercentage,100)}%`},children:(0,a.jsxs)("span",{className:"text-white text-xs font-bold",children:[Math.min(T.capTriggerPercentage,100).toFixed(0),"%"]})})})]}),T.willExceedCap&&(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Overage Amount"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-red-600",children:[T.overageGB.toFixed(1)," GB"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Overage Cost"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-red-600",children:[f.currency," ",T.overageCost.toFixed(2)]})]})]})]})]}),f.has_time_restrictions&&(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,a.jsx)(x.Z,{className:"h-6 w-6 text-indigo-500"}),"Time-Based Restrictions"]}),(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsxs)("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Unrestricted Period:"})," ",f.unrestricted_start_time," - ",f.unrestricted_end_time]}),f.unrestricted_data_unlimited&&(0,a.jsx)("p",{className:"text-sm mt-1 text-indigo-700",children:"✓ Unlimited data during unrestricted hours"}),f.unrestricted_speed_multiplier&&(0,a.jsxs)("p",{className:"text-sm mt-1 text-indigo-700",children:["✓ Speed boost: ",f.unrestricted_speed_multiplier,"x (",(f.download_speed*Number(f.unrestricted_speed_multiplier)).toFixed(0)," ","Mbps)"]})]})})]}),(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Usage Simulation Configuration"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Usage Scenario"}),(0,a.jsx)("div",{className:"grid gap-3 md:grid-cols-4",children:Object.keys(S).map(e=>(0,a.jsxs)("button",{onClick:()=>q(e),className:`p-4 border rounded-lg text-left transition-colors ${G.usageScenario===e?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-300"}`,children:[(0,a.jsx)("p",{className:"font-semibold capitalize",children:e}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:S[e].description}),(0,a.jsxs)("div",{className:"mt-2 text-xs",children:[(0,a.jsxs)("p",{children:["↓ ",S[e].downloadGB," GB"]}),(0,a.jsxs)("p",{children:["↑ ",S[e].uploadGB," GB"]}),(0,a.jsxs)("p",{children:["\uD83D\uDC65 ",S[e].concurrentUsers," users"]})]})]},e))})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Download Usage (GB)"}),(0,a.jsx)("input",{type:"number",value:G.downloadGB,onChange:e=>U(s=>({...s,usageScenario:"custom",downloadGB:Number(e.target.value)})),className:"w-full border rounded-md px-3 py-2",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Upload Usage (GB)"}),(0,a.jsx)("input",{type:"number",value:G.uploadGB,onChange:e=>U(s=>({...s,usageScenario:"custom",uploadGB:Number(e.target.value)})),className:"w-full border rounded-md px-3 py-2",min:"0"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Duration (Hours)"}),(0,a.jsx)("input",{type:"number",value:G.durationHours,onChange:e=>U(s=>({...s,durationHours:Number(e.target.value)})),className:"w-full border rounded-md px-3 py-2",min:"1",max:"720"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(G.durationHours/24).toFixed(1)," days"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Concurrent Users"}),(0,a.jsx)("input",{type:"number",value:G.concurrentUsers,onChange:e=>U(s=>({...s,concurrentUsers:Number(e.target.value)})),className:"w-full border rounded-md px-3 py-2",min:"1",max:"100"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(d.Button,{onClick:()=>{w({planId:t,request:{test_download_usage_gb:G.downloadGB,test_upload_usage_gb:G.uploadGB,test_duration_hours:G.durationHours,test_concurrent_users:G.concurrentUsers,validate_speeds:!0,validate_data_caps:!0,validate_pricing:!0,validate_time_restrictions:!0,validate_qos:!0}},{onSuccess:e=>{F(e)}})},disabled:P,className:"w-full",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),P?"Running Validation...":"Run Validation Tests"]})})]}),B&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Validation Results"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Validated at ",new Date(B.validated_at).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(v,{status:B.overall_status}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[B.passed_checks," / ",B.total_checks," checks passed"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-green-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:B.passed_checks}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Passed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(u.Z,{className:"h-8 w-8 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:B.failed_checks}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 text-yellow-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:B.warning_checks}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Warnings"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-blue-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:B.total_checks}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total"})]})]})]})]}),(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Usage Simulation Results"}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),"Cost Estimates"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm",children:"Monthly Price"}),(0,a.jsxs)("span",{className:"font-bold",children:[f.currency," ",B.estimated_monthly_cost.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"text-sm",children:"Overage Charges"}),(0,a.jsxs)("span",{className:`font-bold ${B.estimated_overage_cost>0?"text-red-500":""}`,children:[f.currency," ",B.estimated_overage_cost.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded border-2 border-blue-200",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total Estimated Cost"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:[f.currency," ",(B.estimated_monthly_cost+B.estimated_overage_cost).toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5"}),"Performance Metrics"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),"Peak Download Speed"]}),(0,a.jsxs)("span",{className:"font-bold",children:[B.peak_download_speed_mbps.toFixed(2)," Mbps"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Average Download Speed"]}),(0,a.jsxs)("span",{className:"font-semibold",children:[B.average_download_speed_mbps.toFixed(2)," Mbps"]})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),"Peak Upload Speed"]}),(0,a.jsxs)("span",{className:"font-bold",children:[B.peak_upload_speed_mbps.toFixed(2)," Mbps"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"Average Upload Speed"]}),(0,a.jsxs)("span",{className:"font-semibold",children:[B.average_upload_speed_mbps.toFixed(2)," Mbps"]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-2",children:[B.data_cap_exceeded&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-red-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-red-700",children:"Data cap would be exceeded under this usage scenario"})]}),B.throttling_triggered&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-yellow-700",children:"Throttling would be triggered under this usage scenario"})]}),!B.data_cap_exceeded&&!B.throttling_triggered&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-500"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Plan performs well under this usage scenario"})]})]})]}),(0,a.jsxs)(d.Card,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Detailed Validation Checks"}),(0,a.jsx)("div",{className:"space-y-2",children:B.results.map((e,s)=>(0,a.jsx)(y,{result:e},s))})]})]})]}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(d.Card,{className:"p-6",children:(0,a.jsx)("p",{className:"text-red-500",children:"Plan not found"})})})}function v({status:e}){let s={passed:o.Z,failed:u.Z,warning:c.Z}[e]||h.Z;return(0,a.jsxs)(d.Badge,{className:`${{passed:"bg-green-100 text-green-800 border-green-300",failed:"bg-red-100 text-red-800 border-red-300",warning:"bg-yellow-100 text-yellow-800 border-yellow-300"}[e]||"bg-gray-100 text-gray-800"} border px-4 py-2 text-lg font-semibold`,children:[(0,a.jsx)(s,{className:"mr-2 h-5 w-5"}),e.toUpperCase()]})}function y({result:e}){return(0,a.jsxs)("div",{className:`flex items-start gap-3 p-3 border rounded ${(e=>{switch(e){case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"info":return"border-green-200 bg-green-50";default:return"border-gray-200 bg-gray-50"}})(e.severity)}`,children:[(0,a.jsx)("div",{className:"mt-0.5",children:(e=>{switch(e){case"error":return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-red-500"});case"warning":return(0,a.jsx)(c.Z,{className:"h-5 w-5 text-yellow-500"});case"info":return(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-500"});default:return(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-500"})}})(e.severity)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:e.check_name.replace(/_/g," ")}),(0,a.jsx)(d.Badge,{variant:e.passed?"default":"destructive",className:"text-xs",children:e.passed?"PASS":"FAIL"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.message}),Object.keys(e.details).length>0&&(0,a.jsx)("div",{className:"mt-2 text-xs font-mono bg-white p-2 rounded border",children:JSON.stringify(e.details,null,2)})]})]})}},47277:(e,s,t)=>{"use strict";t.d(s,{E3:()=>m,FI:()=>o,Fi:()=>x,mN:()=>c});var a=t(48324),r=t(44976),l=t(17010),d=t(59341);let i="/services/internet-plans",n={all:["internet-plans"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),e],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],byCode:e=>[...n.all,"code",e],statistics:e=>[...n.all,"statistics",e],subscriptions:{all:["plan-subscriptions"],lists:()=>[...n.subscriptions.all,"list"],list:e=>[...n.subscriptions.lists(),e],detail:e=>[...n.subscriptions.all,"detail",e],byPlan:e=>[...n.subscriptions.all,"by-plan",e],byCustomer:e=>[...n.subscriptions.all,"by-customer",e]}};function c(e){return(0,a.a)({queryKey:n.detail(e),queryFn:async()=>(await d.x1.get(`${i}/${e}`)).data,enabled:!!e,staleTime:6e4})}function o(){let e=(0,r.NL)();return(0,l.D)({mutationFn:async e=>(await d.x1.post(i,e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:n.lists()})}})}function m(){let e=(0,r.NL)();return(0,l.D)({mutationFn:async({planId:e,data:s})=>(await d.x1.patch(`${i}/${e}`,s)).data,onSuccess:(s,t)=>{e.invalidateQueries({queryKey:n.detail(t.planId)}),e.invalidateQueries({queryKey:n.lists()})}})}function x(){let e=(0,r.NL)();return(0,l.D)({mutationFn:async({planId:e,request:s})=>(await d.x1.post(`${i}/${e}/validate`,s)).data,onSuccess:(s,t)=>{e.invalidateQueries({queryKey:n.detail(t.planId)})}})}},64917:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/services/internet-plans/[planId]/validate/page.tsx#default`)}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(12288));module.exports=a})();