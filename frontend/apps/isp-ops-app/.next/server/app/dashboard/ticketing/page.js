(()=>{var e={};e.id=8451,e.ids=[8451],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},14314:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>c}),t(69847),t(13321),t(46366),t(96560);var r=t(23191),a=t(88716),l=t(37922),i=t.n(l),n=t(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["dashboard",{children:["ticketing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,69847)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ticketing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],o=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ticketing/page.tsx"],x="/dashboard/ticketing/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/ticketing/page",pathname:"/dashboard/ticketing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},98988:(e,s,t)=>{Promise.resolve().then(t.bind(t,59558))},59558:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var r=t(10326),a=t(17577),l=t(44976),i=t(48324),n=t(48723),d=t(41291),c=t(3240),o=t(48998),x=t(30361),m=t(69669),u=t(21405),p=t(83855),h=t(21985),g=t(88307),j=t(12714),f=t(40617),N=t(93158),b=t(20892),v=t(90434),C=t(90960);function w(){let[e,s]=(0,a.useState)(""),[t,b]=(0,a.useState)("all"),[w,y]=(0,a.useState)("all");(0,l.NL)();let{toast:k}=(0,n.useToast)(),{api:_}=(0,N.M)(),S=_.baseUrl,{data:P,isLoading:q,refetch:Z}=(0,i.a)({queryKey:["tickets",S,t,w,e],queryFn:async()=>{let s=new URLSearchParams;"all"!==t&&s.append("status",t),"all"!==w&&s.append("priority",w),e&&s.append("search",e);let r=await fetch(`${S}/api/v1/tickets?${s.toString()}`,{credentials:"include"});if(!r.ok)throw Error("Failed to fetch tickets");return r.json()}}),T=P?.tickets||[];P?.total;let{data:I}=(0,i.a)({queryKey:["ticket-stats",S],queryFn:async()=>{let e=await fetch(`${S}/api/v1/tickets/stats`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch stats");return e.json()}}),A=I||{total_tickets:T.length,open_tickets:T.filter(e=>"open"===e.status).length,in_progress_tickets:T.filter(e=>"in_progress"===e.status).length,waiting_tickets:T.filter(e=>"waiting"===e.status).length,resolved_tickets:T.filter(e=>"resolved"===e.status).length,closed_tickets:T.filter(e=>"closed"===e.status).length},L=T.filter(s=>!e||s.ticket_number.toLowerCase().includes(e.toLowerCase())||s.subject.toLowerCase().includes(e.toLowerCase())||s.customer_email&&s.customer_email.toLowerCase().includes(e.toLowerCase())||s.customer_name&&s.customer_name.toLowerCase().includes(e.toLowerCase())),U=e=>{let s={open:{icon:d.Z,color:"bg-blue-100 text-blue-800",label:"Open"},in_progress:{icon:c.Z,color:"bg-yellow-100 text-yellow-800",label:"In Progress"},waiting:{icon:o.Z,color:"bg-orange-100 text-orange-800",label:"Waiting"},resolved:{icon:x.Z,color:"bg-green-100 text-green-800",label:"Resolved"},closed:{icon:m.Z,color:"bg-gray-100 text-gray-800",label:"Closed"}},t=s[e]||s.open,a=t.icon;return(0,r.jsxs)(n.Badge,{className:t.color,children:[(0,r.jsx)(a,{className:"h-3 w-3 mr-1"}),t.label]})},D=e=>(0,r.jsx)(n.Badge,{className:{low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800",children:e.toUpperCase()});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Support Tickets"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage customer support tickets and requests"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(n.Button,{variant:"outline",onClick:()=>Z(),children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,r.jsxs)(n.Button,{children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"New Ticket"]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-6",children:[(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Total Tickets"}),(0,r.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.total_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"All tickets"})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Open"}),(0,r.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.open_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"New tickets"})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"In Progress"}),(0,r.jsx)(c.Z,{className:"h-4 w-4 text-yellow-600"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.in_progress_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Waiting"}),(0,r.jsx)(o.Z,{className:"h-4 w-4 text-orange-600"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.waiting_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Resolved"}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-green-600"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.resolved_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Fixed"})]})]}),(0,r.jsxs)(n.Card,{children:[(0,r.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,r.jsx)(n.CardTitle,{className:"text-sm font-medium",children:"Closed"}),(0,r.jsx)(m.Z,{className:"h-4 w-4 text-gray-600"})]}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A.closed_tickets}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Completed"})]})]})]}),(0,r.jsx)(n.Card,{children:(0,r.jsx)(n.CardContent,{className:"pt-6",children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(g.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(n.Input,{placeholder:"Search tickets...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(0,r.jsxs)(n.Select,{value:t,onValueChange:b,children:[(0,r.jsx)(n.SelectTrigger,{children:(0,r.jsx)(n.SelectValue,{placeholder:"All Status"})}),(0,r.jsxs)(n.SelectContent,{children:[(0,r.jsx)(n.SelectItem,{value:"all",children:"All Status"}),(0,r.jsx)(n.SelectItem,{value:"open",children:"Open"}),(0,r.jsx)(n.SelectItem,{value:"in_progress",children:"In Progress"}),(0,r.jsx)(n.SelectItem,{value:"waiting",children:"Waiting"}),(0,r.jsx)(n.SelectItem,{value:"resolved",children:"Resolved"}),(0,r.jsx)(n.SelectItem,{value:"closed",children:"Closed"})]})]}),(0,r.jsxs)(n.Select,{value:w,onValueChange:y,children:[(0,r.jsx)(n.SelectTrigger,{children:(0,r.jsx)(n.SelectValue,{placeholder:"All Priorities"})}),(0,r.jsxs)(n.SelectContent,{children:[(0,r.jsx)(n.SelectItem,{value:"all",children:"All Priorities"}),(0,r.jsx)(n.SelectItem,{value:"low",children:"Low"}),(0,r.jsx)(n.SelectItem,{value:"medium",children:"Medium"}),(0,r.jsx)(n.SelectItem,{value:"high",children:"High"}),(0,r.jsx)(n.SelectItem,{value:"urgent",children:"Urgent"})]})]})]})})}),(0,r.jsx)("div",{className:"grid gap-4",children:q?(0,r.jsx)(n.Card,{children:(0,r.jsx)(n.CardContent,{className:"py-8 text-center text-muted-foreground",children:"Loading tickets..."})}):0===L.length?(0,r.jsx)(n.Card,{children:(0,r.jsx)(n.CardContent,{className:"py-8 text-center text-muted-foreground",children:e?"No tickets match your search":"No tickets found"})}):L.map(e=>(0,r.jsxs)(n.Card,{className:"hover:border-primary transition-colors",children:[(0,r.jsx)(n.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h.Z,{className:"h-8 w-8 text-primary"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(n.CardTitle,{className:"text-lg",children:(0,r.jsx)(v.default,{href:`/dashboard/ticketing/${e.id}`,className:"hover:underline font-mono",children:e.ticket_number})}),(0,r.jsx)(n.CardDescription,{className:"mt-1",children:e.subject})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[U(e.status),D(e.priority)]})]})}),(0,r.jsxs)(n.CardContent,{children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Customer"}),(0,r.jsx)("p",{className:"font-medium truncate",children:e.customer_name||e.customer_email||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Category"}),(0,r.jsx)("p",{className:"font-medium",children:e.category||"General"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assigned To"}),(0,r.jsx)("p",{className:"font-medium",children:e.assigned_to||"Unassigned"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Updated"}),(0,r.jsx)("p",{className:"font-medium",children:(0,C.Q)(new Date(e.updated_at),{addSuffix:!0})})]})]}),e.tags&&e.tags.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-3",children:e.tags.map((e,s)=>(0,r.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e},s))}),(0,r.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t",children:[(0,r.jsx)(n.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(v.default,{href:`/dashboard/ticketing/${e.id}`,children:[(0,r.jsx)(j.Z,{className:"h-3 w-3 mr-1"}),"View Details"]})}),void 0!==e.message_count&&(0,r.jsx)(n.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(v.default,{href:`/dashboard/ticketing/${e.id}#messages`,children:[(0,r.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),e.message_count," ",1===e.message_count?"Message":"Messages"]})})]})]})]},e.id))})]})}function y(){return(0,r.jsx)(b.eu,{permission:"tickets:read",children:(0,r.jsx)(w,{})})}},69847:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/ticketing/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(14314));module.exports=r})();