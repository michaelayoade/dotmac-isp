(()=>{var e={};e.id=6150,e.ids=[6150],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},26374:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(82523),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),o=t.n(i),l=t(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);t.d(s,n);let d=["",{children:["dashboard",{children:["automation",{children:["playbooks",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,82523)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/page.tsx"],x="/dashboard/automation/playbooks/[id]/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/automation/playbooks/[id]/page",pathname:"/dashboard/automation/playbooks/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},71944:(e,s,t)=>{Promise.resolve().then(t.bind(t,75625))},75625:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>P});var a=t(10326),r=t(17577),i=t(44976),o=t(48324),l=t(48723),n=t(20892),d=t(36607),c=t(30361),x=t(69669),p=t(66697),m=t(48998),u=t(86333),h=t(21405),j=t(69508),b=t(94893),f=t(18019),g=t(25880),y=t(48705),v=t(90960),N=t(90434),w=t(35047);function k(){let e=(0,w.useParams)();(0,w.useRouter)();let s=e?.id,{toast:t}=(0,l.useToast)(),n=(0,i.NL)(),[k,P]=(0,r.useState)(!1),{data:T,isLoading:C}=(0,o.a)({queryKey:["ansible","job-template",s],queryFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/job-templates/${s}`,{credentials:"include"});if(!e.ok){if(404===e.status)throw Error("Playbook template not found");throw Error("Failed to fetch playbook template")}return e.json()},enabled:!!s}),{data:q=[]}=(0,o.a)({queryKey:["ansible","jobs","template",s],queryFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/jobs?template_id=${s}&limit=10`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch recent jobs");return e.json()},enabled:!!s}),D=e=>{let s={successful:{variant:"outline",color:"text-green-600",icon:c.Z},failed:{variant:"destructive",color:"text-red-600",icon:x.Z},running:{variant:"default",color:"text-blue-600",icon:p.Z},pending:{variant:"secondary",color:"text-yellow-600",icon:m.Z},canceled:{variant:"secondary",color:"text-gray-600",icon:x.Z}},t=s[e]||s.pending,r=t.icon;return(0,a.jsxs)(l.Badge,{variant:t.variant,className:t.color,children:[(0,a.jsx)(r,{className:"h-3 w-3 mr-1"}),e]})},Z=e=>{if(!e)return"-";let s=Math.floor(e/60),t=e%60;return s>0?`${s}m ${t}s`:`${t}s`};return C?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(p.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):T?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.Button,{variant:"outline",size:"icon",asChild:!0,children:(0,a.jsx)(N.default,{href:"/dashboard/automation/playbooks",children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:T.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playbook template configuration"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>{n.invalidateQueries({queryKey:["ansible","job-template",s]}),n.invalidateQueries({queryKey:["ansible","jobs","template",s]}),t({title:"Refreshed",description:"Playbook data has been refreshed"})},children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),(0,a.jsxs)(l.Button,{onClick:()=>P(!0),variant:"outline",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsx)(l.Button,{asChild:!0,children:(0,a.jsxs)(N.default,{href:`/dashboard/automation/playbooks/${s}/run`,children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Launch Playbook"]})})]})]}),(0,a.jsxs)(l.Tabs,{defaultValue:"overview",className:"space-y-4",children:[(0,a.jsxs)(l.TabsList,{children:[(0,a.jsx)(l.TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(l.TabsTrigger,{value:"history",children:"Execution History"})]}),(0,a.jsx)(l.TabsContent,{value:"overview",className:"space-y-4",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsx)(l.CardHeader,{children:(0,a.jsx)(l.CardTitle,{className:"text-lg",children:"Template Information"})}),(0,a.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Name"})]}),(0,a.jsx)("p",{className:"font-medium",children:T.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Job Type"})]}),(0,a.jsx)("p",{className:"font-medium capitalize",children:T.job_type||"-"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Description"})]}),(0,a.jsx)("p",{className:"text-sm",children:T.description||(0,a.jsx)("span",{className:"text-muted-foreground",children:"No description provided"})})]}),(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Playbook Path"})]}),(0,a.jsx)("p",{className:"text-sm font-mono bg-accent p-2 rounded",children:T.playbook||"-"})]}),(0,a.jsxs)("div",{className:"pt-4 border-t grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Inventory ID"})]}),(0,a.jsx)("p",{className:"font-mono text-sm",children:T.inventory||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Project ID"})]}),(0,a.jsx)("p",{className:"font-mono text-sm",children:T.project||"-"})]})]})]})]})}),(0,a.jsx)(l.TabsContent,{value:"history",className:"space-y-4",children:(0,a.jsxs)(l.Card,{children:[(0,a.jsxs)(l.CardHeader,{children:[(0,a.jsx)(l.CardTitle,{children:"Recent Executions"}),(0,a.jsx)(l.CardDescription,{children:"Last 10 job executions for this playbook"})]}),(0,a.jsx)(l.CardContent,{children:0===q.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No executions found for this playbook"})]}):(0,a.jsxs)(l.Table,{children:[(0,a.jsx)(l.TableHeader,{children:(0,a.jsxs)(l.TableRow,{children:[(0,a.jsx)(l.TableHead,{children:"Job ID"}),(0,a.jsx)(l.TableHead,{children:"Name"}),(0,a.jsx)(l.TableHead,{children:"Status"}),(0,a.jsx)(l.TableHead,{children:"Started"}),(0,a.jsx)(l.TableHead,{children:"Duration"}),(0,a.jsx)(l.TableHead,{children:"Actions"})]})}),(0,a.jsx)(l.TableBody,{children:q.map(e=>(0,a.jsxs)(l.TableRow,{children:[(0,a.jsx)(l.TableCell,{className:"font-mono text-sm",children:e.id}),(0,a.jsx)(l.TableCell,{children:e.name}),(0,a.jsx)(l.TableCell,{children:D(e.status)}),(0,a.jsx)(l.TableCell,{children:e.started?(0,a.jsx)("div",{className:"text-sm",children:(0,v.Q)(new Date(e.started),{addSuffix:!0})}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(l.TableCell,{children:Z(e.elapsed)}),(0,a.jsx)(l.TableCell,{children:(0,a.jsx)(l.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(N.default,{href:`/dashboard/automation/jobs/${e.id}`,children:"View"})})})]},e.id))})]})})]})})]}),(0,a.jsx)(l.Dialog,{open:k,onOpenChange:P,children:(0,a.jsxs)(l.DialogContent,{children:[(0,a.jsxs)(l.DialogHeader,{children:[(0,a.jsx)(l.DialogTitle,{children:"Coming Soon"}),(0,a.jsx)(l.DialogDescription,{children:"Playbook editing through the UI is coming soon. For now, please edit playbooks directly via the AWX interface."})]}),(0,a.jsx)(l.Button,{onClick:()=>P(!1),children:"Got it"})]})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-96",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Playbook Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The playbook template you're looking for doesn't exist."}),(0,a.jsx)(l.Button,{asChild:!0,children:(0,a.jsxs)(N.default,{href:"/dashboard/automation/playbooks",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Playbooks"]})})]})}function P(){return(0,a.jsx)(n.eu,{permission:"isp.automation.read",children:(0,a.jsx)(k,{})})}},82523:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(26374));module.exports=a})();