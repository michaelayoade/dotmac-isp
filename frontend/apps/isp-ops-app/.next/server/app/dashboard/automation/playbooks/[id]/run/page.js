(()=>{var e={};e.id=9515,e.ids=[9515],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},56922:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(96957),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),i=t(37922),o=t.n(i),n=t(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["automation",{children:["playbooks",{children:["[id]",{children:["run",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,96957)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/run/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/run/page.tsx"],p="/dashboard/automation/playbooks/[id]/run/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/automation/playbooks/[id]/run/page",pathname:"/dashboard/automation/playbooks/[id]/run",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19364:(e,s,t)=>{Promise.resolve().then(t.bind(t,51232))},51232:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(10326),r=t(17577),i=t(48324),o=t(17010),n=t(48723),l=t(20892),d=t(36607),c=t(66697),p=t(69669),u=t(86333),m=t(41291),x=t(18019),h=t(94893),b=t(90434),j=t(35047);function f(){let e=(0,j.useParams)(),s=(0,j.useRouter)(),t=e?.id,{toast:l}=(0,n.useToast)(),[f,g]=(0,r.useState)("{}"),[y,v]=(0,r.useState)(null),{data:N,isLoading:P}=(0,i.a)({queryKey:["ansible","job-template",t],queryFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/job-templates/${t}`,{credentials:"include"});if(!e.ok){if(404===e.status)throw Error("Playbook template not found");throw Error("Failed to fetch playbook template")}return e.json()},enabled:!!t}),k=(0,o.D)({mutationFn:async e=>{let s=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/jobs/launch`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"Failed to launch job"}))).detail||"Failed to launch job");return s.json()},onSuccess:e=>{l({title:"Success",description:"Job launched successfully"}),s.push(`/dashboard/automation/jobs/${e.id}`)},onError:e=>{l({title:"Error",description:e.message,variant:"destructive"})}}),w=e=>{if(g(e),""===e.trim()){v(null);return}try{JSON.parse(e),v(null)}catch(e){v("Invalid JSON format")}};return P?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):N?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(n.Button,{variant:"outline",size:"icon",asChild:!0,children:(0,a.jsx)(b.default,{href:`/dashboard/automation/playbooks/${t}`,children:(0,a.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Launch Playbook"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:N.name})]})]})}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsx)(n.CardTitle,{className:"text-lg",children:"Playbook Information"})}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Name"}),(0,a.jsx)("span",{className:"text-sm",children:N.name})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Playbook Path"}),(0,a.jsx)("span",{className:"text-sm font-mono",children:N.playbook||"-"})]}),N.description&&(0,a.jsxs)("div",{className:"p-3 bg-accent rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Description"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:N.description})]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{className:"text-lg",children:"Launch Configuration"}),(0,a.jsx)(n.CardDescription,{children:"Configure extra variables for this playbook execution (optional)"})]}),(0,a.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.Label,{htmlFor:"extra-vars",children:"Extra Variables (JSON)"}),y&&(0,a.jsxs)("span",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3"}),y]})]}),(0,a.jsx)(n.Textarea,{id:"extra-vars",value:f,onChange:e=>w(e.target.value),placeholder:'{\\n  "variable_name": "value",\\n  "another_var": "value"\\n}',className:"font-mono text-sm min-h-[200px]"}),(0,a.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Extra Variables Format"}),(0,a.jsx)("p",{children:"Extra variables must be valid JSON. These variables will be passed to the Ansible playbook during execution. Leave empty if no extra variables are needed."})]})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(n.Button,{onClick:()=>{let e={};if(f.trim())try{e=JSON.parse(f)}catch(e){l({title:"Error",description:"Invalid JSON in extra variables",variant:"destructive"});return}let s={template_id:Number.parseInt(t,10)};Object.keys(e).length>0&&(s.extra_vars=e),k.mutate(s)},disabled:k.isPending||!!y,size:"lg",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),k.isPending?"Launching...":"Launch Playbook"]}),(0,a.jsx)(n.Button,{variant:"outline",asChild:!0,children:(0,a.jsx)(b.default,{href:`/dashboard/automation/playbooks/${t}`,children:"Cancel"})})]})})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsxs)(n.CardHeader,{children:[(0,a.jsx)(n.CardTitle,{className:"text-lg",children:"Example Extra Variables"}),(0,a.jsx)(n.CardDescription,{children:"Common patterns for extra variables"})]}),(0,a.jsxs)(n.CardContent,{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Basic Variables"}),(0,a.jsx)("pre",{className:"p-3 bg-accent rounded-lg text-sm font-mono overflow-x-auto",children:`{
  "environment": "production",
  "debug_mode": false,
  "max_retries": 3
}`})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-2",children:"Network Configuration"}),(0,a.jsx)("pre",{className:"p-3 bg-accent rounded-lg text-sm font-mono overflow-x-auto",children:`{
  "target_hosts": ["router1", "router2"],
  "vlan_id": 100,
  "interface": "eth0"
}`})]})]})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-96",children:[(0,a.jsx)(p.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Playbook Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The playbook template you're looking for doesn't exist."}),(0,a.jsx)(n.Button,{asChild:!0,children:(0,a.jsxs)(b.default,{href:"/dashboard/automation/playbooks",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Playbooks"]})})]})}function g(){return(0,a.jsx)(l.eu,{permission:"isp.automation.execute",children:(0,a.jsx)(f,{})})}},96957:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/[id]/run/page.tsx#default`)}};var s=require("../../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(56922));module.exports=a})();