(()=>{var e={};e.id=8715,e.ids=[8715],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},60798:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(3157),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),o=t(37922),l=t.n(o),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(s,n);let d=["",{children:["dashboard",{children:["automation",{children:["playbooks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3157)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/page.tsx"],x="/dashboard/automation/playbooks/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/automation/playbooks/page",pathname:"/dashboard/automation/playbooks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},11215:(e,s,t)=>{Promise.resolve().then(t.bind(t,32817))},32817:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(10326),r=t(17577),o=t(44976),l=t(48324),i=t(48723),n=t(20892),d=t(36607),c=t(30361),x=t(69669),p=t(66697),u=t(48998),h=t(21405),m=t(83855),j=t(25880),b=t(88307),f=t(41291),g=t(94893),y=t(90960),v=t(90434);function C(){let{toast:e}=(0,i.useToast)(),s=(0,o.NL)(),[t,n]=(0,r.useState)(""),[C,N]=(0,r.useState)(!1),{data:w=[],isLoading:k}=(0,l.a)({queryKey:["ansible","job-templates"],queryFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/job-templates`,{credentials:"include"});if(!e.ok)throw Error("Failed to fetch job templates");return e.json()}}),{data:P}=(0,l.a)({queryKey:["ansible","stats"],queryFn:async()=>{try{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/stats`,{credentials:"include"});if(!e.ok)throw Error("Stats not available");return e.json()}catch(e){return{total_templates:w.length,recent_jobs:0,successful_jobs:0,failed_jobs:0}}}}),_=w.filter(e=>{if(!t)return!0;let s=t.toLowerCase();return e.name.toLowerCase().includes(s)||((e.description??"").toLowerCase().includes(s)??!1)||((e.playbook??"").toLowerCase().includes(s)??!1)}),q=e=>{if(!e)return null;let s={successful:{variant:"outline",color:"text-green-600",icon:c.Z},failed:{variant:"destructive",color:"text-red-600",icon:x.Z},running:{variant:"default",color:"text-blue-600",icon:p.Z},pending:{variant:"secondary",color:"text-yellow-600",icon:u.Z},canceled:{variant:"secondary",color:"text-gray-600",icon:x.Z}},t=s[e]||s.pending,r=t.icon;return(0,a.jsxs)(i.Badge,{variant:t.variant,className:t.color,children:[(0,a.jsx)(r,{className:"h-3 w-3 mr-1"}),e]})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Playbooks"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage and execute Ansible playbooks via AWX"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"icon",onClick:()=>{s.invalidateQueries({queryKey:["ansible"]}),e({title:"Refreshed",description:"Playbook data has been refreshed"})},disabled:k,children:(0,a.jsx)(h.Z,{className:`h-4 w-4 ${k?"animate-spin":""}`})}),(0,a.jsxs)(i.Button,{onClick:()=>N(!0),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Create Playbook"]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Playbooks"}),(0,a.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P?.total_templates??w.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available templates"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Recent Runs"}),(0,a.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P?.recent_jobs??0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Successful Jobs"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-green-600"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P?.successful_jobs??0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]}),(0,a.jsxs)(i.Card,{children:[(0,a.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Failed Jobs"}),(0,a.jsx)(x.Z,{className:"h-4 w-4 text-red-600"})]}),(0,a.jsxs)(i.CardContent,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:P?.failed_jobs??0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time"})]})]})]}),(0,a.jsx)(i.Card,{children:(0,a.jsx)(i.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.Input,{placeholder:"Search playbooks by name, description, or path...",value:t,onChange:e=>n(e.target.value),className:"pl-10"})]})})}),(0,a.jsxs)(i.Card,{children:[(0,a.jsx)(i.CardHeader,{children:(0,a.jsx)(i.CardTitle,{children:"Available Playbooks"})}),(0,a.jsx)(i.CardContent,{children:k?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):0===_.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,a.jsx)(f.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:t?"No playbooks match your search":"No playbooks found"})]}):(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Name"}),(0,a.jsx)(i.TableHead,{children:"Description"}),(0,a.jsx)(i.TableHead,{children:"Playbook Path"}),(0,a.jsx)(i.TableHead,{children:"Last Run"}),(0,a.jsx)(i.TableHead,{children:"Status"}),(0,a.jsx)(i.TableHead,{children:"Actions"})]})}),(0,a.jsx)(i.TableBody,{children:_.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:(0,a.jsx)("div",{className:"font-medium",children:e.name})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground max-w-xs truncate",children:e.description||"-"})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)("div",{className:"font-mono text-xs",children:e.playbook||"-"})}),(0,a.jsx)(i.TableCell,{children:e.last_job_run?(0,a.jsx)("div",{className:"text-sm",children:(0,y.Q)(new Date(e.last_job_run),{addSuffix:!0})}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)(i.TableCell,{children:q(e.last_job_status)}),(0,a.jsx)(i.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(v.default,{href:`/dashboard/automation/playbooks/${e.id}`,children:"View"})}),(0,a.jsx)(i.Button,{size:"sm",asChild:!0,children:(0,a.jsxs)(v.default,{href:`/dashboard/automation/playbooks/${e.id}/run`,children:[(0,a.jsx)(g.Z,{className:"h-3 w-3 mr-1"}),"Launch"]})})]})})]},e.id))})]})})]}),(0,a.jsx)(i.Dialog,{open:C,onOpenChange:N,children:(0,a.jsxs)(i.DialogContent,{children:[(0,a.jsxs)(i.DialogHeader,{children:[(0,a.jsx)(i.DialogTitle,{children:"Coming Soon"}),(0,a.jsx)(i.DialogDescription,{children:"Playbook creation through the UI is coming soon. For now, please manage playbooks directly via the AWX interface."})]}),(0,a.jsx)(i.Button,{onClick:()=>N(!1),children:"Got it"})]})})]})}function N(){return(0,a.jsx)(n.eu,{permission:"isp.automation.read",children:(0,a.jsx)(C,{})})}},3157:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/playbooks/page.tsx#default`)}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(60798));module.exports=a})();