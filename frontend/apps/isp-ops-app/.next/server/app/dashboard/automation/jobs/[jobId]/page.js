(()=>{var e={};e.id=3832,e.ids=[3832],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},21774:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(87892),t(13321),t(46366),t(96560);var a=t(23191),r=t(88716),n=t(37922),i=t.n(n),o=t(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["automation",{children:["jobs",{children:["[jobId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,87892)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/jobs/[jobId]/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13321)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,46366)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,96560)),"/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/not-found.tsx"]}],c=["/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/jobs/[jobId]/page.tsx"],u="/dashboard/automation/jobs/[jobId]/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/automation/jobs/[jobId]/page",pathname:"/dashboard/automation/jobs/[jobId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},59398:(e,s,t)=>{Promise.resolve().then(t.bind(t,18345))},18345:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(10326),r=t(44976),n=t(48324),i=t(17010),o=t(48723),l=t(20892),d=t(36607),c=t(30361),u=t(69669),m=t(77506),x=t(48998),p=t(7819),h=t(66697),j=t(86333),b=t(21405),f=t(94893),g=t(18019),v=t(37358),N=t(81538),y=t(41291),w=t(34041),C=t(90960),P=t(90434),q=t(35047);function _(){let e=(0,q.useParams)(),s=(0,q.useRouter)(),t=e?.jobId,{toast:l}=(0,o.useToast)(),_=(0,r.NL)(),Z=(0,o.useConfirmDialog)(),{data:T,isLoading:D}=(0,n.a)({queryKey:["ansible","job",t],queryFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/jobs/${t}`,{credentials:"include"});if(!e.ok){if(404===e.status)throw Error("Job not found");throw Error("Failed to fetch job details")}return e.json()},enabled:!!t,refetchInterval:5e3}),J=(0,i.D)({mutationFn:async()=>{let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/jobs/${t}/cancel`,{method:"POST",credentials:"include"});if(!e.ok)throw Error("Failed to cancel job");return e.json()},onSuccess:()=>{_.invalidateQueries({queryKey:["ansible","job",t]}),l({title:"Success",description:"Job cancellation requested"})},onError:e=>{l({title:"Error",description:e.message,variant:"destructive"})}}),k=(0,i.D)({mutationFn:async()=>{if(!T?.template_id)throw Error("No template ID available for relaunch");let e=await fetch(`${d.LM.api.baseUrl}/api/v1/ansible/jobs/launch`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_id:T.template_id,extra_vars:T.extra_vars})});if(!e.ok)throw Error("Failed to relaunch job");return e.json()},onSuccess:e=>{l({title:"Success",description:"Job relaunched successfully"}),s.push(`/dashboard/automation/jobs/${e.id}`)},onError:e=>{l({title:"Error",description:e.message,variant:"destructive"})}}),E=async()=>{await Z({title:"Cancel job",description:"Are you sure you want to cancel this job?",confirmText:"Cancel job",variant:"destructive"})&&J.mutate()},S=async()=>{await Z({title:"Relaunch job",description:"Relaunch this job with the same configuration?",confirmText:"Relaunch"})&&k.mutate()};if(D)return(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsx)(h.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!T)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-96",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Job Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"The job you're looking for doesn't exist."}),(0,a.jsx)(o.Button,{asChild:!0,children:(0,a.jsxs)(P.default,{href:"/dashboard/automation/jobs",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Back to Jobs"]})})]});let $="running"===T.status||"pending"===T.status,U=void 0!==T.template_id;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.Button,{variant:"outline",size:"icon",asChild:!0,children:(0,a.jsx)(P.default,{href:"/dashboard/automation/jobs",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold",children:["Job #",T.id]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:T.name})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(e=>{let s={successful:{variant:"outline",color:"text-green-600 bg-green-50 border-green-200",icon:c.Z},failed:{variant:"destructive",color:"text-red-600",icon:u.Z},running:{variant:"default",color:"text-blue-600 bg-blue-50 border-blue-200",icon:m.Z},pending:{variant:"secondary",color:"text-yellow-600 bg-yellow-50 border-yellow-200",icon:x.Z},canceled:{variant:"secondary",color:"text-gray-600 bg-gray-50 border-gray-200",icon:p.Z}}[e],t=s.icon;return(0,a.jsxs)(o.Badge,{variant:s.variant,className:`${s.color} text-base px-3 py-1`,children:[(0,a.jsx)(t,{className:`h-4 w-4 mr-2 ${"running"===e?"animate-spin":""}`}),e.toUpperCase()]})})(T.status)})]}),(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{className:"text-lg",children:"Quick Actions"})}),(0,a.jsxs)(o.CardContent,{className:"flex items-center gap-3",children:[(0,a.jsxs)(o.Button,{variant:"outline",onClick:()=>{_.invalidateQueries({queryKey:["ansible","job",t]}),l({title:"Refreshed",description:"Job data has been refreshed"})},children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]}),$&&(0,a.jsxs)(o.Button,{variant:"destructive",onClick:()=>{E()},disabled:J.isPending,children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),J.isPending?"Canceling...":"Cancel Job"]}),U&&(0,a.jsxs)(o.Button,{onClick:()=>{S()},disabled:k.isPending,children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),k.isPending?"Relaunching...":"Relaunch Job"]})]})]}),"running"===T.status&&(0,a.jsx)(o.Card,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(o.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-blue-600 animate-spin"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"Job is currently running"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"This page will auto-refresh every 5 seconds"})]})]})})}),(0,a.jsxs)(o.Tabs,{defaultValue:"overview",className:"space-y-4",children:[(0,a.jsxs)(o.TabsList,{children:[(0,a.jsx)(o.TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(o.TabsTrigger,{value:"logs",children:"Logs"})]}),(0,a.jsx)(o.TabsContent,{value:"overview",className:"space-y-4",children:(0,a.jsxs)(o.Card,{children:[(0,a.jsx)(o.CardHeader,{children:(0,a.jsx)(o.CardTitle,{className:"text-lg",children:"Job Information"})}),(0,a.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Job ID"})]}),(0,a.jsx)("span",{className:"font-mono",children:T.id})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Status"})]}),(0,a.jsx)("span",{className:"capitalize",children:T.status})]})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Created"})]}),(0,a.jsx)("span",{className:"text-sm",children:(0,w.WU)(new Date(T.created),"PPpp")})]}),T.started&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Started"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[(0,w.WU)(new Date(T.started),"PPpp"),(0,a.jsxs)("span",{className:"text-muted-foreground ml-2",children:["(",(0,C.Q)(new Date(T.started),{addSuffix:!0}),")"]})]})]}),T.finished&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Finished"})]}),(0,a.jsxs)("span",{className:"text-sm",children:[(0,w.WU)(new Date(T.finished),"PPpp"),(0,a.jsxs)("span",{className:"text-muted-foreground ml-2",children:["(",(0,C.Q)(new Date(T.finished),{addSuffix:!0}),")"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-accent rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Duration"})]}),(0,a.jsx)("span",{className:"font-mono",children:(e=>{if(!e)return"-";let s=Math.floor(e/60),t=e%60,a=Math.floor(s/60);return a>0?`${a}h ${s%60}m ${t}s`:s>0?`${s}m ${t}s`:`${t}s`})(T.elapsed)})]})]}),T.extra_vars&&Object.keys(T.extra_vars).length>0&&(0,a.jsxs)("div",{className:"pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Extra Variables"})]}),(0,a.jsx)("pre",{className:"p-3 bg-accent rounded-lg text-sm font-mono overflow-x-auto",children:JSON.stringify(T.extra_vars,null,2)})]})]})]})}),(0,a.jsx)(o.TabsContent,{value:"logs",className:"space-y-4",children:(0,a.jsxs)(o.Card,{children:[(0,a.jsxs)(o.CardHeader,{children:[(0,a.jsx)(o.CardTitle,{children:"Job Output"}),(0,a.jsx)(o.CardDescription,{children:"Real-time logs and output from job execution"})]}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"font-medium mb-2",children:"Real-time Logs Coming Soon"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground max-w-md",children:"Job output and logs will be available in a future release. For now, please check the AWX interface for detailed job logs and output."})]})})]})})]})]})}function Z(){return(0,a.jsx)(l.eu,{permission:"isp.automation.read",children:(0,a.jsx)(_,{})})}},87892:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/michaelayoade/Downloads/Projects/dotmac-ftth-ops/split-staging/dotmac-isp/frontend/apps/isp-ops-app/app/dashboard/automation/jobs/[jobId]/page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[2793,1009,6226,657,6032,4218],()=>t(21774));module.exports=a})();